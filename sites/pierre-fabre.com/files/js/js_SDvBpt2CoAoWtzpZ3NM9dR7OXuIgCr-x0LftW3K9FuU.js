function materialize_init(){var elems=document.querySelectorAll('select'),dropdownOptions={onOpenStart:function(){this.el.parentElement.classList.add('open');var $optionElements=this.dropdownEl.children;for(var i=0;i<$optionElements.length;i++)$optionElements[i].addEventListener('click',function(){if(document.querySelectorAll('.page-node-type-homepage').length>0&&document.querySelectorAll('#views-exposed-form-social-wall-block-socialwall').length>0){var event="eventGA",categoryGA="Home page",actionGA="Social Wall - Brands",labelGA=this.firstElementChild.textContent,valueGA="0",nonInteraction="false";dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction})};if(document.querySelectorAll('.path-talents').length>0){var event="eventGA",categoryGA="Our offers",MapppingActionGA={field_offer_activity:'Filters_Activity',field_offer_contract_type:'Filters_Contract',field_offer_location:'Filters_Location',field_offer_study_level:'Filters_Level of studies',field_offer_company:'Filters_Brands'},field_name=this.parentElement.nextSibling.nextSibling.name,actionGA=MapppingActionGA[field_name],labelGA=this.firstElementChild.textContent,valueGA="0",nonInteraction="false";dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction})}})},onCloseStart:function(){this.el.parentElement.classList.remove('open')}},options={dropdownOptions:dropdownOptions},instances=M.FormSelect.init(elems,options)};document.addEventListener('DOMContentLoaded',function(){materialize_init()});(function($){$(document).ajaxSuccess(function(){materialize_init()})}(jQuery));
jQuery(document).ready(function($){$(".skip-link").bind("focus",function(){if('onetrust-accept-btn-handler'!==$(e.relatedTarget).attr('id')&&'onetrust-reject-all-handler'!==$(e.relatedTarget).attr('id'))$(this).parent().addClass('active')});$(".skip-link").bind("focusout",function(){$(this).parent().removeClass('active')});$('.skip-link[href="#nav"]').click(function(){$('#block-navigationprincipale .menu li:first-child a').trigger('focus')})});
/*!
 * headroom.js v0.9.4 - Give your page some headroom. Hide your header until you need it
 * Copyright (c) 2017 Nick Williams - http://wicky.nillia.ms/headroom.js
 * License: MIT
 */

!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Headroom=b()}(this,function(){"use strict";function a(a){this.callback=a,this.ticking=!1}function b(a){return a&&"undefined"!=typeof window&&(a===window||a.nodeType)}function c(a){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var d,e,f=a||{};for(e=1;e<arguments.length;e++){var g=arguments[e]||{};for(d in g)"object"!=typeof f[d]||b(f[d])?f[d]=f[d]||g[d]:f[d]=c(f[d],g[d])}return f}function d(a){return a===Object(a)?a:{down:a,up:a}}function e(a,b){b=c(b,e.options),this.lastKnownScrollY=0,this.elem=a,this.tolerance=d(b.tolerance),this.classes=b.classes,this.offset=b.offset,this.scroller=b.scroller,this.initialised=!1,this.onPin=b.onPin,this.onUnpin=b.onUnpin,this.onTop=b.onTop,this.onNotTop=b.onNotTop,this.onBottom=b.onBottom,this.onNotBottom=b.onNotBottom}var f={bind:!!function(){}.bind,classList:"classList"in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};return window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,a.prototype={constructor:a,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},e.prototype={constructor:e,init:function(){if(e.cutsTheMustard)return this.debouncer=new a(this.update.bind(this)),this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this},destroy:function(){var a=this.classes;this.initialised=!1;for(var b in a)a.hasOwnProperty(b)&&this.elem.classList.remove(a[b]);this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var a=this.elem.classList,b=this.classes;!a.contains(b.pinned)&&a.contains(b.unpinned)||(a.add(b.unpinned),a.remove(b.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var a=this.elem.classList,b=this.classes;a.contains(b.unpinned)&&(a.remove(b.unpinned),a.add(b.pinned),this.onPin&&this.onPin.call(this))},top:function(){var a=this.elem.classList,b=this.classes;a.contains(b.top)||(a.add(b.top),a.remove(b.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var a=this.elem.classList,b=this.classes;a.contains(b.notTop)||(a.add(b.notTop),a.remove(b.top),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){var a=this.elem.classList,b=this.classes;a.contains(b.bottom)||(a.add(b.bottom),a.remove(b.notBottom),this.onBottom&&this.onBottom.call(this))},notBottom:function(){var a=this.elem.classList,b=this.classes;a.contains(b.notBottom)||(a.add(b.notBottom),a.remove(b.bottom),this.onNotBottom&&this.onNotBottom.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getElementPhysicalHeight:function(a){return Math.max(a.offsetHeight,a.clientHeight)},getScrollerPhysicalHeight:function(){return this.scroller===window||this.scroller===document.body?this.getViewportHeight():this.getElementPhysicalHeight(this.scroller)},getDocumentHeight:function(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,b.scrollHeight,a.offsetHeight,b.offsetHeight,a.clientHeight,b.clientHeight)},getElementHeight:function(a){return Math.max(a.scrollHeight,a.offsetHeight,a.clientHeight)},getScrollerHeight:function(){return this.scroller===window||this.scroller===document.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(a){var b=a<0,c=a+this.getScrollerPhysicalHeight()>this.getScrollerHeight();return b||c},toleranceExceeded:function(a,b){return Math.abs(a-this.lastKnownScrollY)>=this.tolerance[b]},shouldUnpin:function(a,b){var c=a>this.lastKnownScrollY,d=a>=this.offset;return c&&d&&b},shouldPin:function(a,b){var c=a<this.lastKnownScrollY,d=a<=this.offset;return c&&b||d},update:function(){var a=this.getScrollY(),b=a>this.lastKnownScrollY?"down":"up",c=this.toleranceExceeded(a,b);this.isOutOfBounds(a)||(a<=this.offset?this.top():this.notTop(),a+this.getViewportHeight()>=this.getScrollerHeight()?this.bottom():this.notBottom(),this.shouldUnpin(a,c)?this.unpin():this.shouldPin(a,c)&&this.pin(),this.lastKnownScrollY=a)}},e.options={tolerance:{up:0,down:0},offset:0,scroller:window,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},e.cutsTheMustard="undefined"!=typeof f&&f.rAF&&f.bind&&f.classList,e});;
+function($){'use strict';var auto=false;$(window).scroll(function(){$('.to-top').hide();$.data(this,'scrollTimer',setTimeout(function(){if($(window).scrollTop()!=0&&!auto){$('.to-top').fadeIn()}else $('.to-top').hide()},250))});$('.to-top').click(function(){auto=true;$("html, body").animate({scrollTop:0},600,function(){auto=false})});var headerElement=document.querySelector("header.navbar");if(headerElement!==null){var headroom=new Headroom(headerElement);headroom.init()};$(document).ajaxSuccess(function(){var shareElement=document.querySelector(".block-sqli-share-block");if(shareElement!==null){var headroom=new Headroom(shareElement);headroom.init()}})}(jQuery);
(function($){$('.accessibility-link').on('click',function(e){e.preventDefault();$('#INDmenu-btn').trigger('click')})}(jQuery));
/*
 2017 Julian Garnier
 Released under the MIT license
 */
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,r,p){if(p.get||p.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[r]=p.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var r=0;return $jscomp.iteratorPrototype(function(){return r<e.length?{done:!1,value:e[r++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(e,r){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var p=0,m={next:function(){if(p<e.length){var u=p++;return{value:r(u,e[u]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill=function(e,r,p,m){if(r){p=$jscomp.global;e=e.split(".");for(m=0;m<e.length-1;m++){var u=e[m];u in p||(p[u]={});p=p[u]}e=e[e.length-1];m=p[e];r=r(m);r!=m&&null!=r&&$jscomp.defineProperty(p,e,{configurable:!0,writable:!0,value:r})}};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3");var $jscomp$this=this;
(function(e,r){"function"===typeof define&&define.amd?define([],r):"object"===typeof module&&module.exports?module.exports=r():e.anime=r()})(this,function(){function e(a){if(!h.col(a))try{return document.querySelectorAll(a)}catch(c){}}function r(a,c){for(var d=a.length,b=2<=arguments.length?arguments[1]:void 0,f=[],n=0;n<d;n++)if(n in a){var k=a[n];c.call(b,k,n,a)&&f.push(k)}return f}function p(a){return a.reduce(function(a,d){return a.concat(h.arr(d)?p(d):d)},[])}function m(a){if(h.arr(a))return a;
    h.str(a)&&(a=e(a)||a);return a instanceof NodeList||a instanceof HTMLCollection?[].slice.call(a):[a]}function u(a,c){return a.some(function(a){return a===c})}function C(a){var c={},d;for(d in a)c[d]=a[d];return c}function D(a,c){var d=C(a),b;for(b in a)d[b]=c.hasOwnProperty(b)?c[b]:a[b];return d}function z(a,c){var d=C(a),b;for(b in c)d[b]=h.und(a[b])?c[b]:a[b];return d}function T(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,c,d,k){return c+c+d+d+k+k});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);
    a=parseInt(c[1],16);var d=parseInt(c[2],16),c=parseInt(c[3],16);return"rgba("+a+","+d+","+c+",1)"}function U(a){function c(a,c,b){0>b&&(b+=1);1<b&&--b;return b<1/6?a+6*(c-a)*b:.5>b?c:b<2/3?a+(c-a)*(2/3-b)*6:a}var d=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(a)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(a);a=parseInt(d[1])/360;var b=parseInt(d[2])/100,f=parseInt(d[3])/100,d=d[4]||1;if(0==b)f=b=a=f;else{var n=.5>f?f*(1+b):f+b-f*b,k=2*f-n,f=c(k,n,a+1/3),b=c(k,n,a);a=c(k,n,a-1/3)}return"rgba("+
    255*f+","+255*b+","+255*a+","+d+")"}function y(a){if(a=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(a))return a[2]}function V(a){if(-1<a.indexOf("translate")||"perspective"===a)return"px";if(-1<a.indexOf("rotate")||-1<a.indexOf("skew"))return"deg"}function I(a,c){return h.fnc(a)?a(c.target,c.id,c.total):a}function E(a,c){if(c in a.style)return getComputedStyle(a).getPropertyValue(c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function J(a,c){if(h.dom(a)&&
    u(W,c))return"transform";if(h.dom(a)&&(a.getAttribute(c)||h.svg(a)&&a[c]))return"attribute";if(h.dom(a)&&"transform"!==c&&E(a,c))return"css";if(null!=a[c])return"object"}function X(a,c){var d=V(c),d=-1<c.indexOf("scale")?1:0+d;a=a.style.transform;if(!a)return d;for(var b=[],f=[],n=[],k=/(\w+)\((.+?)\)/g;b=k.exec(a);)f.push(b[1]),n.push(b[2]);a=r(n,function(a,b){return f[b]===c});return a.length?a[0]:d}function K(a,c){switch(J(a,c)){case "transform":return X(a,c);case "css":return E(a,c);case "attribute":return a.getAttribute(c)}return a[c]||
    0}function L(a,c){var d=/^(\*=|\+=|-=)/.exec(a);if(!d)return a;var b=y(a)||0;c=parseFloat(c);a=parseFloat(a.replace(d[0],""));switch(d[0][0]){case "+":return c+a+b;case "-":return c-a+b;case "*":return c*a+b}}function F(a,c){return Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2))}function M(a){a=a.points;for(var c=0,d,b=0;b<a.numberOfItems;b++){var f=a.getItem(b);0<b&&(c+=F(d,f));d=f}return c}function N(a){if(a.getTotalLength)return a.getTotalLength();switch(a.tagName.toLowerCase()){case "circle":return 2*
    Math.PI*a.getAttribute("r");case "rect":return 2*a.getAttribute("width")+2*a.getAttribute("height");case "line":return F({x:a.getAttribute("x1"),y:a.getAttribute("y1")},{x:a.getAttribute("x2"),y:a.getAttribute("y2")});case "polyline":return M(a);case "polygon":var c=a.points;return M(a)+F(c.getItem(c.numberOfItems-1),c.getItem(0))}}function Y(a,c){function d(b){b=void 0===b?0:b;return a.el.getPointAtLength(1<=c+b?c+b:0)}var b=d(),f=d(-1),n=d(1);switch(a.property){case "x":return b.x;case "y":return b.y;
    case "angle":return 180*Math.atan2(n.y-f.y,n.x-f.x)/Math.PI}}function O(a,c){var d=/-?\d*\.?\d+/g,b;b=h.pth(a)?a.totalLength:a;if(h.col(b))if(h.rgb(b)){var f=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(b);b=f?"rgba("+f[1]+",1)":b}else b=h.hex(b)?T(b):h.hsl(b)?U(b):void 0;else f=(f=y(b))?b.substr(0,b.length-f.length):b,b=c&&!/\s/g.test(b)?f+c:f;b+="";return{original:b,numbers:b.match(d)?b.match(d).map(Number):[0],strings:h.str(a)||c?b.split(d):[]}}function P(a){a=a?p(h.arr(a)?a.map(m):m(a)):[];return r(a,
    function(a,d,b){return b.indexOf(a)===d})}function Z(a){var c=P(a);return c.map(function(a,b){return{target:a,id:b,total:c.length}})}function aa(a,c){var d=C(c);if(h.arr(a)){var b=a.length;2!==b||h.obj(a[0])?h.fnc(c.duration)||(d.duration=c.duration/b):a={value:a}}return m(a).map(function(a,b){b=b?0:c.delay;a=h.obj(a)&&!h.pth(a)?a:{value:a};h.und(a.delay)&&(a.delay=b);return a}).map(function(a){return z(a,d)})}function ba(a,c){var d={},b;for(b in a){var f=I(a[b],c);h.arr(f)&&(f=f.map(function(a){return I(a,
    c)}),1===f.length&&(f=f[0]));d[b]=f}d.duration=parseFloat(d.duration);d.delay=parseFloat(d.delay);return d}function ca(a){return h.arr(a)?A.apply(this,a):Q[a]}function da(a,c){var d;return a.tweens.map(function(b){b=ba(b,c);var f=b.value,e=K(c.target,a.name),k=d?d.to.original:e,k=h.arr(f)?f[0]:k,w=L(h.arr(f)?f[1]:f,k),e=y(w)||y(k)||y(e);b.from=O(k,e);b.to=O(w,e);b.start=d?d.end:a.offset;b.end=b.start+b.delay+b.duration;b.easing=ca(b.easing);b.elasticity=(1E3-Math.min(Math.max(b.elasticity,1),999))/
1E3;b.isPath=h.pth(f);b.isColor=h.col(b.from.original);b.isColor&&(b.round=1);return d=b})}function ea(a,c){return r(p(a.map(function(a){return c.map(function(b){var c=J(a.target,b.name);if(c){var d=da(b,a);b={type:c,property:b.name,animatable:a,tweens:d,duration:d[d.length-1].end,delay:d[0].delay}}else b=void 0;return b})})),function(a){return!h.und(a)})}function R(a,c,d,b){var f="delay"===a;return c.length?(f?Math.min:Math.max).apply(Math,c.map(function(b){return b[a]})):f?b.delay:d.offset+b.delay+
b.duration}function fa(a){var c=D(ga,a),d=D(S,a),b=Z(a.targets),f=[],e=z(c,d),k;for(k in a)e.hasOwnProperty(k)||"targets"===k||f.push({name:k,offset:e.offset,tweens:aa(a[k],d)});a=ea(b,f);return z(c,{children:[],animatables:b,animations:a,duration:R("duration",a,c,d),delay:R("delay",a,c,d)})}function q(a){function c(){return window.Promise&&new Promise(function(a){return p=a})}function d(a){return g.reversed?g.duration-a:a}function b(a){for(var b=0,c={},d=g.animations,f=d.length;b<f;){var e=d[b],
    k=e.animatable,h=e.tweens,n=h.length-1,l=h[n];n&&(l=r(h,function(b){return a<b.end})[0]||l);for(var h=Math.min(Math.max(a-l.start-l.delay,0),l.duration)/l.duration,w=isNaN(h)?1:l.easing(h,l.elasticity),h=l.to.strings,p=l.round,n=[],m=void 0,m=l.to.numbers.length,t=0;t<m;t++){var x=void 0,x=l.to.numbers[t],q=l.from.numbers[t],x=l.isPath?Y(l.value,w*x):q+w*(x-q);p&&(l.isColor&&2<t||(x=Math.round(x*p)/p));n.push(x)}if(l=h.length)for(m=h[0],w=0;w<l;w++)p=h[w+1],t=n[w],isNaN(t)||(m=p?m+(t+p):m+(t+" "));
else m=n[0];ha[e.type](k.target,e.property,m,c,k.id);e.currentValue=m;b++}if(b=Object.keys(c).length)for(d=0;d<b;d++)H||(H=E(document.body,"transform")?"transform":"-webkit-transform"),g.animatables[d].target.style[H]=c[d].join(" ");g.currentTime=a;g.progress=a/g.duration*100}function f(a){if(g[a])g[a](g)}function e(){g.remaining&&!0!==g.remaining&&g.remaining--}function k(a){var k=g.duration,n=g.offset,w=n+g.delay,r=g.currentTime,x=g.reversed,q=d(a);if(g.children.length){var u=g.children,v=u.length;
    if(q>=g.currentTime)for(var G=0;G<v;G++)u[G].seek(q);else for(;v--;)u[v].seek(q)}if(q>=w||!k)g.began||(g.began=!0,f("begin")),f("run");if(q>n&&q<k)b(q);else if(q<=n&&0!==r&&(b(0),x&&e()),q>=k&&r!==k||!k)b(k),x||e();f("update");a>=k&&(g.remaining?(t=h,"alternate"===g.direction&&(g.reversed=!g.reversed)):(g.pause(),g.completed||(g.completed=!0,f("complete"),"Promise"in window&&(p(),m=c()))),l=0)}a=void 0===a?{}:a;var h,t,l=0,p=null,m=c(),g=fa(a);g.reset=function(){var a=g.direction,c=g.loop;g.currentTime=
    0;g.progress=0;g.paused=!0;g.began=!1;g.completed=!1;g.reversed="reverse"===a;g.remaining="alternate"===a&&1===c?2:c;b(0);for(a=g.children.length;a--;)g.children[a].reset()};g.tick=function(a){h=a;t||(t=h);k((l+h-t)*q.speed)};g.seek=function(a){k(d(a))};g.pause=function(){var a=v.indexOf(g);-1<a&&v.splice(a,1);g.paused=!0};g.play=function(){g.paused&&(g.paused=!1,t=0,l=d(g.currentTime),v.push(g),B||ia())};g.reverse=function(){g.reversed=!g.reversed;t=0;l=d(g.currentTime)};g.restart=function(){g.pause();
    g.reset();g.play()};g.finished=m;g.reset();g.autoplay&&g.play();return g}var ga={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},S={duration:1E3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},W="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),H,h={arr:function(a){return Array.isArray(a)},obj:function(a){return-1<Object.prototype.toString.call(a).indexOf("Object")},
    pth:function(a){return h.obj(a)&&a.hasOwnProperty("totalLength")},svg:function(a){return a instanceof SVGElement},dom:function(a){return a.nodeType||h.svg(a)},str:function(a){return"string"===typeof a},fnc:function(a){return"function"===typeof a},und:function(a){return"undefined"===typeof a},hex:function(a){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)},rgb:function(a){return/^rgb/.test(a)},hsl:function(a){return/^hsl/.test(a)},col:function(a){return h.hex(a)||h.rgb(a)||h.hsl(a)}},A=function(){function a(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       d,b){return(((1-3*b+3*d)*a+(3*b-6*d))*a+3*d)*a}return function(c,d,b,f){if(0<=c&&1>=c&&0<=b&&1>=b){var e=new Float32Array(11);if(c!==d||b!==f)for(var k=0;11>k;++k)e[k]=a(.1*k,c,b);return function(k){if(c===d&&b===f)return k;if(0===k)return 0;if(1===k)return 1;for(var h=0,l=1;10!==l&&e[l]<=k;++l)h+=.1;--l;var l=h+(k-e[l])/(e[l+1]-e[l])*.1,n=3*(1-3*b+3*c)*l*l+2*(3*b-6*c)*l+3*c;if(.001<=n){for(h=0;4>h;++h){n=3*(1-3*b+3*c)*l*l+2*(3*b-6*c)*l+3*c;if(0===n)break;var m=a(l,c,b)-k,l=l-m/n}k=l}else if(0===
    n)k=l;else{var l=h,h=h+.1,g=0;do m=l+(h-l)/2,n=a(m,c,b)-k,0<n?h=m:l=m;while(1e-7<Math.abs(n)&&10>++g);k=m}return a(k,d,f)}}}}(),Q=function(){function a(a,b){return 0===a||1===a?a:-Math.pow(2,10*(a-1))*Math.sin(2*(a-1-b/(2*Math.PI)*Math.asin(1))*Math.PI/b)}var c="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),d={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],a],Out:[[.25,
    .46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(b,c){return 1-a(1-b,c)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(b,c){return.5>b?a(2*b,c)/2:1-a(-2*b+2,c)/2}]},b={linear:A(.25,.25,.75,.75)},f={},e;for(e in d)f.type=e,d[f.type].forEach(function(a){return function(d,f){b["ease"+a.type+c[f]]=h.fnc(d)?
    d:A.apply($jscomp$this,d)}}(f)),f={type:f.type};return b}(),ha={css:function(a,c,d){return a.style[c]=d},attribute:function(a,c,d){return a.setAttribute(c,d)},object:function(a,c,d){return a[c]=d},transform:function(a,c,d,b,f){b[f]||(b[f]=[]);b[f].push(c+"("+d+")")}},v=[],B=0,ia=function(){function a(){B=requestAnimationFrame(c)}function c(c){var b=v.length;if(b){for(var d=0;d<b;)v[d]&&v[d].tick(c),d++;a()}else cancelAnimationFrame(B),B=0}return a}();q.version="2.2.0";q.speed=1;q.running=v;q.remove=
    function(a){a=P(a);for(var c=v.length;c--;)for(var d=v[c],b=d.animations,f=b.length;f--;)u(a,b[f].animatable.target)&&(b.splice(f,1),b.length||d.pause())};q.getValue=K;q.path=function(a,c){var d=h.str(a)?e(a)[0]:a,b=c||100;return function(a){return{el:d,property:a,totalLength:N(d)*(b/100)}}};q.setDashoffset=function(a){var c=N(a);a.setAttribute("stroke-dasharray",c);return c};q.bezier=A;q.easings=Q;q.timeline=function(a){var c=q(a);c.pause();c.duration=0;c.add=function(d){c.children.forEach(function(a){a.began=
    !0;a.completed=!0});m(d).forEach(function(b){var d=z(b,D(S,a||{}));d.targets=d.targets||a.targets;b=c.duration;var e=d.offset;d.autoplay=!1;d.direction=c.direction;d.offset=h.und(e)?b:L(e,b);c.began=!0;c.completed=!0;c.seek(d.offset);d=q(d);d.began=!0;d.completed=!0;d.duration>b&&(c.duration=d.duration);c.children.push(d)});c.seek(0);c.reset();c.autoplay&&c.restart();return c};return c};q.random=function(a,c){return Math.floor(Math.random()*(c-a+1))+a};return q});;
(function(_,$,Drupal,drupalSettings){'use strict';var Bootstrap={processedOnce:{},settings:drupalSettings.bootstrap||{}};Bootstrap.checkPlain=function(str){return str&&Drupal.checkPlain(str)||''};Bootstrap.createPlugin=function(id,plugin,noConflict){if($.fn[id]!==void(0))return this.fatal('Specified jQuery plugin identifier already exists: @id. Use Drupal.bootstrap.replacePlugin() instead.',{'@id':id});if(typeof plugin!=='function')return this.fatal('You must provide a constructor function to create a jQuery plugin "@id": @plugin',{'@id':id,'@plugin':plugin});this.pluginNoConflict(id,plugin,noConflict);$.fn[id]=plugin};Bootstrap.diffObjects=function(objects){var args=Array.prototype.slice.call(arguments);return _.pick(args[0],_.difference.apply(_,_.map(args,function(obj){return Object.keys(obj)})))};Bootstrap.eventMap={Event:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvent:/^(?:click|dblclick|mouse(?:down|enter|leave|up|over|move|out))$/,KeyboardEvent:/^(?:key(?:down|press|up))$/,TouchEvent:/^(?:touch(?:start|end|move|cancel))$/};Bootstrap.extendPlugin=function(id,callback){if(typeof $.fn[id]!=='function')return this.fatal('Specified jQuery plugin identifier does not exist: @id',{'@id':id});if(typeof callback!=='function')return this.fatal('You must provide a callback function to extend the jQuery plugin "@id": @callback',{'@id':id,'@callback':callback});var constructor=$.fn[id]&&$.fn[id].Constructor||$.fn[id],plugin=callback.apply(constructor,[this.settings]);if(!$.isPlainObject(plugin))return this.fatal('Returned value from callback is not a plain object that can be used to extend the jQuery plugin "@id": @obj',{'@obj':plugin});this.wrapPluginConstructor(constructor,plugin,true);return $.fn[id]};Bootstrap.superWrapper=function(parent,fn){return function(){var previousSuper=this.super;this.super=parent;var ret=fn.apply(this,arguments);if(previousSuper){this.super=previousSuper}else delete this.super;return ret}};Bootstrap.fatal=function(message,args){if(this.settings.dev&&console.warn){for(var name in args)if(args.hasOwnProperty(name)&&typeof args[name]==='object')args[name]=JSON.stringify(args[name]);Drupal.throwError(new Error(Drupal.formatString(message,args)))};return false};Bootstrap.intersectObjects=function(objects){var args=Array.prototype.slice.call(arguments);return _.pick(args[0],_.intersection.apply(_,_.map(args,function(obj){return Object.keys(obj)})))};Bootstrap.normalizeObject=function(obj){if(!$.isPlainObject(obj))return obj;for(var k in obj)if(typeof obj[k]==='string'){if(obj[k]==='true'){obj[k]=true}else if(obj[k]==='false'){obj[k]=false}else if(obj[k].match(/^[\d-.]$/))obj[k]=parseFloat(obj[k])}else if($.isPlainObject(obj[k]))obj[k]=Bootstrap.normalizeObject(obj[k]);return obj};Bootstrap.once=function(id,callback){if(this.processedOnce[id])return this;callback.call(this,this.settings);this.processedOnce[id]=true;return this};Bootstrap.option=function(key,value){var options=$.isPlainObject(key)?$.extend({},key):{};if(arguments.length===0)return $.extend({},this.options);if(typeof key==="string"){var parts=key.split('.');key=parts.shift();var obj=options;if(parts.length){for(var i=0;i<parts.length-1;i++){obj[parts[i]]=obj[parts[i]]||{};obj=obj[parts[i]]};key=parts.pop()};if(arguments.length===1)return obj[key]===void(0)?null:obj[key];obj[key]=value};$.extend(true,this.options,options)};Bootstrap.pluginNoConflict=function(id,plugin,noConflict){if(plugin.noConflict===void(0)&&(noConflict===void(0)||noConflict)){var old=$.fn[id];plugin.noConflict=function(){$.fn[id]=old;return this}}};Bootstrap.relayEvent=function(target,name,stopPropagation){return function(e){if(stopPropagation===void(0)||stopPropagation)e.stopPropagation();var $target=$(target),parts=name.split('.').filter(Boolean),type=parts.shift();e.target=$target[0];e.currentTarget=$target[0];e.namespace=parts.join('.');e.type=type;$target.trigger(e)}};Bootstrap.replacePlugin=function(id,callback,noConflict){if(typeof $.fn[id]!=='function')return this.fatal('Specified jQuery plugin identifier does not exist: @id',{'@id':id});if(typeof callback!=='function')return this.fatal('You must provide a valid callback function to replace a jQuery plugin: @callback',{'@callback':callback});var constructor=$.fn[id]&&$.fn[id].Constructor||$.fn[id],plugin=callback.apply(constructor,[this.settings]);if(typeof plugin!=='function')return this.fatal('Returned value from callback is not a usable function to replace a jQuery plugin "@id": @plugin',{'@id':id,'@plugin':plugin});this.wrapPluginConstructor(constructor,plugin);this.pluginNoConflict(id,plugin,noConflict);$.fn[id]=plugin};Bootstrap.simulate=function(element,type,options){var ret=true;if(element instanceof $){element.each(function(){if(!Bootstrap.simulate(this,type,options))ret=false});return ret};if(!(element instanceof HTMLElement))this.fatal('Passed element must be an instance of HTMLElement, got "@type" instead.',{'@type':typeof element});if(typeof $.simulate==='function'){new $.simulate(element,type,options);return true};var event,ctor,types=[].concat(type);for(var i=0,l=types.length;i<l;i++){type=types[i];for(var name in this.eventMap)if(this.eventMap[name].test(type)){ctor=name;break};if(!ctor)throw new SyntaxError('Only rudimentary HTMLEvents, KeyboardEvents and MouseEvents are supported: '+type);var opts={bubbles:true,cancelable:true};if(ctor==='KeyboardEvent'||ctor==='MouseEvent')$.extend(opts,{ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1});if(ctor==='MouseEvent')$.extend(opts,{button:0,pointerX:0,pointerY:0,view:window});if(options)$.extend(opts,options);if(typeof window[ctor]==='function'){event=new window[ctor](type,opts);if(!element.dispatchEvent(event))ret=false}else if(document.createEvent){event=document.createEvent(ctor);event.initEvent(type,opts.bubbles,opts.cancelable);if(!element.dispatchEvent(event))ret=false}else if(typeof element.fireEvent==='function'){event=$.extend(document.createEventObject(),opts);if(!element.fireEvent('on'+type,event))ret=false}else if(typeof element[type])element[type]()};return ret};Bootstrap.stripHtml=function(html){if(html instanceof $){html=html.html()}else if(html instanceof Element)html=html.innerHTML;var tmp=document.createElement('DIV');tmp.innerHTML=html;return(tmp.textContent||tmp.innerText||'').replace(/^[\s\n\t]*|[\s\n\t]*$/,'')};Bootstrap.unsupported=function(type,name,value){Bootstrap.warn('Unsupported by Drupal Bootstrap: (@type) @name -> @value',{'@type':type,'@name':name,'@value':typeof value==='object'?JSON.stringify(value):value})};Bootstrap.warn=function(message,args){if(this.settings.dev&&console.warn)console.warn(Drupal.formatString(message,args))};Bootstrap.wrapPluginConstructor=function(constructor,plugin,extend){var proto=constructor.prototype,option=this.option;if(proto.option===void(0))proto.option=function(){return option.apply(this,arguments)};if(extend){if(plugin.prototype!==void(0))for(var key in plugin.prototype){if(!plugin.prototype.hasOwnProperty(key))continue;var value=plugin.prototype[key];if(typeof value==='function'){proto[key]=this.superWrapper(proto[key]||function(){},value)}else proto[key]=$.isPlainObject(value)?$.extend(true,{},proto[key],value):value};delete plugin.prototype;for(key in plugin){if(!plugin.hasOwnProperty(key))continue;value=plugin[key];if(typeof value==='function'){constructor[key]=this.superWrapper(constructor[key]||function(){},value)}else constructor[key]=$.isPlainObject(value)?$.extend(true,{},constructor[key],value):value}}};Drupal.bootstrap=Drupal.bootstrap||Bootstrap})(window._,window.jQuery,window.Drupal,window.drupalSettings);
(function($,_){var Attributes=function(attributes){this.data={};this.data['class']=[];this.merge(attributes)};Attributes.prototype.toString=function(){var output='',name,value,checkPlain=function(str){return str&&str.toString().replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;')||''},data=this.getData();for(name in data){if(!data.hasOwnProperty(name))continue;value=data[name];if(_.isFunction(value))value=value();if(_.isObject(value))value=_.values(value);if(_.isArray(value))value=value.join(' ');output+=' '+checkPlain(name)+'="'+checkPlain(value)+'"'};return output};Attributes.prototype.toPlainObject=function(){var object={},name,value,data=this.getData();for(name in data){if(!data.hasOwnProperty(name))continue;value=data[name];if(_.isFunction(value))value=value();if(_.isObject(value))value=_.values(value);if(_.isArray(value))value=value.join(' ');object[name]=value};return object};Attributes.prototype.addClass=function(value){var args=Array.prototype.slice.call(arguments);this.data['class']=this.sanitizeClasses(this.data['class'].concat(args));return this};Attributes.prototype.exists=function(name){return this.data[name]!==void(0)&&this.data[name]!==null};Attributes.prototype.get=function(name,defaultValue){if(!this.exists(name))this.data[name]=defaultValue;return this.data[name]};Attributes.prototype.getData=function(){return _.extend({},this.data)};Attributes.prototype.getClasses=function(){return this.get('class',[])};Attributes.prototype.hasClass=function(className){className=this.sanitizeClasses(Array.prototype.slice.call(arguments));var classes=this.getClasses();for(var i=0,l=className.length;i<l;i++)if(_.indexOf(classes,className[i])===-1)return false;return true};Attributes.prototype.merge=function(object,recursive){if(!object)return this;if(object instanceof $)object=object[0];if(object instanceof Node){object=Array.prototype.slice.call(object.attributes).reduce(function(attributes,attribute){attributes[attribute.name]=attribute.value;return attributes},{})}else if(object instanceof Attributes){object=object.getData()}else object=_.extend({},object);if(!$.isPlainObject(object)){setTimeout(function(){throw new Error('Passed object is not supported: '+object)});return this};if(object&&object['class']!==void(0)){this.addClass(object['class']);delete object['class']};if(recursive===void(0)||recursive){this.data=$.extend(true,{},this.data,object)}else this.data=$.extend({},this.data,object);return this};Attributes.prototype.remove=function(name){if(this.exists(name))delete this.data[name];return this};Attributes.prototype.removeClass=function(className){var remove=this.sanitizeClasses(Array.prototype.slice.apply(arguments));this.data['class']=_.without(this.getClasses(),remove);return this};Attributes.prototype.replaceClass=function(oldValue,newValue){var classes=this.getClasses(),i=_.indexOf(this.sanitizeClasses(oldValue),classes);if(i>=0){classes[i]=newValue;this.set('class',classes)};return this};Attributes.prototype.sanitizeClasses=function(classes){return _.chain(Array.prototype.slice.call(arguments)).flatten().map(function(string){return string.split(' ')}).flatten().filter().map(function(value){return Attributes.cleanClass(value)}).uniq().value()};Attributes.prototype.set=function(name,value){var obj=$.isPlainObject(name)?name:{};if(typeof name==='string')obj[name]=value;return this.merge(obj)};Attributes.cleanClass=function(identifier,filter){filter=filter||{' ':'-',_:'-','/':'-','[':'-',']':''};identifier=identifier.toLowerCase();if(filter.__===void(0))identifier=identifier.replace('__','#DOUBLE_UNDERSCORE#');identifier=identifier.replace(Object.keys(filter),Object.keys(filter).map(function(key){return filter[key]}));if(filter.__===void(0))identifier=identifier.replace('#DOUBLE_UNDERSCORE#','__');identifier=identifier.replace(/[^\u002D\u0030-\u0039\u0041-\u005A\u005F\u0061-\u007A\u00A1-\uFFFF]/g,'');identifier=identifier.replace(['/^[0-9]/','/^(-[0-9])|^(--)/'],['_','__']);return identifier};Attributes.create=function(attributes){return new Attributes(attributes)};window.Attributes=Attributes})(window.jQuery,window._);
(function($,Drupal,Bootstrap,Attributes){if(!Drupal.icon)Drupal.icon={bundles:{}};if(!Drupal.theme.icon||Drupal.theme.prototype.icon)$.extend(Drupal.theme,{icon:function(bundle,icon,attributes){if(!Drupal.icon.bundles[bundle])return'';attributes=Attributes.create(attributes).addClass('icon').set('aria-hidden','true');icon=Drupal.icon.bundles[bundle](icon,attributes);return'<span'+attributes+'></span>'}});Drupal.icon.bundles.bootstrap=function(icon,attributes){attributes.addClass(['glyphicon','glyphicon-'+icon])};$.extend(Drupal.theme,{ajaxThrobber:function(){return Drupal.theme('bootstrapIcon','refresh',{'class':['ajax-throbber','glyphicon-spin']})},button:function(attributes){attributes=Attributes.create(attributes).addClass('btn');var context=attributes.get('context','default'),label=attributes.get('value','');attributes.remove('context').remove('value');if(!attributes.hasClass(['btn-default','btn-primary','btn-success','btn-info','btn-warning','btn-danger','btn-link']))attributes.addClass('btn-'+Bootstrap.checkPlain(context));if(!attributes.exists('type'))attributes.set('type',attributes.hasClass('form-submit')?'submit':'button');return'<button'+attributes+'>'+label+'</button>'},btn:function(attributes){return Drupal.theme('button',attributes)},'btn-block':function(attributes){return Drupal.theme('button',Attributes.create(attributes).addClass('btn-block'))},'btn-lg':function(attributes){return Drupal.theme('button',Attributes.create(attributes).addClass('btn-lg'))},'btn-sm':function(attributes){return Drupal.theme('button',Attributes.create(attributes).addClass('btn-sm'))},'btn-xs':function(attributes){return Drupal.theme('button',Attributes.create(attributes).addClass('btn-xs'))},bootstrapIcon:function(name,attributes){return Drupal.theme('icon','bootstrap',name,attributes)}})})(window.jQuery,window.Drupal,window.Drupal.bootstrap,window.Attributes);
(function($,Drupal,Bootstrap,Attributes){'use strict';var $document=$(document);Bootstrap.modalFindFocusableElement=function(modal){return modal.$dialogBody.find(':input,:button,.btn').not('.visually-hidden,.sr-only')};$document.on('shown.bs.modal',function(e){var $modal=$(e.target),modal=$modal.data('bs.modal');if(modal&&modal.options.focusInput){var $focusable=Bootstrap.modalFindFocusableElement(modal);if($focusable&&$focusable[0]){var $input=$focusable.filter(':visible:first').focus();if(modal.options.selectText&&$input.is(':text'))$input[0].setSelectionRange(0,$input[0].value.length)}else if(modal.$close.is(':visible'))modal.$close.focus()}});Bootstrap.once('modal',function(settings){Bootstrap.replacePlugin('modal',function(){var BootstrapModal=this;Bootstrap.Modal=function(element,options){this.$body=$(document.body);this.$element=$(element);this.$dialog=this.$element.find('.modal-dialog');this.$header=this.$dialog.find('.modal-header');this.$title=this.$dialog.find('.modal-title');this.$close=this.$header.find('.close');this.$footer=this.$dialog.find('.modal-footer');this.$content=this.$dialog.find('.modal-content');this.$dialogBody=this.$dialog.find('.modal-body');this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;this.options=this.mapDialogOptions(options)};Bootstrap.Modal.DEFAULTS=$.extend({},BootstrapModal.DEFAULTS,{animation:!!settings.modal_animation,backdrop:settings.modal_backdrop==='static'?'static':!!settings.modal_backdrop,focusInput:!!settings.modal_focus_input,selectText:!!settings.modal_select_text,keyboard:!!settings.modal_keyboard,remote:null,show:!!settings.modal_show,size:settings.modal_size});Bootstrap.Modal.prototype=BootstrapModal.prototype;Bootstrap.Modal.prototype.destroy=function(){this.hide();Drupal.detachBehaviors(this.$element[0]);this.$element.removeData('bs.modal').remove()};Bootstrap.Modal.prototype.init=function(){if(this.options.remote)this.$content.load(this.options.remote,$.proxy(function(){this.$element.trigger('loaded.bs.modal')},this))};Bootstrap.Modal.prototype.mapDialogOptions=function(options){return options||{}};var Plugin=function(){var args=Array.prototype.slice.call(arguments),method=args[0],options=args[1]||{},relatedTarget=args[2]||null;if($.isPlainObject(method)){relatedTarget=options||null;options=method;method=null};var ret=void(0);this.each(function(){var $this=$(this),data=$this.data('bs.modal'),initialize=false,showMethods=['open','show','toggle'];if(!data&&method&&showMethods.indexOf(method)===-1)return;options=Bootstrap.normalizeObject($.extend({},Bootstrap.Modal.DEFAULTS,data&&data.options,$this.data(),options));delete options['bs.modal'];if(!data){$this.data('bs.modal',(data=new Bootstrap.Modal(this,options)));initialize=true};if(initialize||(!method&&!args.length))data.init();if(method){if(typeof data[method]==='function'){try{ret=data[method].apply(data,args.slice(1))}catch(e){Drupal.throwError(e)}}else Bootstrap.unsupported('method',method)}else{data.option(options);if(options.show&&!data.isShown)data.show(relatedTarget)}});return this.length===1&&ret!==void(0)?ret:this};Plugin.Constructor=Bootstrap.Modal;$document.off('click.bs.modal.data-api').on('click.bs.modal.data-api','[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr('href'),target=$this.attr('data-target')||(href&&href.replace(/.*(?=#[^\s]+$)/,'')),$target=$document.find(target),options=$target.data('bs.modal')?'toggle':$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());if($this.is('a'))e.preventDefault();$target.one('show.bs.modal',function(showEvent){if(showEvent.isDefaultPrevented())return;$target.one('hidden.bs.modal',function(){$this.is(':visible')&&$this.trigger('focus')})});$target.modal(options,this)});return Plugin});$.extend(Drupal.theme,{bootstrapModal:function(variables){var output='',settings=drupalSettings.bootstrap||{},defaults={attributes:{class:['modal'],tabindex:-1,role:'dialog'},body:'',closeButton:true,description:{attributes:{class:['help-block']},content:null,position:'before'},footer:'',id:'drupal-modal',size:settings.modal_size?settings.modal_size:'',title:{attributes:{class:['modal-title']},content:Drupal.t('Loading...'),html:false,tag:'h4'}};variables=$.extend(true,{},defaults,variables);var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id));if(settings.modal_animation)attributes.addClass('fade');output+='<div'+attributes+'>';output+=Drupal.theme('bootstrapModalDialog',_.omit(variables,'attributes'));output+='</div>';return output},bootstrapModalDialog:function(variables){var output='',defaults={attributes:{class:['modal-dialog'],role:'document'},id:'drupal-modal'};variables=$.extend(true,{},defaults,variables);var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id+'--dialog'));if(variables.size)attributes.addClass(variables.size);output+='<div'+attributes+'>';output+=Drupal.theme('bootstrapModalContent',_.omit(variables,'attributes'));output+='</div>';return output},bootstrapModalContent:function(variables){var output='',defaults={attributes:{class:['modal-content']},id:'drupal-modal'};variables=$.extend(true,{},defaults,variables);var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id+'--content'));output+='<div'+attributes+'>';variables=_.omit(variables,'attributes');output+=Drupal.theme('bootstrapModalHeader',variables);output+=Drupal.theme('bootstrapModalBody',variables);output+=Drupal.theme('bootstrapModalFooter',variables);output+='</div>';return output},bootstrapModalBody:function(variables){var output='',defaults={attributes:{class:['modal-body']},body:'',description:{attributes:{class:['help-block']},content:null,position:'before'},id:'drupal-modal'};variables=$.extend(true,{},defaults,variables);var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id+'--body'));output+='<div'+attributes+'>';if(typeof variables.description==='string')variables.description=$.extend({},defaults.description,{content:variables.description});var description=variables.description;description.attributes=Attributes.create(defaults.description.attributes).merge(description.attributes);if(description.content&&description.position==='invisible')description.attributes.addClass('sr-only');if(description.content&&description.position==='before')output+='<p'+description.attributes+'>'+description.content+'</p>';output+=variables.body;if(description.content&&(description.position==='after'||description.position==='invisible'))output+='<p'+description.attributes+'>'+description.content+'</p>';output+='</div>';return output},bootstrapModalClose:function(variables){var defaults={attributes:{'aria-label':Drupal.t('Close'),class:['close'],'data-dismiss':'modal',type:'button'}};variables=$.extend(true,{},defaults,variables);var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);return'<button'+attributes+'><span aria-hidden="true">&times;</span></button>'},bootstrapModalFooter:function(variables,force){var output='',defaults={attributes:{class:['modal-footer']},footer:'',id:'drupal-modal'};variables=$.extend(true,{},defaults,variables);if(force||variables.footer){var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id+'--footer'));output+='<div'+attributes+'>';output+=variables.footer;output+='</div>'};return output},bootstrapModalHeader:function(variables){var output='',defaults={attributes:{class:['modal-header']},closeButton:true,id:'drupal-modal',title:{attributes:{class:['modal-title']},content:Drupal.t('Loading...'),html:false,tag:'h4'}};variables=$.extend(true,{},defaults,variables);if(typeof variables.title==='string')variables.title=$.extend({},defaults.title,{content:variables.title});var title=Drupal.theme('bootstrapModalTitle',variables.title);if(title){var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id+'--header'));output+='<div'+attributes+'>';if(variables.closeButton)output+=Drupal.theme('bootstrapModalClose',_.omit(variables,'attributes'));output+=title;output+='</div>'};return output},bootstrapModalTitle:function(variables){var output='',defaults={attributes:{class:['modal-title']},closeButton:true,id:'drupal-modal',content:Drupal.t('Loading...'),html:false,tag:'h4'};if(typeof variables==='string')variables=$.extend({},defaults,{content:title});variables=$.extend(true,{},defaults,variables);var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id+'--title'));output+='<'+Drupal.checkPlain(variables.tag)+Attributes.create(defaults.attributes).merge(variables.attributes)+'>';if(variables.closeButton)output+=Drupal.theme('bootstrapModalClose',_.omit(variables,'attributes'));output+=(variables.html?variables.content:Drupal.checkPlain(variables.content));output+='</'+Drupal.checkPlain(variables.tag)+'>';return output}})})})(window.jQuery,window.Drupal,window.Drupal.bootstrap,window.Attributes);
(function($,Drupal,Bootstrap,Attributes){Bootstrap.Dialog=Bootstrap.Dialog||{};Bootstrap.Dialog.handlers={};Bootstrap.Dialog.Handler=function(type,data){this.ctor=$.fn.modal;this.extend=null;this.plugin='modal';this.prefix='modal';this.themeHooks={modal:'bootstrapModal',dialog:'bootstrapModalDialog',header:'bootstrapModalHeader',title:'bootstrapModalTitle',close:'bootstrapModalClose',content:'bootstrapModalContent',body:'bootstrapModalBody',footer:'bootstrapModalFooter'};this.type=type;this.selectors={dialog:'.modal-dialog',header:'.modal-header',title:'.modal-title',close:'.close',content:'.modal-content',body:'.modal-body',footer:'.modal-footer',buttons:'.modal-buttons'};$.extend(this,data);if(this.extend)Bootstrap.extend(this.plugin,this.extend)};Bootstrap.Dialog.Handler.get=function(type){if(type instanceof $)type=type[0];if(type instanceof HTMLElement)type=type.dialogType;if(!type)type='modal';if(!Bootstrap.Dialog.handlers[type])Bootstrap.Dialog.handlers[type]=new Bootstrap.Dialog.Handler();return Bootstrap.Dialog.handlers[type]};Bootstrap.Dialog.Handler.register=function(type,data){Bootstrap.Dialog.handlers[type]=new Bootstrap.Dialog.Handler(type,data)};Bootstrap.Dialog.Handler.prototype.invoke=function(context){var args=Array.prototype.slice.call(arguments);return this.ctor.apply(context,args.slice(1))};Bootstrap.Dialog.Handler.prototype.theme=function(hook){var args=Array.prototype.slice.call(arguments);return $(Drupal.theme.apply(Drupal.theme,[this.themeHooks[hook]].concat(args.slice(1))))};Bootstrap.Dialog.Handler.prototype.ensureModalStructure=function(element,options){var $element=$(element);if($element.is('[data-drupal-theme="'+this.themeHooks.modal+'"]'))return;var attributes=Attributes.create(element).remove('style').set('data-drupal-theme',this.themeHooks.modal);if(options.$trigger&&options.$trigger[0]){var trigger=options.$trigger[0],data={};for(var i=0,l=trigger.attributes.length;i<l;i++){var name=trigger.attributes[i].name;if(name&&name.substring(0,5)==='data-')data[name]=trigger.getAttribute(name)};attributes.merge(data)};options=$.extend(true,{},options,{attributes:attributes});var $modal=this.theme('modal',options),$body=$element.find(this.selectors.body),$existing=$body[0]?$body.contents():$element.contents();$element.attr(Attributes.create($modal).toPlainObject());$element.append($modal.html());$element.find(this.selectors.body).append($existing)}})(jQuery,Drupal,Drupal.bootstrap,Attributes);
(function($,Drupal,drupalSettings){drupalSettings.dialog={autoOpen:true,dialogClass:'',buttonClass:'button',buttonPrimaryClass:'button--primary',close:function close(event){Drupal.dialog(event.target).close();Drupal.detachBehaviors(event.target,null,'unload')}};Drupal.dialog=function(element,options){var undef,$element=$(element),dialog={open:false,returnValue:undef}
function openDialog(settings){settings=$.extend({},drupalSettings.dialog,options,settings);$(window).trigger('dialog:beforecreate',[dialog,$element,settings]);$element.dialog(settings);dialog.open=true;$(window).trigger('dialog:aftercreate',[dialog,$element,settings])}
function closeDialog(value){$(window).trigger('dialog:beforeclose',[dialog,$element]);$element.dialog('close');dialog.returnValue=value;dialog.open=false;$(window).trigger('dialog:afterclose',[dialog,$element])};dialog.show=function(){openDialog({modal:false})};dialog.showModal=function(){openDialog({modal:true})};dialog.close=closeDialog;return dialog}})(jQuery,Drupal,drupalSettings);
(function($,Drupal,drupalSettings,debounce,displace){drupalSettings.dialog=$.extend({autoResize:true,maxHeight:'95%'},drupalSettings.dialog)
function resetPosition(options){var offsets=displace.offsets,left=offsets.left-offsets.right,top=offsets.top-offsets.bottom,leftString="".concat((left>0?'+':'-')+Math.abs(Math.round(left/2)),"px"),topString="".concat((top>0?'+':'-')+Math.abs(Math.round(top/2)),"px");options.position={my:"center".concat(left!==0?leftString:''," center").concat(top!==0?topString:''),of:window};return options}
function resetSize(event){var positionOptions=['width','height','minWidth','minHeight','maxHeight','maxWidth','position'],adjustedOptions={},windowHeight=$(window).height(),option,optionValue,adjustedValue;for(var n=0;n<positionOptions.length;n++){option=positionOptions[n];optionValue=event.data.settings[option];if(optionValue)if(typeof optionValue==='string'&&/%$/.test(optionValue)&&/height/i.test(option)){windowHeight-=displace.offsets.top+displace.offsets.bottom;adjustedValue=parseInt(0.01*parseInt(optionValue,10)*windowHeight,10);if(option==='height'&&event.data.$element.parent().outerHeight()<adjustedValue)adjustedValue='auto';adjustedOptions[option]=adjustedValue}};if(!event.data.settings.modal)adjustedOptions=resetPosition(adjustedOptions);event.data.$element.dialog('option',adjustedOptions).trigger('dialogContentResize')};$(window).on({'dialog:aftercreate':function dialogAftercreate(event,dialog,$element,settings){var autoResize=debounce(resetSize,20),eventData={settings:settings,$element:$element};if(settings.autoResize===true||settings.autoResize==='true'){$element.dialog('option',{resizable:false,draggable:false}).dialog('widget').css('position','fixed');$(window).on('resize.dialogResize scroll.dialogResize',eventData,autoResize).trigger('resize.dialogResize');$(document).on('drupalViewportOffsetChange.dialogResize',eventData,autoResize)}},'dialog:beforeclose':function dialogBeforeclose(event,dialog,$element){$(window).off('.dialogResize');$(document).off('.dialogResize')}})})(jQuery,Drupal,drupalSettings,Drupal.debounce,Drupal.displace);
(function($,_ref){var tabbable=_ref.tabbable,isTabbable=_ref.isTabbable;$.widget('ui.dialog',$.ui.dialog,{options:{buttonClass:'button',buttonPrimaryClass:'button--primary'},_createButtons:function _createButtons(){var opts=this.options,primaryIndex,index,il=opts.buttons.length;for(index=0;index<il;index++)if(opts.buttons[index].primary&&opts.buttons[index].primary===true){primaryIndex=index;delete opts.buttons[index].primary;break};this._super();var $buttons=this.uiButtonSet.children().addClass(opts.buttonClass);if(typeof primaryIndex!=='undefined')$buttons.eq(index).addClass(opts.buttonPrimaryClass)},_focusTabbable:function _focusTabbable(){var hasFocus=this._focusedElement?this._focusedElement.get(0):null;if(!hasFocus)hasFocus=this.element.find('[autofocus]').get(0);if(!hasFocus){var $elements=[this.element,this.uiDialogButtonPane];for(var i=0;i<$elements.length;i++){var element=$elements[i].get(0);if(element){var elementTabbable=tabbable(element);hasFocus=elementTabbable.length?elementTabbable[0]:null};if(hasFocus)break}};if(!hasFocus){var closeBtn=this.uiDialogTitlebarClose.get(0);hasFocus=closeBtn&&isTabbable(closeBtn)?closeBtn:null};if(!hasFocus)hasFocus=this.uiDialog.get(0);$(hasFocus).eq(0).trigger('focus')}})})(jQuery,window.tabbable);
(function($,Drupal,drupalSettings){'use strict';Drupal.behaviors.externalLinkPopup={attach:function(context){var self=this,settings=drupalSettings.pf_external_link_popup;if(!settings.popups||!settings.popups.length||!$('body',context).once('external-link-popup').length)return;var whitelist=settings.whitelist?settings.whitelist.split(/\s*,\s*|\s+/):[],current=window.location.host||window.location.hostname,popup;whitelist.unshift(current);if(current.substr(0,4)==='www.'){whitelist.push(current.substr(4))}else whitelist.push('www.'+current);$('body',context).on('click','a:not(.external-link-popup-disabled)',function(e){var element=$(this).get(0),popupId=element.getAttribute('data-external-link-popup-id'),domain=self.getDomain(element.getAttribute('href'));for(var i=0;i<settings.popups.length;i++){popup=settings.popups[i];if(settings.popups[i].otherlanguages&&domain==document.location.host){var splitted_link=element.getAttribute('href').split('/'),splitted_current_path=document.location.href.split('/'),allow_for=settings.popups[i].prefixlanguages.split(',');if(allow_for.indexOf(splitted_current_path[3])==-1){continue}else if(splitted_link[3]==splitted_current_path[3])continue}else{if(!popupId&&(!domain||self.inDomain(domain,whitelist)))return;if(!popupId&&popup.domains!=='*'&&!self.inDomain(domain,popup.domains.split(/\s*,\s*|\s+/)))continue;if(popupId&&popupId!==popup.id)continue};e.preventDefault();return self.openDialog(element,popup,'external-link-popup-id-'+popup.id.replace('_','-'))}})},inDomain:function(domain,domains){if(typeof domain!=='string')return false;for(var i in domains)if(domain.toLowerCase()===domains[i].toLowerCase()||domain.match(new RegExp('\\.'+this.pregEscape(domains[i])+'$','i')))return true;return false},getDomain:function(url){if(typeof url!=='string')return null;var matches=url.match(/\/\/([^/]+)\/?/);return matches&&matches[1]},pregEscape:function(str){return(str+'').replace(new RegExp('[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]','g'),'\\$&')},openDialog:function(element,settings,className){var dialog,body=document.createElement('div'),content=document.createElement('div'),options={title:settings.title,width:drupalSettings.pf_external_link_popup.width||'85%',buttons:[{text:settings.labelyes,click:function(){$(this).dialog('close');var target=window.open(element.href,element.target||'_self');target.focus()}}],create:function(){var $widget=$(this).parent();$widget.addClass('external-link-popup').addClass(className);if(!settings.close)$widget.find('.ui-dialog-titlebar-close').remove();if(!settings.title)$widget.find('.ui-dialog-titlebar').remove()},close:function(){var $element=$(this);if(dialog&&dialog.open)dialog.close();$element.dialog('destroy')}};if(settings.labelno)options.buttons.push({text:settings.labelno,click:function(){$(this).dialog('close')}});var url=$(element).attr('href'),text=$(element).text(),bodyHtml=settings.body.replace('[link:url]',this.htmlEncode(url)).replace('[link:text]',this.htmlEncode(text));content.className='external-link-popup-content';body.innerHTML=bodyHtml;body.className='external-link-popup-body';content.appendChild(body);dialog=Drupal.dialog(content,options);dialog.showModal()},htmlEncode:function(value){return $('<div/>').text(value).html()}}})(jQuery,Drupal,drupalSettings);
(function($,Drupal){var pushToDatalayer=function(e,tagName){e.preventDefault();var link=e.target.closest(tagName),event="eventGA",categoryGA=link.dataset.categoryga?link.dataset.categoryga:"",actionGA=link.dataset.actionga?link.dataset.actionga:"",labelGA=link.dataset.labelga?link.dataset.labelga:"",valueGA="0",nonInteraction="false";if(typeof dataLayer!=='undefined')dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction})};jQuery(document).ready(function(){var event="eventGA",categoryGA="",actionGA="",labelGA="",valueGA="0",nonInteraction="false";$(' .video-wrapper , .paragraph--type--segment-video-text , .icon-player').click(function(){var videoname=$(this).find('img').attr('alt'),push=function(videoname){if(typeof dataLayer!=='undefined')dataLayer.push({event:"eventGA",categoryGA:"Youtube video",actionGA:"Play youtube video",labelGA:videoname,valueGA:"0",nonInteraction:"false"})};if(!$(this).hasClass('pushed')&&$(this).hasClass('icon-player')){push(videoname);$(this).addClass('pushed')};if(!jQuery(this).hasClass('pushed')&&$(this).find('.icon-player').length>0){push(videoname);$(this).addClass('pushed')}});$(".gtm:not('nav') a").on('click',function(){if($(this).parents('.gtm').first().data("categoryga"))categoryGA=$(this).parents('.gtm').first().data("categoryga");if($(this).parents('.gtm').first().data("actionga"))actionGA=$(this).parents('.gtm').first().data("actionga");if($(this).parents('.gtm').first().data("labelga"))labelGA=$(this).parents('.gtm').first().data("labelga");if(typeof dataLayer!=='undefined')dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction})});$("a.gtm").on('click',function(){if($(this).data("categoryga"))categoryGA=$(this).data("categoryga");if($(this).data("actionga"))actionGA=$(this).data("actionga");if($(this).data("labelga"))labelGA=$(this).data("labelga");if(typeof dataLayer!=='undefined')dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction})});$(".path-frontpage #actuality  .views-row article a").on('click',function(){if($(this).data("categoryga"))categoryGA=$(this).data("categoryga");if($(this).data("actionga"))actionGA=$(this).data("actionga");if($(this).data("labelga"))labelGA=$(this).data("labelga");if(typeof dataLayer!=='undefined')dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction})});var menuMap={main:'Menu','usefull-menu':'Useful Links',footer:'Others Links'};$("nav.gtm ul.menu li a").on('click',function(){if($(this).parents('nav.gtm').first().data("categoryga"))categoryGA=$(this).parents('nav.gtm').first().data("categoryga");if($(this).parents('ul.menu').first().data("menu")){var menuName=$(this).parents('ul.menu').first().data("menu");actionGA=menuMap[menuName]};if($(this).text())labelGA=$(this).text();if(typeof dataLayer!=='undefined')dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction})});$("header #search-form").submit(function(){categoryGA="Header";actionGA="Search Terms";labelGA=$(this).serializeArray()[0].value;if(typeof dataLayer!=='undefined')dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction})});$("#pf-rh-search-form").submit(function(){var bodyClasses=$('body').attr("class"),contractType=$('#pf-rh-search-form ul[data-drupal-selector="edit-field-offer-contract-type"]').siblings('a').text().trim();if(bodyClasses.indexOf("page-node-type-shp-talents")>0){categoryGA="Talent page";actionGA="Looking for "+contractType;labelGA=$('#pf-rh-search-form ul[data-drupal-selector="edit-field-offer-activity"]').siblings('a').text().trim()}else if(bodyClasses.indexOf("page-node-type-homepage")>0){categoryGA="Home page";actionGA="Discover our offers";labelGA=contractType}else return true;if(typeof dataLayer!=='undefined')dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction})});$(document).ajaxSuccess(function(event,request,settings,data){if(settings.extraData.view_name=="pf_rh_job_offer_search"){console.log(settings,data);var bodyClasses=$('body').attr("class"),contractType=$('#pf-rh-search-form ul[data-drupal-selector="edit-field-offer-contract-type"]').siblings('a').text().trim();if(bodyClasses.indexOf(" path-talents")>0){categoryGA="Our offers";actionGA="Search Term";labelGA=$('.search-box input').val()}else return true;if(typeof dataLayer!=='undefined')dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction})}});$(document).ajaxComplete(function(){$("#views-exposed-form-pf-news-list-block-news .form-item-field-news-tags-target-id-1 .select-wrapper ul li span").on('click',function(){categoryGA="Mediaroom page";actionGA="Filters_Category";labelGA=$(this).text();if(typeof dataLayer!=='undefined')dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction})})});$(".view-display-id-date_filter .views-field-field-year .field-content span").on('click',function(){categoryGA="Our history";actionGA="Date clicked";labelGA=$(this).text();if(typeof dataLayer!=='undefined')dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction})});document.body.addEventListener('sqli_cookie_cnf__save',function(){var userSettings=window.cookie_cnf_api.loadUserConfig(),gtmData={};userSettings.forEach(function(data){var status='opt_in';if(data.is_blocked)status='opt_out';gtmData['GDPR '+data.id]=data.id.substr(0,3)+'_'+status});if(typeof dataLayer!=='undefined')dataLayer.push({'User GDPR':[gtmData]})})
function shareEventHandler(evt){switch(evt.type){case"addthis.menu.share":var url=evt.data.url.split('/'),title=$('.region.region-content h1').first().text();if($('article.job-offer').length>0){categoryGA='Job offer';actionGA=evt.data.service;labelGA=title}else if($('article.news').length>0){categoryGA="Articles";actionGA=evt.data.service;labelGA=title}else if($('article.press-release').length>0){categoryGA='Press Release';actionGA=evt.data.service;labelGA=title}else{categoryGA=url[url.length-2];actionGA=evt.data.service;labelGA=title};if(typeof dataLayer!=='undefined')dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction});break};evt.preventDefault();document.location.reload()};setTimeout(function(){addthis.addEventListener('addthis.menu.share',shareEventHandler)},1e3);$('#sqli-contact-form').submit(function(){var topicTid=undefined,gtmContact='',formData=$(this).serializeArray();for(var i=0;i<formData.length;i++)if(formData[i].name=="sqli_contact_topic"){topicTid=formData[i].value;continue};gtmContact=$('#edit-sqli-contact-topic option[value="'+topicTid+'"]').text()+' : '+$('#edit-sqli-contact-subjet').val();sessionStorage.setItem('gtm_contact_topic',gtmContact)});setTimeout(function(){if($('#sqli-contact-form').length>0){if(sessionStorage.getItem('gtm_contact_topic')!=null&&$('.form-item--error-message').length==0&&$('.contact-form-errors-wrapper p').first().text()==""){categoryGA="Contact page";actionGA="Successfull contact send";labelGA=sessionStorage.getItem('gtm_contact_topic');if(typeof dataLayer!=='undefined')dataLayer.push({event:event,categoryGA:categoryGA,actionGA:actionGA,labelGA:labelGA,valueGA:valueGA,nonInteraction:nonInteraction});sessionStorage.removeItem('gtm_contact_topic')}}else if(sessionStorage.getItem('gtm_contact_topic')!=null)sessionStorage.removeItem('gtm_contact_topic')},5e3)})})(jQuery,Drupal);
/*! js-cookie v3.0.1 | MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,function(){var n=e.Cookies,o=e.Cookies=t();o.noConflict=function(){return e.Cookies=n,o}}())}(this,(function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}return function t(n,o){function r(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+n.write(r,t)+c}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],o={},r=0;r<t.length;r++){var i=t[r].split("="),c=i.slice(1).join("=");try{var u=decodeURIComponent(i[0]);if(o[u]=n.read(c,u),e===u)break}catch(e){}}return e?o[e]:o}},remove:function(t,n){r(t,"",e({},n,{expires:-1}))},withAttributes:function(n){return t(this.converter,e({},this.attributes,n))},withConverter:function(n){return t(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}));
;
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)};return keys}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})};return target}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else obj[key]=value;return obj};(function($,Drupal,cookies){var deprecatedMessageSuffix="is deprecated in Drupal 9.0.0 and will be removed in Drupal 10.0.0. Use the core/js-cookie library instead. See https://www.drupal.org/node/3104677",isFunction=function isFunction(obj){return Object.prototype.toString.call(obj)==='[object Function]'},parseCookieValue=function parseCookieValue(value,parseJson){if(value.indexOf('"')===0)value=value.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');try{value=decodeURIComponent(value.replace(/\+/g,' '));return parseJson?JSON.parse(value):value}catch(e){}},reader=function reader(cookieValue,cookieName,converter,readUnsanitized,parseJson){var value=readUnsanitized?cookieValue:parseCookieValue(cookieValue,parseJson);if(converter!==undefined&&isFunction(converter))return converter(value,cookieName);return value};$.cookie=function(key){var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined,options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;Drupal.deprecationError({message:"jQuery.cookie() ".concat(deprecatedMessageSuffix)});if(value!==undefined&&!isFunction(value)){var attributes=_objectSpread(_objectSpread({},$.cookie.defaults),options);if(typeof attributes.expires==='string'&&attributes.expires!=='')attributes.expires=new Date(attributes.expires);var cookieSetter=cookies.withConverter({write:function write(cookieValue){return encodeURIComponent(cookieValue)}});value=$.cookie.json&&!$.cookie.raw?JSON.stringify(value):String(value);return cookieSetter.set(key,value,attributes)};var userProvidedConverter=value,cookiesShim=cookies.withConverter({read:function read(cookieValue,cookieName){return reader(cookieValue,cookieName,userProvidedConverter,$.cookie.raw,$.cookie.json)}});if(key!==undefined)return cookiesShim.get(key);var results=cookiesShim.get();Object.keys(results).forEach(function(resultKey){if(results[resultKey]===undefined)delete results[resultKey]});return results};$.cookie.defaults=_objectSpread({path:''},cookies.defaults);$.cookie.json=false;$.cookie.raw=false;$.removeCookie=function(key,options){Drupal.deprecationError({message:"jQuery.removeCookie() ".concat(deprecatedMessageSuffix)});cookies.remove(key,_objectSpread(_objectSpread({},$.cookie.defaults),options));return!cookies.get(key)}})(jQuery,Drupal,window.Cookies);
/**
 * @file
 */
(function ($, Drupal) {
  'use strict';
  Drupal.behaviors.FavoritesJobOffers = {
    attach: function (context) {
      let cookie = $.cookie('Drupal.visitor.pf_rh_favorites');
      if (!cookie) {
        $('.js-favorites-count').html('0');
        return;
      }

      let favorites = JSON.parse(cookie);
      let favoritesNumber = 0;
      if (favorites !== null) {
        // By pass cache to set favorites buttons active/inactive depending on
        // cookie.
        for (let i in favorites) {
          favoritesNumber++;
          $('.job-offer__add-to-favorite[data-nid="' + favorites[i] + '"]').addClass('active');
        }
      }

      // Update top counter.
      $('.js-favorites-count').html(favoritesNumber);

      // Async load of favorite offers.
      $('.js-favorites-offer-wrapper').once('list-loaded').each(function () {
        Drupal.ajax({
          url: '/pf_rh/favorites',
          base: false,
          element: false,
          progress: false
        }).execute();
      });
    }
  };

})(jQuery, Drupal);;
(function($,Drupal){'use strict';Drupal.behaviors.simplePopupBlocks={attach:function(context,settings){var popup_settings=drupalSettings.simple_popup_blocks.settings,_html=document.documentElement,windowWidth=$(window).width();$.each(popup_settings,function(index,values){if(windowWidth<values.trigger_width)return null;var modal_class='',block_id=values.identifier,visit_counts_arr=values.visit_counts.split(','),allow_cookie=true,read_cookie='',cookie_val=1,cookie_days=values.cookie_expiry||100,match=0,css_identity='',spb_popup_id='',modal_close_class='',modal_minimize_class='',modal_minimized_class='',layout_class='',class_exists=false,delays='',browser_close_trigger=true,use_time_frequency=values.use_time_frequency,time_frequency=values.time_frequency,time_frequency_cookie=0,next_popup=0,current_timestamp=0,show_minimized_button=values.show_minimized_button,show_model=true;if(visit_counts_arr.length==1&&visit_counts_arr[0]==0&&use_time_frequency==0)allow_cookie=false;var element=document.getElementById(block_id);if(typeof element!='undefined'&&element!=null)if(allow_cookie==true)if(use_time_frequency==0){read_cookie=readCookie('spb_'+block_id);if(read_cookie){cookie_val=+read_cookie+1;createCookie('spb_'+block_id,cookie_val,100)}else createCookie('spb_'+block_id,cookie_val,100);cookie_val=cookie_val.toString();match=$.inArray(cookie_val,visit_counts_arr);if(match===-1)show_model=false}else{time_frequency_cookie=readCookie('spb_time'+block_id);current_timestamp=Math.floor(Date.now()/1e3);next_popup=current_timestamp+parseInt(time_frequency,10);if(time_frequency_cookie){if(current_timestamp>=time_frequency_cookie){match=1}else if(next_popup<=time_frequency_cookie){match=1}else{match=-1;show_model=false};if(match===1)createCookie('spb_time'+block_id,next_popup,100)}else createCookie('spb_time'+block_id,next_popup,100)};css_identity='.';if(values.css_selector==1)css_identity='#';spb_popup_id='spb-'+block_id;modal_class=block_id+'-modal';modal_close_class=block_id+'-modal-close';modal_minimize_class=block_id+'-modal-minimize';modal_minimized_class=block_id+'-modal-minimized';layout_class='.'+modal_class+' .spb-popup-main-wrapper';$(css_identity+block_id).once().wrap($('<div class="'+modal_class+'"></div>'));$('.'+modal_class).once().hide();if($(css_identity+block_id).closest('.spb-popup-main-wrapper').length)return;$(css_identity+block_id).wrap($('<div class="spb-popup-main-wrapper"></div>'));$('.'+modal_class).wrap('<div id="'+spb_popup_id+'" class="simple-popup-blocks-global"></div>');$(css_identity+block_id).before($('<div class="spb-controls"></div>'));class_exists=$('#'+spb_popup_id).hasClass('simple-popup-blocks-global');if(!class_exists)return true;if(values.minimize==="1"){$("#"+spb_popup_id+" .spb-controls").prepend($('<span class="'+modal_minimize_class+' spb_minimize">-</span>'));$('.'+modal_class).before($('<span class="'+modal_minimized_class+' spb_minimized"></span>'))};if(values.close==1)$("#"+spb_popup_id+" .spb-controls").prepend($('<span class="'+modal_close_class+' spb_close">&times;</span>'));if(values.overlay==1)$('.'+modal_class).addClass('spb_overlay');switch(values.layout){case'0':$(layout_class).addClass('spb_top_left');$(layout_class).css({width:values.width});break;case'1':$(layout_class).addClass('spb_top_right');$(layout_class).css({width:values.width});break;case'2':$(layout_class).addClass('spb_bottom_left');$(layout_class).css({width:values.width});break;case'3':$(layout_class).addClass('spb_bottom_right');$(layout_class).css({width:values.width});break;case'4':$(layout_class).addClass('spb_center');$(layout_class).css({width:values.width,'margin-left':-values.width/2});break;case'5':$(layout_class).addClass('spb_top_center');$(layout_class).css({width:values.width});break;case'6':$(layout_class).addClass('spb_top_bar');$(layout_class).css({});break;case'7':$(layout_class).addClass('spb_bottom_bar');$(layout_class).css({});break;case'8':$(layout_class).addClass('spb_left_bar');$(layout_class).css({width:values.width});break;case'9':$(layout_class).addClass('spb_right_bar');$(layout_class).css({width:values.width});break};if(show_model===true)if(values.trigger_method==0&&values.delay>0){delays=values.delay*1e3;$('.'+modal_class).delay(delays).fadeIn('slow');if(values.overlay==1)setTimeout(stopTheScroll,delays)}else if(values.trigger_method==0){$('.'+modal_class).show();$(css_identity+block_id).show();if(values.overlay==1)stopTheScroll()}else if(values.trigger_method==1){$(document).on('click',values.trigger_selector,function(e){$('.'+modal_class).show();$(css_identity+block_id).show();if(values.overlay==1)stopTheScroll();return false})}else if(values.trigger_method==2)$(_html).mouseleave(function(e){if(e.clientY>20)return;if(!browser_close_trigger)return;browser_close_trigger=false;$('.'+modal_class).show();$(css_identity+block_id).show();if(values.overlay==1)stopTheScroll()});$('.'+modal_close_class).click(function(){$('.'+modal_class).hide();startTheScroll()});$('.'+modal_minimize_class).click(function(){$('.'+modal_class).hide();startTheScroll();$('.'+modal_minimized_class).show()});$('.'+modal_minimized_class).click(function(){$('.'+modal_class).show();$(css_identity+block_id).show();if(values.overlay==1)stopTheScroll();if(show_minimized_button==0)$('.'+modal_minimized_class).hide()});if(values.enable_escape==1)$(document).keyup(function(e){if(e.keyCode==27){$('.'+modal_class).hide();startTheScroll();$('.'+modal_minimized_class).show()}});if(show_minimized_button==0)$('.'+modal_minimized_class).hide()})}}
function stopTheScroll(){$('body').css({overflow:'hidden'});$('input:text').focus()}
function startTheScroll(){$('body').css({overflow:''})}
function createCookie(name,value,days){if(days>0){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1e3));var expires='; expires='+date.toGMTString()}else var expires='';document.cookie=name+'='+value+expires+'; path=/'}
function readCookie(name){var nameEQ=name+'=',ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)};return null}})(jQuery,Drupal);
(function($,Drupal){Drupal.theme.progressBar=function(id){return"<div id=\"".concat(id,"\" class=\"progress\" aria-live=\"polite\">")+'<div class="progress__label">&nbsp;</div><div class="progress__track"><div class="progress__bar"></div></div><div class="progress__percentage"></div><div class="progress__description">&nbsp;</div></div>'};Drupal.ProgressBar=function(id,updateCallback,method,errorCallback){this.id=id;this.method=method||'GET';this.updateCallback=updateCallback;this.errorCallback=errorCallback;this.element=$(Drupal.theme('progressBar',id))};$.extend(Drupal.ProgressBar.prototype,{setProgress:function setProgress(percentage,message,label){if(percentage>=0&&percentage<=100){$(this.element).find('div.progress__bar').css('width',"".concat(percentage,"%"));$(this.element).find('div.progress__percentage').html("".concat(percentage,"%"))};$('div.progress__description',this.element).html(message);$('div.progress__label',this.element).html(label);if(this.updateCallback)this.updateCallback(percentage,message,this)},startMonitoring:function startMonitoring(uri,delay){this.delay=delay;this.uri=uri;this.sendPing()},stopMonitoring:function stopMonitoring(){clearTimeout(this.timer);this.uri=null},sendPing:function sendPing(){if(this.timer)clearTimeout(this.timer);if(this.uri){var pb=this,uri=this.uri;if(uri.indexOf('?')===-1){uri+='?'}else uri+='&';uri+='_format=json';$.ajax({type:this.method,url:uri,data:'',dataType:'json',success:function success(progress){if(progress.status===0){pb.displayError(progress.data);return};pb.setProgress(progress.percentage,progress.message,progress.label);pb.timer=setTimeout(function(){pb.sendPing()},pb.delay)},error:function error(xmlhttp){var e=new Drupal.AjaxError(xmlhttp,pb.uri);pb.displayError("<pre>".concat(e.message,"</pre>"))}})}},displayError:function displayError(string){var error=$('<div class="messages messages--error"></div>').html(string);$(this.element).before(error).hide();if(this.errorCallback)this.errorCallback(this)}})})(jQuery,Drupal);
(function($,Drupal){'use strict';Drupal.theme.progressBar=function(id){return'<div class="progress-wrapper" aria-live="polite"><div class="message"></div><div id ="'+id+'" class="progress progress-striped active"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><span class="percentage"></span></div></div><div class="progress-label"></div></div>'};$.extend(Drupal.ProgressBar.prototype,{setProgress:function(percentage,message,label){if(percentage>=0&&percentage<=100){$(this.element).find('.progress-bar').css('width',percentage+'%').attr('aria-valuenow',percentage);$(this.element).find('.percentage').html(percentage+'%')};if(message){message=message.replace(/<br\/>&nbsp;|\s*$/,'');$('.message',this.element).html(message)};if(label)$('.progress-label',this.element).html(label);if(this.updateCallback)this.updateCallback(percentage,message,this)},displayError:function(string){var error=$('<div class="alert alert-block alert-error"><button class="close" data-dismiss="alert">&times;</button><h4>'+Drupal.t('Error message')+'</h4></div>').append(string);$(this.element).before(error).hide();if(this.errorCallback)this.errorCallback(this)}})})(jQuery,Drupal);
(function(Drupal){Drupal.behaviors.responsiveImageAJAX={attach:function attach(){if(window.picturefill)window.picturefill()}}})(Drupal);
function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}
function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}
function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}
function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}
function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}
function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2};(function($,window,Drupal,drupalSettings,_ref){var isFocusable=_ref.isFocusable,tabbable=_ref.tabbable;Drupal.behaviors.AJAX={attach:function attach(context,settings){function loadAjaxBehavior(base){var elementSettings=settings.ajax[base];if(typeof elementSettings.selector==='undefined')elementSettings.selector="#".concat(base);once('drupal-ajax',$(elementSettings.selector)).forEach(function(el){elementSettings.element=el;elementSettings.base=base;Drupal.ajax(elementSettings)})};Object.keys(settings.ajax||{}).forEach(function(base){return loadAjaxBehavior(base)});Drupal.ajax.bindAjaxLinks(document.body);once('ajax','.use-ajax-submit').forEach(function(el){var elementSettings={};elementSettings.url=$(el.form).attr('action');elementSettings.setClick=true;elementSettings.event='click';elementSettings.progress={type:'throbber'};elementSettings.base=el.id;elementSettings.element=el;Drupal.ajax(elementSettings)})},detach:function detach(context,settings,trigger){if(trigger==='unload')Drupal.ajax.expired().forEach(function(instance){Drupal.ajax.instances[instance.instanceIndex]=null})}};Drupal.AjaxError=function(xmlhttp,uri,customMessage){var statusCode,statusText,responseText;if(xmlhttp.status){statusCode="\n".concat(Drupal.t('An AJAX HTTP error occurred.'),"\n").concat(Drupal.t('HTTP Result Code: !status',{'!status':xmlhttp.status}))}else statusCode="\n".concat(Drupal.t('An AJAX HTTP request terminated abnormally.'));statusCode+="\n".concat(Drupal.t('Debugging information follows.'));var pathText="\n".concat(Drupal.t('Path: !uri',{'!uri':uri}));statusText='';try{statusText="\n".concat(Drupal.t('StatusText: !statusText',{'!statusText':xmlhttp.statusText.trim()}))}catch(e){};responseText='';try{responseText="\n".concat(Drupal.t('ResponseText: !responseText',{'!responseText':xmlhttp.responseText.trim()}))}catch(e){};responseText=responseText.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,'');responseText=responseText.replace(/[\n]+\s+/g,'\n');var readyStateText=xmlhttp.status===0?"\n".concat(Drupal.t('ReadyState: !readyState',{'!readyState':xmlhttp.readyState})):'';customMessage=customMessage?"\n".concat(Drupal.t('CustomMessage: !customMessage',{'!customMessage':customMessage})):'';this.message=statusCode+pathText+statusText+customMessage+responseText+readyStateText;this.name='AjaxError'};Drupal.AjaxError.prototype=new Error();Drupal.AjaxError.prototype.constructor=Drupal.AjaxError;Drupal.ajax=function(settings){if(arguments.length!==1)throw new Error('Drupal.ajax() function must be called with one configuration object only');var base=settings.base||false,element=settings.element||false;delete settings.base;delete settings.element;if(!settings.progress&&!element)settings.progress=false;var ajax=new Drupal.Ajax(base,element,settings);ajax.instanceIndex=Drupal.ajax.instances.length;Drupal.ajax.instances.push(ajax);return ajax};Drupal.ajax.instances=[];Drupal.ajax.expired=function(){return Drupal.ajax.instances.filter(function(instance){return instance&&instance.element!==false&&!document.body.contains(instance.element)})};Drupal.ajax.bindAjaxLinks=function(element){once('ajax','.use-ajax',element).forEach(function(ajaxLink){var $linkElement=$(ajaxLink),elementSettings={progress:{type:'throbber'},dialogType:$linkElement.data('dialog-type'),dialog:$linkElement.data('dialog-options'),dialogRenderer:$linkElement.data('dialog-renderer'),base:$linkElement.attr('id'),element:ajaxLink},href=$linkElement.attr('href');if(href){elementSettings.url=href;elementSettings.event='click'};Drupal.ajax(elementSettings)})};Drupal.Ajax=function(base,element,elementSettings){var defaults={event:element?'mousedown':null,keypress:true,selector:base?"#".concat(base):null,effect:'none',speed:'none',method:'replaceWith',progress:{type:'throbber',message:Drupal.t('Please wait...')},submit:{js:true}};$.extend(this,defaults,elementSettings);this.commands=new Drupal.AjaxCommands();this.instanceIndex=false;if(this.wrapper)this.wrapper="#".concat(this.wrapper);this.element=element;this.element_settings=elementSettings;this.elementSettings=elementSettings;if(this.element&&this.element.form)this.$form=$(this.element.form);if(!this.url){var $element=$(this.element);if($element.is('a')){this.url=$element.attr('href')}else if(this.element&&element.form)this.url=this.$form.attr('action')};var originalUrl=this.url;this.url=this.url.replace(/\/nojs(\/|$|\?|#)/,'/ajax$1');if(drupalSettings.ajaxTrustedUrl[originalUrl])drupalSettings.ajaxTrustedUrl[this.url]=true;var ajax=this;ajax.options={url:ajax.url,data:ajax.submit,beforeSerialize:function beforeSerialize(elementSettings,options){return ajax.beforeSerialize(elementSettings,options)},beforeSubmit:function beforeSubmit(formValues,elementSettings,options){ajax.ajaxing=true;return ajax.beforeSubmit(formValues,elementSettings,options)},beforeSend:function beforeSend(xmlhttprequest,options){ajax.ajaxing=true;return ajax.beforeSend(xmlhttprequest,options)},success:function success(response,status,xmlhttprequest){if(typeof response==='string')response=$.parseJSON(response);if(response!==null&&!drupalSettings.ajaxTrustedUrl[ajax.url])if(xmlhttprequest.getResponseHeader('X-Drupal-Ajax-Token')!=='1'){var customMessage=Drupal.t('The response failed verification so will not be processed.');return ajax.error(xmlhttprequest,ajax.url,customMessage)};return ajax.success(response,status)},complete:function complete(xmlhttprequest,status){ajax.ajaxing=false;if(status==='error'||status==='parsererror')return ajax.error(xmlhttprequest,ajax.url)},dataType:'json',jsonp:false,type:'POST'};if(elementSettings.dialog)ajax.options.data.dialogOptions=elementSettings.dialog;if(ajax.options.url.indexOf('?')===-1){ajax.options.url+='?'}else ajax.options.url+='&';var wrapper="drupal_".concat(elementSettings.dialogType||'ajax');if(elementSettings.dialogRenderer)wrapper+=".".concat(elementSettings.dialogRenderer);ajax.options.url+="".concat(Drupal.ajax.WRAPPER_FORMAT,"=").concat(wrapper);$(ajax.element).on(elementSettings.event,function(event){if(!drupalSettings.ajaxTrustedUrl[ajax.url]&&!Drupal.url.isLocal(ajax.url))throw new Error(Drupal.t('The callback URL is not local and not trusted: !url',{'!url':ajax.url}));return ajax.eventResponse(this,event)});if(elementSettings.keypress)$(ajax.element).on('keypress',function(event){return ajax.keypressResponse(this,event)});if(elementSettings.prevent)$(ajax.element).on(elementSettings.prevent,false)};Drupal.ajax.WRAPPER_FORMAT='_wrapper_format';Drupal.Ajax.AJAX_REQUEST_PARAMETER='_drupal_ajax';Drupal.Ajax.prototype.execute=function(){if(this.ajaxing)return;try{this.beforeSerialize(this.element,this.options);return $.ajax(this.options)}catch(e){this.ajaxing=false;window.alert("An error occurred while attempting to process ".concat(this.options.url,": ").concat(e.message));return $.Deferred().reject()}};Drupal.Ajax.prototype.keypressResponse=function(element,event){var ajax=this;if(event.which===13||event.which===32&&element.type!=='text'&&element.type!=='textarea'&&element.type!=='tel'&&element.type!=='number'){event.preventDefault();event.stopPropagation();$(element).trigger(ajax.elementSettings.event)}};Drupal.Ajax.prototype.eventResponse=function(element,event){event.preventDefault();event.stopPropagation();var ajax=this;if(ajax.ajaxing)return;try{if(ajax.$form){if(ajax.setClick)element.form.clk=element;ajax.$form.ajaxSubmit(ajax.options)}else{ajax.beforeSerialize(ajax.element,ajax.options);$.ajax(ajax.options)}}catch(e){ajax.ajaxing=false;window.alert("An error occurred while attempting to process ".concat(ajax.options.url,": ").concat(e.message))}};Drupal.Ajax.prototype.beforeSerialize=function(element,options){if(this.$form&&document.body.contains(this.$form.get(0))){var settings=this.settings||drupalSettings;Drupal.detachBehaviors(this.$form.get(0),settings,'serialize')};options.data[Drupal.Ajax.AJAX_REQUEST_PARAMETER]=1;var pageState=drupalSettings.ajaxPageState;options.data['ajax_page_state[theme]']=pageState.theme;options.data['ajax_page_state[theme_token]']=pageState.theme_token;options.data['ajax_page_state[libraries]']=pageState.libraries};Drupal.Ajax.prototype.beforeSubmit=function(formValues,element,options){};Drupal.Ajax.prototype.beforeSend=function(xmlhttprequest,options){if(this.$form){options.extraData=options.extraData||{};options.extraData.ajax_iframe_upload='1';var v=$.fieldValue(this.element);if(v!==null)options.extraData[this.element.name]=v};$(this.element).prop('disabled',true);if(!this.progress||!this.progress.type)return;var progressIndicatorMethod="setProgressIndicator".concat(this.progress.type.slice(0,1).toUpperCase()).concat(this.progress.type.slice(1).toLowerCase());if(progressIndicatorMethod in this&&typeof this[progressIndicatorMethod]==='function')this[progressIndicatorMethod].call(this)};Drupal.theme.ajaxProgressThrobber=function(message){var messageMarkup=typeof message==='string'?Drupal.theme('ajaxProgressMessage',message):'',throbber='<div class="throbber">&nbsp;</div>';return"<div class=\"ajax-progress ajax-progress-throbber\">".concat(throbber).concat(messageMarkup,"</div>")};Drupal.theme.ajaxProgressIndicatorFullscreen=function(){return'<div class="ajax-progress ajax-progress-fullscreen">&nbsp;</div>'};Drupal.theme.ajaxProgressMessage=function(message){return"<div class=\"message\">".concat(message,"</div>")};Drupal.theme.ajaxProgressBar=function($element){return $('<div class="ajax-progress ajax-progress-bar"></div>').append($element)};Drupal.Ajax.prototype.setProgressIndicatorBar=function(){var progressBar=new Drupal.ProgressBar("ajax-progress-".concat(this.element.id),$.noop,this.progress.method,$.noop);if(this.progress.message)progressBar.setProgress(-1,this.progress.message);if(this.progress.url)progressBar.startMonitoring(this.progress.url,this.progress.interval||1500);this.progress.element=$(Drupal.theme('ajaxProgressBar',progressBar.element));this.progress.object=progressBar;$(this.element).after(this.progress.element)};Drupal.Ajax.prototype.setProgressIndicatorThrobber=function(){this.progress.element=$(Drupal.theme('ajaxProgressThrobber',this.progress.message));$(this.element).after(this.progress.element)};Drupal.Ajax.prototype.setProgressIndicatorFullscreen=function(){this.progress.element=$(Drupal.theme('ajaxProgressIndicatorFullscreen'));$('body').append(this.progress.element)};Drupal.Ajax.prototype.success=function(response,status){var _this=this;if(this.progress.element)$(this.progress.element).remove();if(this.progress.object)this.progress.object.stopMonitoring();$(this.element).prop('disabled',false);var elementParents=$(this.element).parents('[data-drupal-selector]').addBack().toArray(),focusChanged=false;Object.keys(response||{}).forEach(function(i){if(response[i].command&&_this.commands[response[i].command]){_this.commands[response[i].command](_this,response[i],status);if(response[i].command==='invoke'&&response[i].method==='focus'||response[i].command==='focusFirst')focusChanged=true}});if(!focusChanged&&this.element&&!$(this.element).data('disable-refocus')){var target=false;for(var n=elementParents.length-1;!target&&n>=0;n--)target=document.querySelector("[data-drupal-selector=\"".concat(elementParents[n].getAttribute('data-drupal-selector'),"\"]"));if(target)$(target).trigger('focus')};if(this.$form&&document.body.contains(this.$form.get(0))){var settings=this.settings||drupalSettings;Drupal.attachBehaviors(this.$form.get(0),settings)};this.settings=null};Drupal.Ajax.prototype.getEffect=function(response){var type=response.effect||this.effect,speed=response.speed||this.speed,effect={};if(type==='none'){effect.showEffect='show';effect.hideEffect='hide';effect.showSpeed=''}else if(type==='fade'){effect.showEffect='fadeIn';effect.hideEffect='fadeOut';effect.showSpeed=speed}else{effect.showEffect="".concat(type,"Toggle");effect.hideEffect="".concat(type,"Toggle");effect.showSpeed=speed};return effect};Drupal.Ajax.prototype.error=function(xmlhttprequest,uri,customMessage){if(this.progress.element)$(this.progress.element).remove();if(this.progress.object)this.progress.object.stopMonitoring();$(this.wrapper).show();$(this.element).prop('disabled',false);if(this.$form&&document.body.contains(this.$form.get(0))){var settings=this.settings||drupalSettings;Drupal.attachBehaviors(this.$form.get(0),settings)};throw new Drupal.AjaxError(xmlhttprequest,uri,customMessage)};Drupal.theme.ajaxWrapperNewContent=function($newContent,ajax,response){return(response.effect||ajax.effect)!=='none'&&$newContent.filter(function(i){return!($newContent[i].nodeName==='#comment'||$newContent[i].nodeName==='#text'&&/^(\s|\n|\r)*$/.test($newContent[i].textContent))}).length>1?Drupal.theme('ajaxWrapperMultipleRootElements',$newContent):$newContent};Drupal.theme.ajaxWrapperMultipleRootElements=function($elements){return $('<div></div>').append($elements)};Drupal.AjaxCommands=function(){};Drupal.AjaxCommands.prototype={insert:function insert(ajax,response){var $wrapper=response.selector?$(response.selector):$(ajax.wrapper),method=response.method||ajax.method,effect=ajax.getEffect(response),settings=response.settings||ajax.settings||drupalSettings,$newContent=$($.parseHTML(response.data,document,true));$newContent=Drupal.theme('ajaxWrapperNewContent',$newContent,ajax,response);switch(method){case'html':case'replaceWith':case'replaceAll':case'empty':case'remove':Drupal.detachBehaviors($wrapper.get(0),settings);break;default:break};$wrapper[method]($newContent);if(effect.showEffect!=='show')$newContent.hide();var $ajaxNewContent=$newContent.find('.ajax-new-content');if($ajaxNewContent.length){$ajaxNewContent.hide();$newContent.show();$ajaxNewContent[effect.showEffect](effect.showSpeed)}else if(effect.showEffect!=='show')$newContent[effect.showEffect](effect.showSpeed);if($newContent.parents('html').length)$newContent.each(function(index,element){if(element.nodeType===Node.ELEMENT_NODE)Drupal.attachBehaviors(element,settings)})},remove:function remove(ajax,response,status){var settings=response.settings||ajax.settings||drupalSettings;$(response.selector).each(function(){Drupal.detachBehaviors(this,settings)}).remove()},changed:function changed(ajax,response,status){var $element=$(response.selector);if(!$element.hasClass('ajax-changed')){$element.addClass('ajax-changed');if(response.asterisk)$element.find(response.asterisk).append(" <abbr class=\"ajax-changed\" title=\"".concat(Drupal.t('Changed'),"\">*</abbr> "))}},alert:function alert(ajax,response,status){window.alert(response.text)},announce:function announce(ajax,response){if(response.priority){Drupal.announce(response.text,response.priority)}else Drupal.announce(response.text)},redirect:function redirect(ajax,response,status){window.location=response.url},css:function css(ajax,response,status){$(response.selector).css(response.argument)},settings:function settings(ajax,response,status){var ajaxSettings=drupalSettings.ajax;if(ajaxSettings)Drupal.ajax.expired().forEach(function(instance){if(instance.selector){var selector=instance.selector.replace('#','');if(selector in ajaxSettings)delete ajaxSettings[selector]}});if(response.merge){$.extend(true,drupalSettings,response.settings)}else ajax.settings=response.settings},data:function data(ajax,response,status){$(response.selector).data(response.name,response.value)},focusFirst:function focusFirst(ajax,response,status){var focusChanged=false,container=document.querySelector(response.selector);if(container){var tabbableElements=tabbable(container);if(tabbableElements.length){tabbableElements[0].focus();focusChanged=true}else if(isFocusable(container)){container.focus();focusChanged=true}};if(ajax.hasOwnProperty('element')&&!focusChanged)ajax.element.focus()},invoke:function invoke(ajax,response,status){var $element=$(response.selector);$element[response.method].apply($element,_toConsumableArray(response.args))},restripe:function restripe(ajax,response,status){$(response.selector).find('> tbody > tr:visible, > tr:visible').removeClass('odd even').filter(':even').addClass('odd').end().filter(':odd').addClass('even')},update_build_id:function update_build_id(ajax,response,status){document.querySelectorAll("input[name=\"form_build_id\"][value=\"".concat(response.old,"\"]")).forEach(function(item){item.value=response.new})},add_css:function add_css(ajax,response,status){$('head').prepend(response.data)},message:function message(ajax,response){var messages=new Drupal.Message(document.querySelector(response.messageWrapperQuerySelector));if(response.clearPrevious)messages.clear();messages.add(response.message,response.messageOptions)}}})(jQuery,window,Drupal,drupalSettings,window.tabbable);
(function($,window,Drupal,drupalSettings){Drupal.Ajax.prototype.findGlyphicon=function(element){return $(element).closest('.form-item').find('.ajax-progress.glyphicon')};Drupal.Ajax.prototype.glyphiconStart=function(element,message){var $glyphicon=this.findGlyphicon(element);if($glyphicon[0]){$glyphicon.addClass('glyphicon-spin');if($.fn.tooltip&&drupalSettings.bootstrap.tooltip_enabled){$glyphicon.removeAttr('data-toggle').removeAttr('data-original-title').removeAttr('title').tooltip('destroy');if(message)$glyphicon.attr('data-toggle','tooltip').attr('title',message).tooltip()};if(message)$glyphicon.parent().append('<div class="sr-only message">'+message+'</div>')};return $glyphicon};Drupal.Ajax.prototype.glyphiconStop=function(element){var $glyphicon=this.findGlyphicon(element);if($glyphicon[0]){$glyphicon.removeClass('glyphicon-spin');if($.fn.tooltip&&drupalSettings.bootstrap.tooltip_enabled)$glyphicon.removeAttr('data-toggle').removeAttr('data-original-title').removeAttr('title').tooltip('destroy')}};Drupal.Ajax.prototype.setProgressIndicatorThrobber=function(){var $element=$(this.element),$glyphicon=this.glyphiconStart($element,this.progress.message);if($glyphicon[0]){this.progress.element=$glyphicon.parent();this.progress.glyphicon=true;return};if(!this.progress.element)this.progress.element=$(Drupal.theme('ajaxThrobber'));if(this.progress.message)this.progress.element.after('<div class="message">'+this.progress.message+'</div>');if($element.is('input')){$element.after(this.progress.element)}else $element.append(this.progress.element)};var success=Drupal.Ajax.prototype.success;Drupal.Ajax.prototype.success=function(response,status){if(this.progress.element){if(this.progress.glyphicon){this.glyphiconStop(this.progress.element)}else this.progress.element.remove();this.progress.element.parent().find('.message').remove()};return success.apply(this,[response,status])}})(jQuery,this,Drupal,drupalSettings);
(function ($, Drupal) {
  // On cookie settings form submission, trigger an ajax request.
  document.body.addEventListener('sqli_cookie_cnf__save', function () {
    let url = '/' + drupalSettings.path.pathPrefix + 'sqli-gdpr-api/persist-data';
    if (typeof navigator == "undefined" || typeof navigator.sendBeacon == "undefined") {
      Drupal.ajax({
        url: url,
        base: false,
        element: false,
        progress: true,
        async: false
      }).execute();
    } else {
      navigator.sendBeacon(url);
    }
  });

})(jQuery, Drupal);;
// Pannellum 2.4.0, https://github.com/mpetroff/pannellum
window.libpannellum=function(J,f,m){function Ba(P){function bb(a,e){return 1==a.level&&1!=e.level?-1:1==e.level&&1!=a.level?1:e.timestamp-a.timestamp}function W(a,e){return a.level!=e.level?a.level-e.level:a.diff-e.diff}function X(a,e,d,f,p,c){this.vertices=a;this.side=e;this.level=d;this.x=f;this.y=p;this.path=c.replace("%s",e).replace("%l",d).replace("%x",f).replace("%y",p)}function Y(a,e,f,m,p){var c;var g=e.vertices;c=ea(a,g.slice(0,3));var t=ea(a,g.slice(3,6)),z=ea(a,g.slice(6,9)),g=ea(a,g.slice(9,
12)),y=c[0]+t[0]+z[0]+g[0];-4==y||4==y?c=!1:(y=c[1]+t[1]+z[1]+g[1],c=-4==y||4==y?!1:4!=c[2]+t[2]+z[2]+g[2]);if(c){c=e.vertices;t=c[0]+c[3]+c[6]+c[9];z=c[1]+c[4]+c[7]+c[10];g=c[2]+c[5]+c[8]+c[11];y=Math.sqrt(t*t+z*z+g*g);g=Math.asin(g/y);t=Math.atan2(z,t)-m;t+=t>Math.PI?-2*Math.PI:t<-Math.PI?2*Math.PI:0;t=Math.abs(t);e.diff=Math.acos(Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos(t));t=!1;for(z=0;z<d.nodeCache.length;z++)if(d.nodeCache[z].path==e.path){t=!0;d.nodeCache[z].timestamp=d.nodeCacheTimestamp++;
d.nodeCache[z].diff=e.diff;d.currentNodes.push(d.nodeCache[z]);break}t||(e.timestamp=d.nodeCacheTimestamp++,d.currentNodes.push(e),d.nodeCache.push(e));if(e.level<d.level){var g=s.cubeResolution*Math.pow(2,e.level-s.maxLevel),t=Math.ceil(g*s.invTileResolution)-1,z=g%s.tileResolution*2,E=2*g%s.tileResolution;0===E&&(E=s.tileResolution);0===z&&(z=2*s.tileResolution);y=0.5;if(e.x==t||e.y==t)y=1-s.tileResolution/(s.tileResolution+E);var r=1-y,g=[],v=y,Q=y,I=y,l=r,A=r,D=r;if(E<s.tileResolution)if(e.x==
t&&e.y!=t){if(A=Q=0.5,"d"==e.side||"u"==e.side)D=I=0.5}else e.x!=t&&e.y==t&&(l=v=0.5,"l"==e.side||"r"==e.side)&&(D=I=0.5);z<=s.tileResolution&&(e.x==t&&(v=0,l=1,"l"==e.side||"r"==e.side)&&(I=0,D=1),e.y==t&&(Q=0,A=1,"d"==e.side||"u"==e.side)&&(I=0,D=1));E=[c[0],c[1],c[2],c[0]*v+c[3]*l,c[1]*y+c[4]*r,c[2]*I+c[5]*D,c[0]*v+c[6]*l,c[1]*Q+c[7]*A,c[2]*I+c[8]*D,c[0]*y+c[9]*r,c[1]*Q+c[10]*A,c[2]*I+c[11]*D];E=new X(E,e.side,e.level+1,2*e.x,2*e.y,s.fullpath);g.push(E);e.x==t&&z<=s.tileResolution||(E=[c[0]*v+
c[3]*l,c[1]*y+c[4]*r,c[2]*I+c[5]*D,c[3],c[4],c[5],c[3]*y+c[6]*r,c[4]*Q+c[7]*A,c[5]*I+c[8]*D,c[0]*v+c[6]*l,c[1]*Q+c[7]*A,c[2]*I+c[8]*D],E=new X(E,e.side,e.level+1,2*e.x+1,2*e.y,s.fullpath),g.push(E));e.x==t&&z<=s.tileResolution||e.y==t&&z<=s.tileResolution||(E=[c[0]*v+c[6]*l,c[1]*Q+c[7]*A,c[2]*I+c[8]*D,c[3]*y+c[6]*r,c[4]*Q+c[7]*A,c[5]*I+c[8]*D,c[6],c[7],c[8],c[9]*v+c[6]*l,c[10]*y+c[7]*r,c[11]*I+c[8]*D],E=new X(E,e.side,e.level+1,2*e.x+1,2*e.y+1,s.fullpath),g.push(E));e.y==t&&z<=s.tileResolution||(E=
[c[0]*y+c[9]*r,c[1]*Q+c[10]*A,c[2]*I+c[11]*D,c[0]*v+c[6]*l,c[1]*Q+c[7]*A,c[2]*I+c[8]*D,c[9]*v+c[6]*l,c[10]*y+c[7]*r,c[11]*I+c[8]*D,c[9],c[10],c[11]],E=new X(E,e.side,e.level+1,2*e.x,2*e.y+1,s.fullpath),g.push(E));for(e=0;e<g.length;e++)Y(a,g[e],f,m,p)}}}function Ca(){return[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1]}function ra(a,e,d){var f=Math.sin(e);e=Math.cos(e);
if("x"==d)return[a[0],e*a[1]+f*a[2],e*a[2]-f*a[1],a[3],e*a[4]+f*a[5],e*a[5]-f*a[4],a[6],e*a[7]+f*a[8],e*a[8]-f*a[7]];if("y"==d)return[e*a[0]-f*a[2],a[1],e*a[2]+f*a[0],e*a[3]-f*a[5],a[4],e*a[5]+f*a[3],e*a[6]-f*a[8],a[7],e*a[8]+f*a[6]];if("z"==d)return[e*a[0]+f*a[1],e*a[1]-f*a[0],a[2],e*a[3]+f*a[4],e*a[4]-f*a[3],a[5],e*a[6]+f*a[7],e*a[7]-f*a[6],a[8]]}function sa(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]}function La(a){a.textureLoad||(a.textureLoad=
!0,Ma(encodeURI(a.path+"."+s.extension),function(e){a.texture=e;a.textureLoaded=!0},Z.crossOrigin))}function ea(a,e){var d=[a[0]*e[0]+a[1]*e[1]+a[2]*e[2],a[4]*e[0]+a[5]*e[1]+a[6]*e[2],a[11]+a[8]*e[0]+a[9]*e[1]+a[10]*e[2],1/(a[12]*e[0]+a[13]*e[1]+a[14]*e[2])],f=d[0]*d[3],p=d[1]*d[3],d=d[2]*d[3],c=[0,0,0];-1>f&&(c[0]=-1);1<f&&(c[0]=1);-1>p&&(c[1]=-1);1<p&&(c[1]=1);if(-1>d||1<d)c[2]=1;return c}function ta(){console.log("Reducing canvas size due to error 1286!");A.width=Math.round(A.width/2);A.height=
Math.round(A.height/2)}var A=f.createElement("canvas");A.style.width=A.style.height="100%";P.appendChild(A);var d,a,V,N,na,R,ua,fa,s,G,va,ka,F,ba,Da,Z;this.init=function(h,e,Ia,ja,p,c,g,t){e===m&&(e="equirectangular");if("equirectangular"!=e&&"cubemap"!=e&&"multires"!=e)throw console.log("Error: invalid image type specified!"),{type:"config error"};G=e;s=h;va=Ia;Z=t||{};if(d){V&&(a.detachShader(d,V),a.deleteShader(V));N&&(a.detachShader(d,N),a.deleteShader(N));a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
null);d.texture&&a.deleteTexture(d.texture);if(d.nodeCache)for(h=0;h<d.nodeCache.length;h++)a.deleteTexture(d.nodeCache[h].texture);a.deleteProgram(d);d=m}fa=m;"cubemap"==G&&0!==(s[0].width&s[0].width-1)&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(a||(a=A.getContext("experimental-webgl",
{alpha:!1,depth:!1})),a&&1286==a.getError()&&ta());if(!a&&("multires"==G&&s.hasOwnProperty("fallbackPath")||"cubemap"==G)&&("WebkitAppearance"in f.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||-1!==navigator.appVersion.indexOf("MSIE 10"))){R&&P.removeChild(R);R=f.createElement("div");R.className="pnlm-world";ja=s.basePath?s.basePath+s.fallbackPath:s.fallbackPath;var z="frblud".split(""),y=0;p=function(){var a=f.createElement("canvas");a.className="pnlm-face pnlm-"+z[this.side]+
"face";R.appendChild(a);var c=a.getContext("2d");a.style.width=this.width+4+"px";a.style.height=this.height+4+"px";a.width=this.width+4;a.height=this.height+4;c.drawImage(this,2,2);var e=c.getImageData(0,0,a.width,a.height),d=e.data,h,l;for(h=2;h<a.width-2;h++)for(l=0;4>l;l++)d[4*(h+a.width)+l]=d[4*(h+2*a.width)+l],d[4*(h+a.width*(a.height-2))+l]=d[4*(h+a.width*(a.height-3))+l];for(h=2;h<a.height-2;h++)for(l=0;4>l;l++)d[4*(h*a.width+1)+l]=d[4*(h*a.width+2)+l],d[4*((h+1)*a.width-2)+l]=d[4*((h+1)*a.width-
3)+l];for(l=0;4>l;l++)d[4*(a.width+1)+l]=d[4*(2*a.width+2)+l],d[4*(2*a.width-2)+l]=d[4*(3*a.width-3)+l],d[4*(a.width*(a.height-2)+1)+l]=d[4*(a.width*(a.height-3)+2)+l],d[4*(a.width*(a.height-1)-2)+l]=d[4*(a.width*(a.height-2)-3)+l];for(h=1;h<a.width-1;h++)for(l=0;4>l;l++)d[4*h+l]=d[4*(h+a.width)+l],d[4*(h+a.width*(a.height-1))+l]=d[4*(h+a.width*(a.height-2))+l];for(h=1;h<a.height-1;h++)for(l=0;4>l;l++)d[h*a.width*4+l]=d[4*(h*a.width+1)+l],d[4*((h+1)*a.width-1)+l]=d[4*((h+1)*a.width-2)+l];for(l=0;4>
l;l++)d[l]=d[4*(a.width+1)+l],d[4*(a.width-1)+l]=d[4*(2*a.width-2)+l],d[a.width*(a.height-1)*4+l]=d[4*(a.width*(a.height-2)+1)+l],d[4*(a.width*a.height-1)+l]=d[4*(a.width*(a.height-1)-2)+l];c.putImageData(e,0,0);y++;6==y&&(na=this.width,P.appendChild(R),g())};for(h=0;6>h;h++)c=new Image,c.crossOrigin=Z.crossOrigin?Z.crossOrigin:"anonymous",c.side=h,c.onload=p,c.src="multires"==G?encodeURI(ja.replace("%s",z[h])+"."+s.extension):encodeURI(s[h].src)}else{if(!a)throw console.log("Error: no WebGL support detected!"),
{type:"no webgl"};s.fullpath=s.basePath?s.basePath+s.path:s.path;s.invTileResolution=1/s.tileResolution;e=Ca();ua=[];for(h=0;6>h;h++)ua[h]=e.slice(12*h,12*h+12),e=Ca();if("equirectangular"==G){if(h=Math.max(s.width,s.height),e=a.getParameter(a.MAX_TEXTURE_SIZE),h>e)throw console.log("Error: The image is too big; it's "+h+"px wide, but this device's maximum supported width is "+e+"px."),{type:"webgl size error",width:h,maxWidth:e};}else if("cubemap"==G&&(h=s[0].width,e=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),
h>e))throw console.log("Error: The cube face image is too big; it's "+h+"px wide, but this device's maximum supported width is "+e+"px."),{type:"webgl size error",width:h,maxWidth:e};t===m||t.horizonPitch===m&&t.horizonRoll===m||(fa=[t.horizonPitch==m?0:t.horizonPitch,t.horizonRoll==m?0:t.horizonRoll]);h=a.TEXTURE_2D;a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight);V=a.createShader(a.VERTEX_SHADER);e=r;"multires"==G&&(e=v);a.shaderSource(V,e);a.compileShader(V);N=a.createShader(a.FRAGMENT_SHADER);
e=Na;"cubemap"==G?(h=a.TEXTURE_CUBE_MAP,e=Oa):"multires"==G&&(e=oa);a.shaderSource(N,e);a.compileShader(N);d=a.createProgram();a.attachShader(d,V);a.attachShader(d,N);a.linkProgram(d);a.getShaderParameter(V,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(V));a.getShaderParameter(N,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(N));a.getProgramParameter(d,a.LINK_STATUS)||console.log(a.getProgramInfoLog(d));a.useProgram(d);d.drawInProgress=!1;d.texCoordLocation=a.getAttribLocation(d,"a_texCoord");
a.enableVertexAttribArray(d.texCoordLocation);"multires"!=G?(ka||(ka=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,ka),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),a.STATIC_DRAW),a.vertexAttribPointer(d.texCoordLocation,2,a.FLOAT,!1,0,0),d.aspectRatio=a.getUniformLocation(d,"u_aspectRatio"),a.uniform1f(d.aspectRatio,a.drawingBufferWidth/a.drawingBufferHeight),d.psi=a.getUniformLocation(d,"u_psi"),d.theta=a.getUniformLocation(d,"u_theta"),d.f=a.getUniformLocation(d,
"u_f"),d.h=a.getUniformLocation(d,"u_h"),d.v=a.getUniformLocation(d,"u_v"),d.vo=a.getUniformLocation(d,"u_vo"),d.rot=a.getUniformLocation(d,"u_rot"),a.uniform1f(d.h,ja/(2*Math.PI)),a.uniform1f(d.v,p/Math.PI),a.uniform1f(d.vo,c/Math.PI*2),"equirectangular"==G&&(d.backgroundColor=a.getUniformLocation(d,"u_backgroundColor"),a.uniform4fv(d.backgroundColor,(t.backgroundColor?t.backgroundColor:[0,0,0]).concat([1]))),d.texture=a.createTexture(),a.bindTexture(h,d.texture),"cubemap"==G?(a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,
0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[1]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[3]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[4]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[5]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[0]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[2])):a.texImage2D(h,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s),a.texParameteri(h,a.TEXTURE_WRAP_S,
a.CLAMP_TO_EDGE),a.texParameteri(h,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(h,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(h,a.TEXTURE_MAG_FILTER,a.LINEAR)):(d.vertPosLocation=a.getAttribLocation(d,"a_vertCoord"),a.enableVertexAttribArray(d.vertPosLocation),F||(F=a.createBuffer()),ba||(ba=a.createBuffer()),Da||(Da=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,ba),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,Da),a.bufferData(a.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2,0,2,3]),a.STATIC_DRAW),d.perspUniform=a.getUniformLocation(d,"u_perspMatrix"),d.cubeUniform=a.getUniformLocation(d,"u_cubeMatrix"),d.level=-1,d.currentNodes=[],d.nodeCache=[],d.nodeCacheTimestamp=0);ja=a.getError();if(0!==ja)throw console.log("Error: Something went wrong with WebGL!",ja),{type:"webgl error"};g()}};this.destroy=function(){P!==m&&(A!==m&&P.contains(A)&&P.removeChild(A),R!==m&&P.contains(R)&&P.removeChild(R));if(a){var d=a.getExtension("WEBGL_lose_context");d&&
d.loseContext()}};this.resize=function(){var h=J.devicePixelRatio||1;A.width=A.clientWidth*h;A.height=A.clientHeight*h;a&&(1286==a.getError()&&ta(),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),"multires"!=G&&a.uniform1f(d.aspectRatio,A.clientWidth/A.clientHeight))};this.resize();this.setPose=function(a,d){fa=[a,d]};this.render=function(h,e,f,r){var p;p=0;r===m&&(r={});r.roll&&(p=r.roll);if(fa!==m){var c=fa[0],g=fa[1],t=h,z=e,y=Math.cos(g)*Math.sin(h)*Math.sin(c)+Math.cos(h)*(Math.cos(c)*
Math.cos(e)+Math.sin(g)*Math.sin(c)*Math.sin(e)),v=-Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.sin(e);h=Math.cos(g)*Math.cos(c)*Math.sin(h)+Math.cos(h)*(-Math.cos(e)*Math.sin(c)+Math.cos(c)*Math.sin(g)*Math.sin(e));h=Math.asin(Math.max(Math.min(h,1),-1));e=Math.atan2(v,y);c=[Math.cos(t)*(Math.sin(g)*Math.sin(c)*Math.cos(z)-Math.cos(c)*Math.sin(z)),Math.cos(t)*Math.cos(g)*Math.cos(z),Math.cos(t)*(Math.cos(c)*Math.sin(g)*Math.cos(z)+Math.sin(z)*Math.sin(c))];g=[-Math.cos(h)*Math.sin(e),Math.cos(h)*
Math.cos(e)];g=Math.acos(Math.max(Math.min((c[0]*g[0]+c[1]*g[1])/(Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2])*Math.sqrt(g[0]*g[0]+g[1]*g[1])),1),-1));0>c[2]&&(g=2*Math.PI-g);p+=g}if(a||"multires"!=G&&"cubemap"!=G){if("multires"!=G)f=2*Math.atan(Math.tan(0.5*f)/(a.drawingBufferWidth/a.drawingBufferHeight)),f=1/Math.tan(0.5*f),a.uniform1f(d.psi,e),a.uniform1f(d.theta,h),a.uniform1f(d.rot,p),a.uniform1f(d.f,f),!0===va&&"equirectangular"==G&&(a.bindTexture(a.TEXTURE_2D,d.texture),a.texImage2D(a.TEXTURE_2D,
0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s)),a.drawArrays(a.TRIANGLES,0,6);else{c=a.drawingBufferWidth/a.drawingBufferHeight;g=2*Math.atan(Math.tan(f/2)*a.drawingBufferHeight/a.drawingBufferWidth);g=1/Math.tan(g/2);c=[g/c,0,0,0,0,g,0,0,0,0,100.1/-99.9,20/-99.9,0,0,-1,0];for(g=1;g<s.maxLevel&&a.drawingBufferWidth>s.tileResolution*Math.pow(2,g-1)*Math.tan(f/2)*0.707;)g++;d.level=g;g=[1,0,0,0,1,0,0,0,1];g=ra(g,-p,"z");g=ra(g,-h,"x");g=ra(g,e,"y");g=[g[0],g[1],g[2],0,g[3],g[4],g[5],0,g[6],g[7],g[8],0,0,0,0,1];a.uniformMatrix4fv(d.perspUniform,
!1,new Float32Array(sa(c)));a.uniformMatrix4fv(d.cubeUniform,!1,new Float32Array(sa(g)));c=[c[0]*g[0],c[0]*g[1],c[0]*g[2],0,c[5]*g[4],c[5]*g[5],c[5]*g[6],0,c[10]*g[8],c[10]*g[9],c[10]*g[10],c[11],-g[8],-g[9],-g[10],0];d.nodeCache.sort(bb);if(200<d.nodeCache.length&&d.nodeCache.length>d.currentNodes.length+50)for(g=d.nodeCache.splice(200,d.nodeCache.length-200),p=0;p<g.length;p++)a.deleteTexture(g[p].texture);d.currentNodes=[];g="fbudlr".split("");for(p=0;6>p;p++)t=new X(ua[p],g[p],1,0,0,s.fullpath),
Y(c,t,h,e,f);d.currentNodes.sort(W);for(p=0;p<d.currentNodes.length;p++)if(!d.currentNodes[p].texture){setTimeout(La,0,d.currentNodes[p]);break}if(!d.drawInProgress){d.drawInProgress=!0;for(h=0;h<d.currentNodes.length;h++)d.currentNodes[h].textureLoaded&&(a.bindBuffer(a.ARRAY_BUFFER,F),a.bufferData(a.ARRAY_BUFFER,new Float32Array(d.currentNodes[h].vertices),a.STATIC_DRAW),a.vertexAttribPointer(d.vertPosLocation,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,ba),a.vertexAttribPointer(d.texCoordLocation,
2,a.FLOAT,!1,0,0),a.bindTexture(a.TEXTURE_2D,d.currentNodes[h].texture),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0));d.drawInProgress=!1}}if(r.returnImage!==m)return A.toDataURL("image/png")}else for(p=na/2,r={f:"translate3d(-"+(p+2)+"px, -"+(p+2)+"px, -"+p+"px)",b:"translate3d("+(p+2)+"px, -"+(p+2)+"px, "+p+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(p+2)+"px, -"+p+"px, "+(p+2)+"px) rotateX(270deg)",d:"translate3d(-"+(p+2)+"px, "+p+"px, -"+(p+2)+"px) rotateX(90deg)",l:"translate3d(-"+
p+"px, -"+(p+2)+"px, "+(p+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+p+"px, -"+(p+2)+"px, -"+(p+2)+"px) rotateY(270deg)"},f=1/Math.tan(f/2),f=f*a.drawingBufferWidth/2+"px",h="perspective("+f+") translateZ("+f+") rotateX("+h+"rad) rotateY("+e+"rad) ",e=Object.keys(r),p=0;6>p;p++)f=R.querySelector(".pnlm-"+e[p]+"face").style,f.webkitTransform=h+r[e[p]],f.transform=h+r[e[p]]};this.isLoading=function(){if(a&&"multires"==G)for(var f=0;f<d.currentNodes.length;f++)if(!d.currentNodes[f].textureLoaded)return!0;
return!1};this.getCanvas=function(){return A};var Ma=function(){function d(){var e=this;this.texture=this.callback=null;this.image=new Image;this.image.crossOrigin=c?c:"anonymous";this.image.addEventListener("load",function(){var c=e.image;a.bindTexture(a.TEXTURE_2D,e.texture);a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,
a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null);e.callback(e.texture);p.length?(c=p.shift(),e.loadTexture(c.src,c.texture,c.callback)):m[f++]=e})}function e(a,c,d){this.src=a;this.texture=c;this.callback=d}var f=4,m={},p=[],c;d.prototype.loadTexture=function(a,c,d){this.texture=c;this.callback=d;this.image.src=a};for(var g=0;g<f;g++)m[g]=new d;return function(d,g,h){c=h;h=a.createTexture();f?m[--f].loadTexture(d,h,g):p.push(new e(d,
h,g));return h}}()}var r="attribute vec2 a_texCoord;varying vec2 v_texCoord;void main() {gl_Position = vec4(a_texCoord, 0.0, 1.0);v_texCoord = a_texCoord;}",v="attribute vec3 a_vertCoord;attribute vec2 a_texCoord;uniform mat4 u_cubeMatrix;uniform mat4 u_perspMatrix;varying mediump vec2 v_texCoord;void main(void) {gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);v_texCoord = a_texCoord;}",Oa="precision mediump float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image;\nuniform samplerCube u_imageCube;\nvarying vec2 v_texCoord;\nuniform vec4 u_backgroundColor;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);float cosphi = cos(phi);\ngl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));\n}",
Na="precision mediump float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image;\nuniform samplerCube u_imageCube;\nvarying vec2 v_texCoord;\nuniform vec4 u_backgroundColor;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);lambda = mod(lambda + PI, PI * 2.0) - PI;\nvec2 coord = vec2(lambda / PI, phi / (PI / 2.0));\nif(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)\ngl_FragColor = u_backgroundColor;\nelse\ngl_FragColor = texture2D(u_image, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n}",
oa="varying mediump vec2 v_texCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor = texture2D(u_sampler, v_texCoord);}";return{renderer:function(f,m,r,v){return new Ba(f,m,r,v)}}}(window,document);window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(J,f){window.setTimeout(J,1E3/60)}}());
window.pannellum=function(J,f,m){function Ba(r,v){function Oa(u){J.removeEventListener("deviceorientation",Oa);u&&null!==u.alpha&&null!==u.beta&&null!==u.gamma?(w.container.appendChild(w.orientation),pa=!0,Ya&&Ka()):pa=!1}function Na(){var u=f.createElement("div");u.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e";if(1==u.getElementsByTagName("i").length)W();else{wa=b.hfov;Ea=b.pitch;var a;if("cubemap"==b.type){O=[];for(u=0;6>u;u++)O.push(new Image),O[u].crossOrigin=b.crossOrigin;n.load.lbox.style.display=
"block";n.load.lbar.style.display="none"}else if("multires"==b.type)u=JSON.parse(JSON.stringify(b.multiRes)),b.basePath&&b.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(b.multiRes.basePath)?u.basePath=b.basePath+b.multiRes.basePath:b.multiRes.basePath?u.basePath=b.multiRes.basePath:b.basePath&&(u.basePath=b.basePath),O=u;else if(!0===b.dynamic)O=b.panorama;else{if(b.panorama===m){W(b.strings.noPanoramaError);return}O=new Image}if("cubemap"==b.type)for(var ca=6,c=function(){ca--;0===ca&&P()},d=function(a){var u=
f.createElement("a");u.href=a.target.src;u.innerHTML=u.href;W(b.strings.fileAccessError.replace("%s",u.outerHTML))},u=0;u<O.length;u++)O[u].onload=c,O[u].onerror=d,a=b.cubeMap[u],b.basePath&&!oa(a)&&(a=b.basePath+a),O[u].src=encodeURI(a);else if("multires"==b.type)P();else if(a="",b.basePath&&(a=b.basePath),!0!==b.dynamic){a=oa(b.panorama)?b.panorama:a+b.panorama;O.onload=function(){J.URL.revokeObjectURL(this.src);P()};var e=new XMLHttpRequest;e.onloadend=function(){if(200!=e.status){var u=f.createElement("a");
u.href=encodeURI(a);u.innerHTML=u.href;W(b.strings.fileAccessError.replace("%s",u.outerHTML))}Ba(this.response);n.load.msg.innerHTML=""};e.onprogress=function(a){if(a.lengthComputable){n.load.lbarFill.style.width=a.loaded/a.total*100+"%";var u,b;1E6<a.total?(u="MB",b=(a.loaded/1E6).toFixed(2),a=(a.total/1E6).toFixed(2)):1E3<a.total?(u="kB",b=(a.loaded/1E3).toFixed(1),a=(a.total/1E3).toFixed(1)):(u="B",b=a.loaded,a=a.total);n.load.msg.innerHTML=b+" / "+a+" "+u}else n.load.lbox.style.display="block",
n.load.lbar.style.display="none"};try{e.open("GET",a,!0)}catch(g){W(b.strings.malformedURLError)}e.responseType="blob";e.setRequestHeader("Accept","image/*,*/*;q=0.9");e.withCredentials="use-credentials"===b.crossOrigin;e.send()}b.draggable&&C.classList.add("pnlm-grab");C.classList.remove("pnlm-grabbing")}}function oa(a){return/^(?:[a-z]+:)?\/\//i.test(a)||"/"==a[0]||"blob:"==a.slice(0,5)}function P(){B||(B=new libpannellum.renderer(M));Sa||(Sa=!0,H.addEventListener("mousedown",Ca,!1),f.addEventListener("mousemove",
La,!1),f.addEventListener("mouseup",ea,!1),b.mouseZoom&&(C.addEventListener("mousewheel",na,!1),C.addEventListener("DOMMouseScroll",na,!1)),b.doubleClickZoom&&H.addEventListener("dblclick",ra,!1),C.addEventListener("mozfullscreenchange",y,!1),C.addEventListener("webkitfullscreenchange",y,!1),C.addEventListener("msfullscreenchange",y,!1),C.addEventListener("fullscreenchange",y,!1),J.addEventListener("resize",ka,!1),J.addEventListener("orientationchange",ka,!1),b.disableKeyboardCtrl||(r.addEventListener("keydown",
R,!1),r.addEventListener("keyup",fa,!1),r.addEventListener("blur",ua,!1)),f.addEventListener("mouseleave",ea,!1),H.addEventListener("touchstart",ta,!1),H.addEventListener("touchmove",A,!1),H.addEventListener("touchend",d,!1),H.addEventListener("pointerdown",a,!1),H.addEventListener("pointermove",V,!1),H.addEventListener("pointerup",N,!1),H.addEventListener("pointerleave",N,!1),J.navigator.pointerEnabled&&(r.style.touchAction="none"));h();setTimeout(function(){},500)}function Ba(a){var k=new FileReader;
k.addEventListener("loadend",function(){var ca=k.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var c=ca.indexOf("\u00ff\u00c2");(0>c||65536<c)&&W(b.strings.iOS8WebGLError)}c=ca.indexOf("<x:xmpmeta");if(-1<c&&!0!==b.ignoreGPanoXMP){var d=ca.substring(c,ca.indexOf("</x:xmpmeta>")+12),e=function(a){var u;0<=d.indexOf(a+'="')?(u=d.substring(d.indexOf(a+'="')+a.length+2),u=u.substring(0,u.indexOf('"'))):0<=d.indexOf(a+">")&&(u=d.substring(d.indexOf(a+">")+a.length+1),
u=u.substring(0,u.indexOf("<")));return u!==m?Number(u):null},ca=e("GPano:FullPanoWidthPixels"),c=e("GPano:CroppedAreaImageWidthPixels"),f=e("GPano:FullPanoHeightPixels"),g=e("GPano:CroppedAreaImageHeightPixels"),h=e("GPano:CroppedAreaTopPixels"),l=e("GPano:PoseHeadingDegrees"),p=e("GPano:PosePitchDegrees"),e=e("GPano:PoseRollDegrees");null!==ca&&null!==c&&null!==f&&null!==g&&null!==h&&(0>da.indexOf("haov")&&(b.haov=c/ca*360),0>da.indexOf("vaov")&&(b.vaov=g/f*180),0>da.indexOf("vOffset")&&(b.vOffset=
-180*((h+g/2)/f-0.5)),null!==l&&0>da.indexOf("northOffset")&&(b.northOffset=l,!1!==b.compass&&(b.compass=!0)),null!==p&&null!==e&&(0>da.indexOf("horizonPitch")&&(b.horizonPitch=p),0>da.indexOf("horizonRoll")&&(b.horizonRoll=e)))}O.src=J.URL.createObjectURL(a)});k.readAsBinaryString!==m?k.readAsBinaryString(a):k.readAsText(a)}function W(a){a===m&&(a=b.strings.genericWebGLError);n.errorMsg.innerHTML="<p>"+a+"</p>";w.load.style.display="none";n.load.box.style.display="none";n.errorMsg.style.display=
"table";Pa=!0;M.style.display="none";ga("error",a)}function X(a){var b=Y(a);ha.style.left=b.x+"px";ha.style.top=b.y+"px";clearTimeout(X.t1);clearTimeout(X.t2);ha.style.display="block";ha.style.opacity=1;X.t1=setTimeout(function(){ha.style.opacity=0},2E3);X.t2=setTimeout(function(){ha.style.display="none"},2500);a.preventDefault()}function Y(a){var b=r.getBoundingClientRect(),c={};c.x=a.clientX-b.left;c.y=a.clientY-b.top;return c}function Ca(a){a.preventDefault();r.focus();if(L&&b.draggable){var k=
Y(a);if(b.hotSpotDebug){var c=sa(a);console.log("Pitch: "+c[0]+", Yaw: "+c[1]+", Center Pitch: "+b.pitch+", Center Yaw: "+b.yaw+", HFOV: "+b.hfov)}Ja();l();b.roll=0;x.hfov=0;la=!0;S=Date.now();xa=k.x;ya=k.y;Qa=b.yaw;Ra=b.pitch;C.classList.add("pnlm-grabbing");C.classList.remove("pnlm-grab");ga("mousedown",a);F()}}function ra(a){b.minHfov===b.hfov?za.setHfov(wa,1E3):(a=sa(a),za.lookAt(a[0],a[1],b.minHfov,1E3))}function sa(a){var k=Y(a);a=B.getCanvas();var c=a.clientWidth,d=a.clientHeight;a=k.x/c*2-
1;var d=(1-k.y/d*2)*d/c,e=1/Math.tan(b.hfov*Math.PI/360),f=Math.sin(b.pitch*Math.PI/180),g=Math.cos(b.pitch*Math.PI/180),k=e*g-d*f,c=Math.sqrt(a*a+k*k),d=180*Math.atan((d*g+e*f)/c)/Math.PI;a=180*Math.atan2(a/c,k/c)/Math.PI+b.yaw;-180>a&&(a+=360);180<a&&(a-=360);return[d,a]}function La(a){if(la&&L){S=Date.now();var k=B.getCanvas(),c=k.clientWidth,k=k.clientHeight;a=Y(a);var d=180*(Math.atan(xa/c*2-1)-Math.atan(a.x/c*2-1))/Math.PI*b.hfov/90+Qa;x.yaw=(d-b.yaw)%360*0.2;b.yaw=d;c=360*Math.atan(Math.tan(b.hfov/
360*Math.PI)*k/c)/Math.PI;c=180*(Math.atan(a.y/k*2-1)-Math.atan(ya/k*2-1))/Math.PI*c/90+Ra;x.pitch=0.2*(c-b.pitch);b.pitch=c}}function ea(a){la&&(la=!1,15<Date.now()-S&&(x.pitch=x.yaw=0),C.classList.add("pnlm-grab"),C.classList.remove("pnlm-grabbing"),S=Date.now(),ga("mouseup",a))}function ta(a){if(L&&b.draggable){Ja();l();b.roll=0;x.hfov=0;var k=Y(a.targetTouches[0]);xa=k.x;ya=k.y;if(2==a.targetTouches.length){var c=Y(a.targetTouches[1]);xa+=0.5*(c.x-k.x);ya+=0.5*(c.y-k.y);Fa=Math.sqrt((k.x-c.x)*
(k.x-c.x)+(k.y-c.y)*(k.y-c.y))}la=!0;S=Date.now();Qa=b.yaw;Ra=b.pitch;ga("touchstart",a);F()}}function A(a){if(b.draggable&&(a.preventDefault(),L&&(S=Date.now()),la&&L)){var k=Y(a.targetTouches[0]),c=k.x,d=k.y;2==a.targetTouches.length&&-1!=Fa&&(a=Y(a.targetTouches[1]),c+=0.5*(a.x-k.x),d+=0.5*(a.y-k.y),k=Math.sqrt((k.x-a.x)*(k.x-a.x)+(k.y-a.y)*(k.y-a.y)),U(b.hfov+0.1*(Fa-k)),Fa=k);k=b.hfov/360;c=(xa-c)*k+Qa;x.yaw=(c-b.yaw)%360*0.2;b.yaw=c;d=(d-ya)*k+Ra;x.pitch=0.2*(d-b.pitch);b.pitch=d}}function d(){la=
!1;150<Date.now()-S&&(x.pitch=x.yaw=0);Fa=-1;S=Date.now();ga("touchend",event)}function a(a){"touch"==a.pointerType&&(ma.push(a.pointerId),Aa.push({clientX:a.clientX,clientY:a.clientY}),a.targetTouches=Aa,ta(a),a.preventDefault())}function V(a){if("touch"==a.pointerType)for(var b=0;b<ma.length;b++)if(a.pointerId==ma[b]){Aa[b].clientX=a.clientX;Aa[b].clientY=a.clientY;a.targetTouches=Aa;A(a);break}}function N(a){if("touch"==a.pointerType){for(var b=!1,c=0;c<ma.length;c++)a.pointerId==ma[c]&&(ma[c]=
m),ma[c]&&(b=!0);b||(ma=[],Aa=[],d());a.preventDefault()}}function na(a){L&&("fullscreenonly"!=b.mouseZoom||Ga)&&(a.preventDefault(),Ja(),S=Date.now(),a.wheelDeltaY?(U(b.hfov-0.05*a.wheelDeltaY),x.hfov=0>a.wheelDelta?1:-1):a.wheelDelta?(U(b.hfov-0.05*a.wheelDelta),x.hfov=0>a.wheelDelta?1:-1):a.detail&&(U(b.hfov+1.5*a.detail),x.hfov=0<a.detail?1:-1),F())}function R(a){Ja();S=Date.now();l();b.roll=0;var k=a.which||a.keycode;0>Za.indexOf(k)||(a.preventDefault(),27==k?Ga&&z():s(k,!0))}function ua(){for(var a=
0;10>a;a++)q[a]=!1}function fa(a){var b=a.which||a.keycode;0>Za.indexOf(b)||(a.preventDefault(),s(b,!1))}function s(a,b){var c=!1;switch(a){case 109:case 189:case 17:case 173:q[0]!=b&&(c=!0);q[0]=b;break;case 107:case 187:case 16:case 61:q[1]!=b&&(c=!0);q[1]=b;break;case 38:q[2]!=b&&(c=!0);q[2]=b;break;case 87:q[6]!=b&&(c=!0);q[6]=b;break;case 40:q[3]!=b&&(c=!0);q[3]=b;break;case 83:q[7]!=b&&(c=!0);q[7]=b;break;case 37:q[4]!=b&&(c=!0);q[4]=b;break;case 65:q[8]!=b&&(c=!0);q[8]=b;break;case 39:q[5]!=
b&&(c=!0);q[5]=b;break;case 68:q[9]!=b&&(c=!0),q[9]=b}c&&b&&(ia="undefined"!==typeof performance&&performance.now()?performance.now():Date.now(),F())}function G(){if(L){var a=!1,k=b.pitch,c=b.yaw,d=b.hfov,e;e="undefined"!==typeof performance&&performance.now()?performance.now():Date.now();ia===m&&(ia=e);var f=(e-ia)*b.hfov/1700,f=Math.min(f,1);q[0]&&!0===b.keyboardZoom&&(U(b.hfov+(0.8*x.hfov+0.5)*f),a=!0);q[1]&&!0===b.keyboardZoom&&(U(b.hfov+(0.8*x.hfov-0.2)*f),a=!0);if(q[2]||q[6])b.pitch+=(0.8*x.pitch+
0.2)*f,a=!0;if(q[3]||q[7])b.pitch+=(0.8*x.pitch-0.2)*f,a=!0;if(q[4]||q[8])b.yaw+=(0.8*x.yaw-0.2)*f,a=!0;if(q[5]||q[9])b.yaw+=(0.8*x.yaw+0.2)*f,a=!0;a&&(S=Date.now());Date.now();if(b.autoRotate){if(0.001<e-ia){var a=(e-ia)/1E3,g=(x.yaw/a*f-0.2*b.autoRotate)*a,g=(0<-b.autoRotate?1:-1)*Math.min(Math.abs(b.autoRotate*a),Math.abs(g));b.yaw+=g}b.autoRotateStopDelay&&(b.autoRotateStopDelay-=e-ia,0>=b.autoRotateStopDelay&&(b.autoRotateStopDelay=!1,$=b.autoRotate,b.autoRotate=0))}K.pitch&&(va("pitch"),k=b.pitch);
K.yaw&&(va("yaw"),c=b.yaw);K.hfov&&(va("hfov"),d=b.hfov);0<f&&!b.autoRotate&&(q[4]||q[5]||q[8]||q[9]||K.yaw||(b.yaw+=x.yaw*f*0.85),q[2]||q[3]||q[6]||q[7]||K.pitch||(b.pitch+=x.pitch*f*0.85),q[0]||q[1]||K.hfov||U(b.hfov+x.hfov*f*0.85));ia=e;0<f&&(x.yaw=0.8*x.yaw+(b.yaw-c)/f*0.2,x.pitch=0.8*x.pitch+(b.pitch-k)/f*0.2,x.hfov=0.8*x.hfov+(b.hfov-d)/f*0.2,k=b.autoRotate?Math.abs(b.autoRotate):5,x.yaw=Math.min(k,Math.max(x.yaw,-k)),x.pitch=Math.min(k,Math.max(x.pitch,-k)),x.hfov=Math.min(k,Math.max(x.hfov,
-k)));q[0]&&q[0]&&(x.hfov=0);(q[2]||q[6])&&(q[3]||q[7])&&(x.pitch=0);(q[4]||q[8])&&(q[5]||q[9])&&(x.yaw=0)}}function va(a){var k=K[a],c=Math.min(1,Math.max((Date.now()-k.startTime)/1E3/(k.duration/1E3),0)),c=k.startPosition+b.animationTimingFunction(c)*(k.endPosition-k.startPosition);if(k.endPosition>k.startPosition&&c>=k.endPosition||k.endPosition<k.startPosition&&c<=k.endPosition||k.endPosition===k.startPosition){c=k.endPosition;x[a]=0;var k=K[a].callback,d=K[a].callbackArgs;delete K[a];"function"==
typeof k&&k(d)}b[a]=c}function ka(){y()}function F(){Ta||(Ta=!0,ba())}function ba(){Da();Ua&&clearTimeout(Ua);if(la||!0===aa)requestAnimationFrame(ba);else if(q[0]||q[1]||q[2]||q[3]||q[4]||q[5]||q[6]||q[7]||q[8]||q[9]||b.autoRotate||K.pitch||K.yaw||K.hfov||0.01<Math.abs(x.yaw)||0.01<Math.abs(x.pitch)||0.01<Math.abs(x.hfov))G(),0<=b.autoRotateInactivityDelay&&$&&Date.now()-S>b.autoRotateInactivityDelay&&!b.autoRotate&&(b.autoRotate=$,za.lookAt(Ea,m,wa,3E3)),requestAnimationFrame(ba);else if(B&&(B.isLoading()||
!0===b.dynamic&&$a))requestAnimationFrame(ba);else{Ta=!1;ia=m;var a=b.autoRotateInactivityDelay-(Date.now()-S);0<a?Ua=setTimeout(function(){b.autoRotate=$;za.lookAt(Ea,m,wa,3E3);F()},a):0<=b.autoRotateInactivityDelay&&$&&(b.autoRotate=$,za.lookAt(Ea,m,wa,3E3),F())}}function Da(){var a;if(L){180<b.yaw?b.yaw-=360:-180>b.yaw&&(b.yaw+=360);a=b.yaw;var k=b.maxYaw-b.minYaw,d=-180,e=180;360>k&&(d=b.minYaw+b.hfov/2,e=b.maxYaw-b.hfov/2,k<b.hfov&&(d=e=(d+e)/2));b.yaw=Math.max(d,Math.min(e,b.yaw));!1!==b.autoRotate&&
a!=b.yaw&&(b.autoRotate*=-1);a=B.getCanvas();a=2*Math.atan(Math.tan(b.hfov/180*Math.PI*0.5)/(a.width/a.height))/Math.PI*180;k=b.minPitch+a/2;d=b.maxPitch-a/2;b.maxPitch-b.minPitch<a&&(k=d=(k+d)/2);isNaN(k)&&(k=-90);isNaN(d)&&(d=90);b.pitch=Math.max(k,Math.min(d,b.pitch));B.render(b.pitch*Math.PI/180,b.yaw*Math.PI/180,b.hfov*Math.PI/180,{roll:b.roll*Math.PI/180});b.hotSpots.forEach(c);b.compass&&(Ha.style.transform="rotate("+(-b.yaw-b.northOffset)+"deg)",Ha.style.webkitTransform="rotate("+(-b.yaw-
b.northOffset)+"deg)")}}function Z(a,b,c,d){this.w=a;this.x=b;this.y=c;this.z=d}function Ma(a){var c;c=a.alpha;var d=a.beta;a=a.gamma;d=[d?d*Math.PI/180/2:0,a?a*Math.PI/180/2:0,c?c*Math.PI/180/2:0];c=[Math.cos(d[0]),Math.cos(d[1]),Math.cos(d[2])];d=[Math.sin(d[0]),Math.sin(d[1]),Math.sin(d[2])];c=new Z(c[0]*c[1]*c[2]-d[0]*d[1]*d[2],d[0]*c[1]*c[2]-c[0]*d[1]*d[2],c[0]*d[1]*c[2]+d[0]*c[1]*d[2],c[0]*c[1]*d[2]+d[0]*d[1]*c[2]);c=c.multiply(new Z(Math.sqrt(0.5),-Math.sqrt(0.5),0,0));d=J.orientation?-J.orientation*
Math.PI/180/2:0;c=c.multiply(new Z(Math.cos(d),0,-Math.sin(d),0)).toEulerAngles();"number"==typeof aa&&10>aa?aa+=1:10===aa?(ab=c[2]/Math.PI*180+b.yaw,aa=!0,requestAnimationFrame(ba)):(b.pitch=c[0]/Math.PI*180,b.roll=-c[1]/Math.PI*180,b.yaw=-c[2]/Math.PI*180+ab)}function h(){try{var a={};b.horizonPitch!==m&&(a.horizonPitch=b.horizonPitch*Math.PI/180);b.horizonRoll!==m&&(a.horizonRoll=b.horizonRoll*Math.PI/180);b.backgroundColor!==m&&(a.backgroundColor=b.backgroundColor);B.init(O,b.type,b.dynamic,b.haov*
Math.PI/180,b.vaov*Math.PI/180,b.vOffset*Math.PI/180,e,a);!0!==b.dynamic&&(O=m)}catch(c){if("webgl error"==c.type||"no webgl"==c.type)W();else if("webgl size error"==c.type)W(b.strings.textureSizeError.replace("%s",c.width).replace("%s",c.maxWidth));else throw W(b.strings.unknownError),c;}}function e(){if(b.sceneFadeDuration&&B.fadeImg!==m){B.fadeImg.style.opacity=0;var a=B.fadeImg;delete B.fadeImg;setTimeout(function(){M.removeChild(a);ga("scenechangefadedone")},b.sceneFadeDuration)}Ha.style.display=
b.compass?"inline":"none";ja();n.load.box.style.display="none";qa!==m&&(M.removeChild(qa),qa=m);L=!0;ga("load");F()}function Ia(a){a.pitch=Number(a.pitch)||0;a.yaw=Number(a.yaw)||0;var c=f.createElement("div");c.className="pnlm-hotspot-base";c.className=a.cssClass?c.className+(" "+a.cssClass):c.className+(" pnlm-hotspot pnlm-sprite pnlm-"+D(a.type));var d=f.createElement("span");a.text&&(d.innerHTML=D(a.text));var e;if(a.video){e=f.createElement("video");var g=a.video;b.basePath&&!oa(g)&&(g=b.basePath+
g);e.src=encodeURI(g);e.controls=!0;e.style.width=a.width+"px";M.appendChild(c);d.appendChild(e)}else if(a.image){g=a.image;b.basePath&&!oa(g)&&(g=b.basePath+g);e=f.createElement("a");e.href=encodeURI(a.URL?a.URL:g);e.target="_blank";d.appendChild(e);var h=f.createElement("img");h.src=encodeURI(g);h.style.width=a.width+"px";h.style.paddingTop="5px";M.appendChild(c);e.appendChild(h);d.style.maxWidth="initial"}else a.URL?(e=f.createElement("a"),e.href=encodeURI(a.URL),e.target="_blank",M.appendChild(e),
c.style.cursor="pointer",d.style.cursor="pointer",e.appendChild(c)):(a.sceneId&&(c.onclick=c.ontouchend=function(){c.clicked||(c.clicked=!0,I(a.sceneId,a.targetPitch,a.targetYaw,a.targetHfov));return!1},c.style.cursor="pointer",d.style.cursor="pointer"),M.appendChild(c));if(a.createTooltipFunc)a.createTooltipFunc(c,a.createTooltipArgs);else if(a.text||a.video||a.image)c.classList.add("pnlm-tooltip"),c.appendChild(d),d.style.width=d.scrollWidth-20+"px",d.style.marginLeft=-(d.scrollWidth-c.offsetWidth)/
2+"px",d.style.marginTop=-d.scrollHeight-12+"px";a.clickHandlerFunc&&(c.addEventListener("click",function(b){a.clickHandlerFunc(b,a.clickHandlerArgs)},"false"),c.style.cursor="pointer",d.style.cursor="pointer");a.div=c}function ja(){Va||(b.hotSpots?(b.hotSpots=b.hotSpots.sort(function(a,b){return a.pitch<b.pitch}),b.hotSpots.forEach(Ia)):b.hotSpots=[],Va=!0,b.hotSpots.forEach(c))}function p(){var a=b.hotSpots;Va=!1;delete b.hotSpots;if(a)for(var c=0;c<a.length;c++){for(var d=a[c].div;d.parentNode!=
M;)d=d.parentNode;M.removeChild(d);delete a[c].div}}function c(a){var c=Math.sin(a.pitch*Math.PI/180),d=Math.cos(a.pitch*Math.PI/180),e=Math.sin(b.pitch*Math.PI/180),f=Math.cos(b.pitch*Math.PI/180),g=Math.cos((-a.yaw+b.yaw)*Math.PI/180),h=c*e+d*g*f;if(90>=a.yaw&&-90<a.yaw&&0>=h||(90<a.yaw||-90>=a.yaw)&&0>=h)a.div.style.visibility="hidden";else{var l=Math.sin((-a.yaw+b.yaw)*Math.PI/180),p=Math.tan(b.hfov*Math.PI/360);a.div.style.visibility="visible";var m=B.getCanvas(),n=m.clientWidth,m=m.clientHeight,
c=[-n/p*l*d/h/2,-n/p*(c*f-d*g*e)/h/2],d=Math.sin(b.roll*Math.PI/180),e=Math.cos(b.roll*Math.PI/180),c=[c[0]*e-c[1]*d,c[0]*d+c[1]*e];c[0]+=(n-a.div.offsetWidth)/2;c[1]+=(m-a.div.offsetHeight)/2;n="translate("+c[0]+"px, "+c[1]+"px) translateZ(9999px) rotate("+b.roll+"deg)";a.div.style.webkitTransform=n;a.div.style.MozTransform=n;a.div.style.transform=n}}function g(a){b={};var c,d,e="haov vaov vOffset northOffset horizonPitch horizonRoll".split(" ");da=[];for(c in Wa)Wa.hasOwnProperty(c)&&(b[c]=Wa[c]);
for(c in v.default)if(v.default.hasOwnProperty(c))if("strings"==c)for(d in v.default.strings)v.default.strings.hasOwnProperty(d)&&(b.strings[d]=D(v.default.strings[d]));else b[c]=v.default[c],0<=e.indexOf(c)&&da.push(c);if(null!==a&&""!==a&&v.scenes&&v.scenes[a]){var f=v.scenes[a];for(c in f)if(f.hasOwnProperty(c))if("strings"==c)for(d in f.strings)f.strings.hasOwnProperty(d)&&(b.strings[d]=D(f.strings[d]));else b[c]=f[c],0<=e.indexOf(c)&&da.push(c);b.scene=a}for(c in v)if(v.hasOwnProperty(c))if("strings"==
c)for(d in v.strings)v.strings.hasOwnProperty(d)&&(b.strings[d]=D(v.strings[d]));else b[c]=v[c],0<=e.indexOf(c)&&da.push(c)}function t(a){if((a=a?a:!1)&&"preview"in b){var c=b.preview;b.basePath&&!oa(c)&&(c=b.basePath+c);qa=f.createElement("div");qa.className="pnlm-preview-img";qa.style.backgroundImage="url('"+encodeURI(c)+"')";M.appendChild(qa)}var c=b.title,d=b.author;a&&("previewTitle"in b&&(b.title=b.previewTitle),"previewAuthor"in b&&(b.author=b.previewAuthor));b.hasOwnProperty("title")||(n.title.innerHTML=
"");b.hasOwnProperty("author")||(n.author.innerHTML="");b.hasOwnProperty("title")||b.hasOwnProperty("author")||(n.container.style.display="none");w.load.innerHTML="<p>"+b.strings.loadButtonLabel+"</p>";n.load.boxp.innerHTML=b.strings.loadingLabel;for(var e in b)if(b.hasOwnProperty(e))switch(e){case "title":n.title.innerHTML=D(b[e]);n.container.style.display="inline";break;case "author":n.author.innerHTML=b.strings.bylineLabel.replace("%s",D(b[e]));n.container.style.display="inline";break;case "fallback":n.errorMsg.innerHTML=
'<p>Your browser does not support WebGL.<br><a href="'+encodeURI(b[e])+'" target="_blank">Click here to view this panorama in an alternative viewer.</a></p>';break;case "hfov":U(Number(b[e]));break;case "autoLoad":!0===b[e]&&B===m&&(n.load.box.style.display="inline",w.load.style.display="none",Na());break;case "showZoomCtrl":w.zoom.style.display=b[e]&&!1!=b.showControls?"block":"none";break;case "showFullscreenCtrl":w.fullscreen.style.display=b[e]&&!1!=b.showControls&&("fullscreen"in f||"mozFullScreen"in
f||"webkitIsFullScreen"in f||"msFullscreenElement"in f)?"block":"none";break;case "hotSpotDebug":Xa.style.display=b[e]?"block":"none";break;case "showControls":b[e]||(w.orientation.style.display="none",w.zoom.style.display="none",w.fullscreen.style.display="none");break;case "orientationOnByDefault":b[e]&&(pa===m?Ya=!0:!0===pa&&Ka())}a&&(c?b.title=c:delete b.title,d?b.author=d:delete b.author)}function z(){if(L&&!Pa)if(Ga)f.exitFullscreen?f.exitFullscreen():f.mozCancelFullScreen?f.mozCancelFullScreen():
f.webkitCancelFullScreen?f.webkitCancelFullScreen():f.msExitFullscreen&&f.msExitFullscreen();else try{r.requestFullscreen?r.requestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen?r.msRequestFullscreen():r.webkitRequestFullScreen()}catch(a){}}function y(){f.fullscreen||f.mozFullScreen||f.webkitIsFullScreen||f.msFullscreenElement?(w.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),Ga=!0):(w.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),
Ga=!1);B.resize();U(b.hfov);F()}function E(a){var c=b.minHfov;"multires"==b.type&&B&&(c=Math.min(c,B.getCanvas().width/(b.multiRes.cubeResolution/90*0.9)));return c>b.maxHfov?(console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),b.hfov):a<c?c:a>b.maxHfov?b.maxHfov:a}function U(a){b.hfov=E(a)}function Ja(){K={};$=b.autoRotate?b.autoRotate:$;b.autoRotate=!1}function Q(){Pa&&(n.load.box.style.display="none",n.errorMsg.style.display="none",Pa=!1,ga("errorcleared"));w.load.style.display="none";
n.load.box.style.display="inline";Na()}function I(a,c,d,e,f){L=!1;K={};var h,l;if(b.sceneFadeDuration&&!f&&(h=B.render(b.pitch*Math.PI/180,b.yaw*Math.PI/180,b.hfov*Math.PI/180,{returnImage:!0}),h!==m)){f=new Image;f.className="pnlm-fade-img";f.style.transition="opacity "+b.sceneFadeDuration/1E3+"s";f.style.width="100%";f.style.height="100%";f.onload=function(){I(a,c,d,e,!0)};f.src=h;M.appendChild(f);B.fadeImg=f;return}f="same"===c?b.pitch:c;h="same"===d?b.yaw:"sameAzimuth"===d?b.yaw+(b.northOffset||
0)-(v.scenes[a].northOffset||0):d;l="same"===e?b.hfov:e;p();g(a);x.yaw=x.pitch=x.hfov=0;t();f!==m&&(b.pitch=f);h!==m&&(b.yaw=h);l!==m&&(b.hfov=l);ga("scenechange",a);Q()}function l(){J.removeEventListener("deviceorientation",Ma);w.orientation.classList.remove("pnlm-orientation-button-active");aa=!1}function Ka(){aa=1;J.addEventListener("deviceorientation",Ma);w.orientation.classList.add("pnlm-orientation-button-active")}function D(a){return v.escapeHTML?String(a).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):
String(a).split("\n").join("<br>")}function ga(a){if(a in T)for(var b=T[a].length;0<b;b--)T[a][T[a].length-b].apply(null,[].slice.call(arguments,1))}var za=this,b,B,qa,la=!1,S=Date.now(),xa=0,ya=0,Fa=-1,Qa=0,Ra=0,q=Array(10),Ga=!1,L=!1,Pa=!1,Sa=!1,O,ia,x={yaw:0,pitch:0,hfov:0},Ta=!1,aa=!1,ab=0,Ua,$=0,wa,Ea,K={},T={},da=[],$a=!1,Va=!1,Wa={hfov:100,minHfov:50,maxHfov:120,pitch:0,minPitch:m,maxPitch:m,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,
autoRotateStopDelay:m,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],animationTimingFunction:function(a){return 0.5>a?2*a*a:-1+(4-2*a)*a},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",
fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",
unknownError:"Unknown error. Check developer console."}},Za=[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189];r="string"===typeof r?f.getElementById(r):r;r.classList.add("pnlm-container");r.tabIndex=0;var C=f.createElement("div");C.className="pnlm-ui";r.appendChild(C);var M=f.createElement("div");M.className="pnlm-render-container";r.appendChild(M);var H=f.createElement("div");H.className="pnlm-dragfix";C.appendChild(H);var ha=f.createElement("span");ha.className="pnlm-about-msg";ha.innerHTML=
'<a href="https://pannellum.org/" target="_blank">Pannellum</a> 2.4.0';C.appendChild(ha);H.addEventListener("contextmenu",X);var n={},Xa=f.createElement("div");Xa.className="pnlm-sprite pnlm-hot-spot-debug-indicator";C.appendChild(Xa);n.container=f.createElement("div");n.container.className="pnlm-panorama-info";n.title=f.createElement("div");n.title.className="pnlm-title-box";n.container.appendChild(n.title);n.author=f.createElement("div");n.author.className="pnlm-author-box";n.container.appendChild(n.author);
C.appendChild(n.container);n.load={};n.load.box=f.createElement("div");n.load.box.className="pnlm-load-box";n.load.boxp=f.createElement("p");n.load.box.appendChild(n.load.boxp);n.load.lbox=f.createElement("div");n.load.lbox.className="pnlm-lbox";n.load.lbox.innerHTML='<div class="pnlm-loading"></div>';n.load.box.appendChild(n.load.lbox);n.load.lbar=f.createElement("div");n.load.lbar.className="pnlm-lbar";n.load.lbarFill=f.createElement("div");n.load.lbarFill.className="pnlm-lbar-fill";n.load.lbar.appendChild(n.load.lbarFill);
n.load.box.appendChild(n.load.lbar);n.load.msg=f.createElement("p");n.load.msg.className="pnlm-lmsg";n.load.box.appendChild(n.load.msg);C.appendChild(n.load.box);n.errorMsg=f.createElement("div");n.errorMsg.className="pnlm-error-msg pnlm-info-box";C.appendChild(n.errorMsg);var w={};w.container=f.createElement("div");w.container.className="pnlm-controls-container";C.appendChild(w.container);w.load=f.createElement("div");w.load.className="pnlm-load-button";w.load.addEventListener("click",function(){t();
Q()});C.appendChild(w.load);w.zoom=f.createElement("div");w.zoom.className="pnlm-zoom-controls pnlm-controls";w.zoomIn=f.createElement("div");w.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control";w.zoomIn.addEventListener("click",function(){L&&(U(b.hfov-5),F())});w.zoom.appendChild(w.zoomIn);w.zoomOut=f.createElement("div");w.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control";w.zoomOut.addEventListener("click",function(){L&&(U(b.hfov+5),F())});w.zoom.appendChild(w.zoomOut);w.container.appendChild(w.zoom);
w.fullscreen=f.createElement("div");w.fullscreen.addEventListener("click",z);w.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control";(f.fullscreenEnabled||f.mozFullScreenEnabled||f.webkitFullscreenEnabled||f.msFullscreenEnabled)&&w.container.appendChild(w.fullscreen);w.orientation=f.createElement("div");w.orientation.addEventListener("click",function(a){aa?l():Ka()});w.orientation.addEventListener("mousedown",function(a){a.stopPropagation()});
w.orientation.addEventListener("touchstart",function(a){a.stopPropagation()});w.orientation.addEventListener("pointerdown",function(a){a.stopPropagation()});w.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var pa,Ya=!1;J.DeviceOrientationEvent?J.addEventListener("deviceorientation",Oa):pa=!1;var Ha=f.createElement("div");Ha.className="pnlm-compass pnlm-controls pnlm-control";C.appendChild(Ha);v.firstScene?g(v.firstScene):v.default&&
v.default.firstScene?g(v.default.firstScene):g(null);t(!0);var ma=[],Aa=[];Z.prototype.multiply=function(a){return new Z(this.w*a.w-this.x*a.x-this.y*a.y-this.z*a.z,this.x*a.w+this.w*a.x+this.y*a.z-this.z*a.y,this.y*a.w+this.w*a.y+this.z*a.x-this.x*a.z,this.z*a.w+this.w*a.z+this.x*a.y-this.y*a.x)};Z.prototype.toEulerAngles=function(){var a=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),b=Math.asin(2*(this.w*this.y-this.z*this.x)),c=Math.atan2(2*(this.w*this.z+this.x*
this.y),1-2*(this.y*this.y+this.z*this.z));return[a,b,c]};this.isLoaded=function(){return L};this.getPitch=function(){return b.pitch};this.setPitch=function(a,c,d,e){(c=c==m?1E3:Number(c))?K.pitch={startTime:Date.now(),startPosition:b.pitch,endPosition:a,duration:c,callback:d,callbackArgs:e}:b.pitch=a;F();return this};this.getPitchBounds=function(){return[b.minPitch,b.maxPitch]};this.setPitchBounds=function(a){b.minPitch=Math.max(-90,Math.min(a[0],90));b.maxPitch=Math.max(-90,Math.min(a[1],90));return this};
this.getYaw=function(){return b.yaw};this.setYaw=function(a,c,d,e){c=c==m?1E3:Number(c);a=(a+180)%360-180;c?(180<b.yaw-a?a+=360:180<a-b.yaw&&(a-=360),K.yaw={startTime:Date.now(),startPosition:b.yaw,endPosition:a,duration:c,callback:d,callbackArgs:e}):b.yaw=a;F();return this};this.getYawBounds=function(){return[b.minYaw,b.maxYaw]};this.setYawBounds=function(a){b.minYaw=Math.max(-180,Math.min(a[0],180));b.maxYaw=Math.max(-180,Math.min(a[1],180));return this};this.getHfov=function(){return b.hfov};this.setHfov=
function(a,c,d,e){(c=c==m?1E3:Number(c))?K.hfov={startTime:Date.now(),startPosition:b.hfov,endPosition:E(a),duration:c,callback:d,callbackArgs:e}:U(a);F();return this};this.getHfovBounds=function(){return[b.minHfov,b.maxHfov]};this.setHfovBounds=function(a){b.minHfov=Math.max(0,a[0]);b.maxHfov=Math.max(0,a[1]);return this};this.lookAt=function(a,b,c,d,e,f){d=d==m?1E3:Number(d);a!==m&&(this.setPitch(a,d,e,f),e=m);b!==m&&(this.setYaw(b,d,e,f),e=m);c!==m&&this.setHfov(c,d,e,f);return this};this.getNorthOffset=
function(){return b.northOffset};this.setNorthOffset=function(a){b.northOffset=Math.min(360,Math.max(0,a));F();return this};this.getHorizonRoll=function(){return b.horizonRoll};this.setHorizonRoll=function(a){b.horizonRoll=Math.min(90,Math.max(-90,a));B.setPose(b.horizonPitch*Math.PI/180,b.horizonRoll*Math.PI/180);F();return this};this.getHorizonPitch=function(){return b.horizonPitch};this.setHorizonPitch=function(a){b.horizonPitch=Math.min(90,Math.max(-90,a));B.setPose(b.horizonPitch*Math.PI/180,
b.horizonRoll*Math.PI/180);F();return this};this.startAutoRotate=function(a){a=a||$||1;b.autoRotate=a;za.lookAt(Ea,m,wa,3E3);F();return this};this.stopAutoRotate=function(){$=b.autoRotate?b.autoRotate:$;b.autoRotate=!1;b.autoRotateInactivityDelay=-1;return this};this.getRenderer=function(){return B};this.setUpdate=function(a){$a=!0===a;B===m?P():F();return this};this.mouseEventToCoords=function(a){return sa(a)};this.loadScene=function(a,b,c,d){L&&I(a,b,c,d);return this};this.getScene=function(){return b.scene};
this.addScene=function(a,b){v.scenes[a]=b;return this};this.removeScene=function(a){if(b.scene===a||!v.scenes.hasOwnProperty(a))return!1;delete v.scenes[a];return!0};this.toggleFullscreen=function(){z();return this};this.getConfig=function(){return b};this.getContainer=function(){return r};this.addHotSpot=function(a,d){if(d===m&&b.scene===m)b.hotSpots.push(a);else{var e=d!==m?d:b.scene;if(v.scenes.hasOwnProperty(e))v.scenes[e].hasOwnProperty("hotSpots")||(v.scenes[e].hotSpots=[],e==b.scene&&(b.hotSpots=
v.scenes[e].hotSpots)),v.scenes[e].hotSpots.push(a);else throw"Invalid scene ID!";}if(d===m||b.scene==d)Ia(a),L&&c(a);return this};this.removeHotSpot=function(a){if(!b.hotSpots)return!1;for(var c=0;c<b.hotSpots.length;c++)if(b.hotSpots[c].hasOwnProperty("id")&&b.hotSpots[c].id===a){for(a=b.hotSpots[c].div;a.parentNode!=M;)a=a.parentNode;M.removeChild(a);delete b.hotSpots[c].div;b.hotSpots.splice(c,1);return!0}return!1};this.resize=function(){y()};this.isLoaded=function(){return L};this.isOrientationSupported=
function(){return pa||!1};this.stopOrientation=function(){l()};this.startOrientation=function(){pa&&Ka()};this.isOrientationActive=function(){return Boolean(aa)};this.on=function(a,b){T[a]=T[a]||[];T[a].push(b);return this};this.off=function(a,b){if(!a)return T={},this;if(b){var c=T[a].indexOf(b);0<=c&&T[a].splice(c,1);0==T[a].length&&delete T[a]}else delete T[a];return this};this.destroy=function(){B&&B.destroy();Sa&&(H.removeEventListener("mousedown",Ca,!1),H.removeEventListener("dblclick",ra,!1),
f.removeEventListener("mousemove",La,!1),f.removeEventListener("mouseup",ea,!1),r.removeEventListener("mousewheel",na,!1),r.removeEventListener("DOMMouseScroll",na,!1),r.removeEventListener("mozfullscreenchange",y,!1),r.removeEventListener("webkitfullscreenchange",y,!1),r.removeEventListener("msfullscreenchange",y,!1),r.removeEventListener("fullscreenchange",y,!1),J.removeEventListener("resize",ka,!1),J.removeEventListener("orientationchange",ka,!1),r.removeEventListener("keydown",R,!1),r.removeEventListener("keyup",
fa,!1),r.removeEventListener("blur",ua,!1),f.removeEventListener("mouseleave",ea,!1),H.removeEventListener("touchstart",ta,!1),H.removeEventListener("touchmove",A,!1),H.removeEventListener("touchend",d,!1),H.removeEventListener("pointerdown",a,!1),H.removeEventListener("pointermove",V,!1),H.removeEventListener("pointerup",N,!1),H.removeEventListener("pointerleave",N,!1));r.innerHTML="";r.classList.remove("pnlm-container");C.classList.remove("pnlm-grab");C.classList.remove("pnlm-grabbing")}}return{viewer:function(f,
m){return new Ba(f,m)}}}(window,document);
;
(function($){var panorama=$('#panorama');if(panorama.length>0){var url=panorama.data('src');if(window.matchMedia(panorama.data('mobile-breakpoint')))url=panorama.data('src-mobile');pannellum.viewer('panorama',{"default":{sceneFadeDuration:500,autoLoad:true},type:"equirectangular",panorama:url})}})(jQuery);
(function($,Drupal){Drupal.behaviors.dialog={attach:function attach(context,settings){var $context=$(context);if(!$('#drupal-modal').length)$('<div id="drupal-modal" class="ui-front"></div>').hide().appendTo('body');var $dialog=$context.closest('.ui-dialog-content');if($dialog.length){if($dialog.dialog('option','drupalAutoButtons'))$dialog.trigger('dialogButtonsChange');$dialog.dialog('widget').trigger('focus')};var originalClose=settings.dialog.close;settings.dialog.close=function(event){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];originalClose.apply(settings.dialog,[event].concat(args));$(event.target).remove()}},prepareDialogButtons:function prepareDialogButtons($dialog){var buttons=[],$buttons=$dialog.find('.form-actions input[type=submit], .form-actions a.button');$buttons.each(function(){var $originalButton=$(this).css({display:'none'});buttons.push({text:$originalButton.html()||$originalButton.attr('value'),class:$originalButton.attr('class'),click:function click(e){if($originalButton.is('a')){$originalButton[0].click()}else{$originalButton.trigger('mousedown').trigger('mouseup').trigger('click');e.preventDefault()}}})});return buttons}};Drupal.AjaxCommands.prototype.openDialog=function(ajax,response,status){if(!response.selector)return false;var $dialog=$(response.selector);if(!$dialog.length)$dialog=$("<div id=\"".concat(response.selector.replace(/^#/,''),"\" class=\"ui-front\"></div>")).appendTo('body');if(!ajax.wrapper)ajax.wrapper=$dialog.attr('id');response.command='insert';response.method='html';ajax.commands.insert(ajax,response,status);if(!response.dialogOptions.buttons){response.dialogOptions.drupalAutoButtons=true;response.dialogOptions.buttons=Drupal.behaviors.dialog.prepareDialogButtons($dialog)};$dialog.on('dialogButtonsChange',function(){var buttons=Drupal.behaviors.dialog.prepareDialogButtons($dialog);$dialog.dialog('option','buttons',buttons)});response.dialogOptions=response.dialogOptions||{};var dialog=Drupal.dialog($dialog.get(0),response.dialogOptions);if(response.dialogOptions.modal){dialog.showModal()}else dialog.show();$dialog.parent().find('.ui-dialog-buttonset').addClass('form-actions')};Drupal.AjaxCommands.prototype.closeDialog=function(ajax,response,status){var $dialog=$(response.selector);if($dialog.length){Drupal.dialog($dialog.get(0)).close();if(!response.persist)$dialog.remove()};$dialog.off('dialogButtonsChange')};Drupal.AjaxCommands.prototype.setDialogOption=function(ajax,response,status){var $dialog=$(response.selector);if($dialog.length)$dialog.dialog('option',response.optionName,response.optionValue)};$(window).on('dialog:aftercreate',function(e,dialog,$element,settings){$element.on('click.dialog','.dialog-cancel',function(e){dialog.close('cancel');e.preventDefault();e.stopPropagation()})});$(window).on('dialog:beforeclose',function(e,dialog,$element){$element.off('.dialog')})})(jQuery,Drupal);
(function($,Drupal,Bootstrap){Drupal.behaviors.dialog.ajaxCurrentButton=null;Drupal.behaviors.dialog.ajaxOriginalButton=null;var success=Drupal.Ajax.prototype.success;Drupal.Ajax.prototype.success=function(response,status){if(this.dialogType)for(var i=0,l=response.length;i<l;i++)if(response[i].dialogOptions){response[i].dialogType=response[i].dialogOptions.dialogType=this.dialogType;response[i].$trigger=response[i].dialogOptions.$trigger=$(this.element)};return success.apply(this,[response,status])};var beforeSerialize=Drupal.Ajax.prototype.beforeSerialize;Drupal.Ajax.prototype.beforeSerialize=function(element,options){if(this.dialogType){options.data['ajax_page_state[dialogType]']=this.dialogType;var id=$(this.element).parents('.js-drupal-dialog:first').attr('id');if(id)options.data['ajax_page_state[dialogId]']=id};return beforeSerialize.apply(this,arguments)};Drupal.behaviors.dialog.ajaxUpdateButtons=function(reset){if(this.ajaxCurrentButton&&this.ajaxOriginalButton){this.ajaxCurrentButton.html(this.ajaxOriginalButton.html());this.ajaxCurrentButton.prop('disabled',this.ajaxOriginalButton.prop('disabled'))};if(reset){this.ajaxCurrentButton=null;this.ajaxOriginalButton=null}};$(document).ajaxSend(function(){Drupal.behaviors.dialog.ajaxUpdateButtons()}).ajaxComplete(function(){Drupal.behaviors.dialog.ajaxUpdateButtons(true)});Drupal.behaviors.dialog.prepareDialogButtons=function prepareDialogButtons($dialog){var _this=this,buttons=[],$buttons=$dialog.find('.form-actions').find('button, input[type=submit], a.button, .btn');$buttons.each(function(){var $originalButton=$(this).attr('tabindex',-1).css({display:'block',width:0,height:0,padding:0,border:0,overflow:'hidden'});buttons.push({text:Bootstrap.stripHtml($originalButton),class:$originalButton.attr('class').replace('use-ajax-submit',''),click:function click(e){e.preventDefault();e.stopPropagation();_this.ajaxCurrentButton=$(e.target);_this.ajaxOriginalButton=$originalButton;Bootstrap.simulate($originalButton,['mousedown','mouseup','click'])},create:function(){_this.ajaxCurrentButton=$(this);_this.ajaxOriginalButton=$originalButton;_this.ajaxUpdateButtons(true)}})});return buttons}})(window.jQuery,window.Drupal,window.Drupal.bootstrap);
(function($,Drupal,drupalSettings){'use strict';Drupal.extlink=Drupal.extlink||{};Drupal.extlink.attach=function(context,drupalSettings){if(typeof drupalSettings.data==='undefined'||!drupalSettings.data.hasOwnProperty('extlink'))return;var extIconPlacement='append';if(drupalSettings.data.extlink.extIconPlacement&&drupalSettings.data.extlink.extIconPlacement!='0')extIconPlacement=drupalSettings.data.extlink.extIconPlacement;var pattern=/^(([^\/:]+?\.)*)([^\.:]{1,})((\.[a-z0-9]{1,253})*)(:[0-9]{1,5})?$/,host=window.location.host.replace(pattern,'$2$3$6'),subdomain=window.location.host.replace(host,''),subdomains;if(drupalSettings.data.extlink.extSubdomains){subdomains='([^/]*\\.)?'}else if(subdomain==='www.'||subdomain===''){subdomains='(www\\.)?'}else subdomains=subdomain.replace('.','\\.');var whitelistedDomains=false;if(drupalSettings.data.extlink.whitelistedDomains){whitelistedDomains=[];for(var i=0;i<drupalSettings.data.extlink.whitelistedDomains.length;i++)whitelistedDomains.push(new RegExp('^https?:\\/\\/'+drupalSettings.data.extlink.whitelistedDomains[i].replace(/(\r\n|\n|\r)/gm,'')+'.*$','i'))};var internal_link=new RegExp('^https?://([^@]*@)?'+subdomains+host,'i'),extInclude=false;if(drupalSettings.data.extlink.extInclude)extInclude=new RegExp(drupalSettings.data.extlink.extInclude.replace(/\\/,'\\'),'i');var extExclude=false;if(drupalSettings.data.extlink.extExclude)extExclude=new RegExp(drupalSettings.data.extlink.extExclude.replace(/\\/,'\\'),'i');var extCssExclude=false;if(drupalSettings.data.extlink.extCssExclude)extCssExclude=drupalSettings.data.extlink.extCssExclude;var extCssExplicit=false;if(drupalSettings.data.extlink.extCssExplicit)extCssExplicit=drupalSettings.data.extlink.extCssExplicit;var external_links=[],mailto_links=[];$('a:not([data-extlink]), area:not([data-extlink])',context).each(function(el){try{var url='';if(typeof this.href=='string'){url=this.href.toLowerCase()}else if(typeof this.href=='object')url=this.href.baseVal;if(url.indexOf('http')===0&&((!internal_link.test(url)&&!(extExclude&&extExclude.test(url)))||(extInclude&&extInclude.test(url)))&&!(extCssExclude&&$(this).is(extCssExclude))&&!(extCssExclude&&$(this).parents(extCssExclude).length>0)&&!(extCssExplicit&&$(this).parents(extCssExplicit).length<1)){var match=false;if(whitelistedDomains)for(var i=0;i<whitelistedDomains.length;i++)if(whitelistedDomains[i].test(url)){match=true;break};if(!match)external_links.push(this)}else if(this.tagName!=='AREA'&&url.indexOf('mailto:')===0&&!(extCssExclude&&$(this).parents(extCssExclude).length>0)&&!(extCssExplicit&&$(this).parents(extCssExplicit).length<1))mailto_links.push(this)}catch(error){return false}});if(drupalSettings.data.extlink.extClass!=='0'&&drupalSettings.data.extlink.extClass!=='')Drupal.extlink.applyClassAndSpan(external_links,drupalSettings.data.extlink.extClass,extIconPlacement);if(drupalSettings.data.extlink.mailtoClass!=='0'&&drupalSettings.data.extlink.mailtoClass!=='')Drupal.extlink.applyClassAndSpan(mailto_links,drupalSettings.data.extlink.mailtoClass,extIconPlacement);if(drupalSettings.data.extlink.extTarget){$(external_links).filter(function(){return!(drupalSettings.data.extlink.extTargetNoOverride&&$(this).is('a[target]'))}).attr({target:'_blank'});$(external_links).attr('rel',function(i,val){if(val===null||typeof val==='undefined')return'noopener';if(val.indexOf('noopener')>-1){if(val.indexOf('noopener')===-1){return val+' noopener'}else return val}else return val+' noopener'})};if(drupalSettings.data.extlink.extNofollow)$(external_links).attr('rel',function(i,val){if(val===null||typeof val==='undefined')return'nofollow';var target='nofollow';if(drupalSettings.data.extlink.extFollowNoOverride)target='follow';if(val.indexOf(target)===-1)return val+' nofollow';return val});if(drupalSettings.data.extlink.extNoreferrer)$(external_links).attr('rel',function(i,val){if(val===null||typeof val==='undefined')return'noreferrer';if(val.indexOf('noreferrer')===-1)return val+' noreferrer';return val});Drupal.extlink=Drupal.extlink||{};Drupal.extlink.popupClickHandler=Drupal.extlink.popupClickHandler||function(){if(drupalSettings.data.extlink.extAlert)return confirm(drupalSettings.data.extlink.extAlertText)};$(external_links).off("click.extlink");$(external_links).on("click.extlink",function(e){return Drupal.extlink.popupClickHandler(e,this)})};Drupal.extlink.applyClassAndSpan=function(links,class_name,icon_placement){var $links_to_process;if(drupalSettings.data.extlink.extImgClass){$links_to_process=$(links)}else{var links_with_images=$(links).find('img, svg').parents('a');$links_to_process=$(links).not(links_with_images)};if(class_name!=='0')$links_to_process.addClass(class_name);$links_to_process.attr('data-extlink','');var i,length=$links_to_process.length;for(i=0;i<length;i++){var $link=$($links_to_process[i]);if(drupalSettings.data.extlink.extUseFontAwesome){if(class_name===drupalSettings.data.extlink.mailtoClass){$link[icon_placement]('<span class="fa-'+class_name+' extlink"><span class="'+drupalSettings.data.extlink.extFaMailtoClasses+'" aria-label="'+drupalSettings.data.extlink.mailtoLabel+'"></span></span>')}else $link[icon_placement]('<span class="fa-'+class_name+' extlink"><span class="'+drupalSettings.data.extlink.extFaLinkClasses+'" aria-label="'+drupalSettings.data.extlink.extLabel+'"></span></span>')}else if(class_name===drupalSettings.data.extlink.mailtoClass){$link[icon_placement]('<svg focusable="false" class="'+class_name+'" role="img" aria-label="'+drupalSettings.data.extlink.mailtoLabel+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 10 70 20"><metadata><sfw xmlns="http://ns.adobe.com/SaveForWeb/1.0/"><sliceSourceBounds y="-8160" x="-8165" width="16389" height="16384" bottomLeftOrigin="true"/><optimizationSettings><targetSettings targetSettingsID="0" fileFormat="PNG24Format"><PNG24Format transparency="true" filtered="false" interlaced="false" noMatteColor="false" matteColor="#FFFFFF"/></targetSettings></optimizationSettings></sfw></metadata><title>'+drupalSettings.data.extlink.mailtoLabel+'</title><path d="M56 14H8c-1.1 0-2 0.9-2 2v32c0 1.1 0.9 2 2 2h48c1.1 0 2-0.9 2-2V16C58 14.9 57.1 14 56 14zM50.5 18L32 33.4 13.5 18H50.5zM10 46V20.3l20.7 17.3C31.1 37.8 31.5 38 32 38s0.9-0.2 1.3-0.5L54 20.3V46H10z"/></svg>')}else $link[icon_placement]('<svg focusable="false" class="'+class_name+'" role="img" aria-label="'+drupalSettings.data.extlink.extLabel+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><metadata><sfw xmlns="http://ns.adobe.com/SaveForWeb/1.0/"><sliceSourceBounds y="-8160" x="-8165" width="16389" height="16384" bottomLeftOrigin="true"/><optimizationSettings><targetSettings targetSettingsID="0" fileFormat="PNG24Format"><PNG24Format transparency="true" filtered="false" interlaced="false" noMatteColor="false" matteColor="#FFFFFF"/></targetSettings></optimizationSettings></sfw></metadata><title>'+drupalSettings.data.extlink.extLabel+'</title><path d="M48 26c-1.1 0-2 0.9-2 2v26H10V18h26c1.1 0 2-0.9 2-2s-0.9-2-2-2H8c-1.1 0-2 0.9-2 2v40c0 1.1 0.9 2 2 2h40c1.1 0 2-0.9 2-2V28C50 26.9 49.1 26 48 26z"/><path d="M56 6H44c-1.1 0-2 0.9-2 2s0.9 2 2 2h7.2L30.6 30.6c-0.8 0.8-0.8 2 0 2.8C31 33.8 31.5 34 32 34s1-0.2 1.4-0.6L54 12.8V20c0 1.1 0.9 2 2 2s2-0.9 2-2V8C58 6.9 57.1 6 56 6z"/></svg>')}};Drupal.behaviors.extlink=Drupal.behaviors.extlink||{};Drupal.behaviors.extlink.attach=function(context,drupalSettings){if(typeof extlinkAttach==='function'){extlinkAttach(context)}else Drupal.extlink.attach(context,drupalSettings)}})(jQuery,Drupal,drupalSettings);
var Drupal=Drupal||{};(function($,Drupal,Bootstrap){"use strict";var $document=$(document);Bootstrap.extendPlugin('popover',function(settings){return{DEFAULTS:{animation:!!settings.popover_animation,autoClose:!!settings.popover_auto_close,enabled:settings.popover_enabled,html:!!settings.popover_html,placement:settings.popover_placement,selector:settings.popover_selector,trigger:settings.popover_trigger,title:settings.popover_title,content:settings.popover_content,delay:parseInt(settings.popover_delay,10),container:settings.popover_container}}});Drupal.behaviors.bootstrapPopovers={$activePopover:null,attach:function(context){if(!$.fn.popover||!$.fn.popover.Constructor.DEFAULTS.enabled)return;var _this=this;$document.on('show.bs.popover','[data-toggle=popover]',function(){var $trigger=$(this),popover=$trigger.data('bs.popover');if(popover.options.originalTrigger==='click'){if(_this.$activePopover&&_this.getOption('autoClose')&&!_this.$activePopover.is($trigger))_this.$activePopover.popover('hide');_this.$activePopover=$trigger}}).on('focus.bs.popover',':visible',function(e){var $target=$(e.target);if(_this.$activePopover&&_this.getOption('autoClose')&&!_this.$activePopover.is($target)&&!$target.closest('.popover.in')[0]){_this.$activePopover.popover('hide');_this.$activePopover=null}}).on('click.bs.popover',function(e){var $target=$(e.target);if(_this.$activePopover&&_this.getOption('autoClose')&&!$target.is('[data-toggle=popover]')&&!$target.closest('.popover.in')[0]){_this.$activePopover.popover('hide');_this.$activePopover=null}}).on('keyup.bs.popover',function(e){if(_this.$activePopover&&_this.getOption('autoClose')&&e.which===27){_this.$activePopover.popover('hide');_this.$activePopover=null}});var elements=$(context).find('[data-toggle=popover]').toArray();for(var i=0;i<elements.length;i++){var $element=$(elements[i]),options=$.extend({},$.fn.popover.Constructor.DEFAULTS,$element.data());options.originalTrigger=options.trigger;if(options.trigger==='click')options.trigger='manual';var target=options.target||$element.is('a[href^="#"]')&&$element.attr('href'),$target=$document.find(target).clone();if(!options.content&&$target[0]){$target.removeClass('visually-hidden hidden').removeAttr('aria-hidden');options.content=$target.wrap('<div/>').parent()[options.html?'html':'text']()||''};$element.popover(options);if(options.originalTrigger==='click')$element.off('click.drupal.bootstrap.popover').on('click.drupal.bootstrap.popover',function(e){$(this).popover('toggle');e.preventDefault();e.stopPropagation()})}},detach:function(context){if(!$.fn.popover||!$.fn.popover.Constructor.DEFAULTS.enabled)return;$(context).find('[data-toggle="popover"]').off('click.drupal.bootstrap.popover').popover('destroy')},getOption:function(name,defaultValue,element){var $element=element?$(element):this.$activePopover,options=$.extend(true,{},$.fn.popover.Constructor.DEFAULTS,($element&&$element.data('bs.popover')||{}).options);if(options[name]!==void(0))return options[name];return defaultValue!==void(0)?defaultValue:void(0)}}})(window.jQuery,window.Drupal,window.Drupal.bootstrap);
var Drupal=Drupal||{};(function($,Drupal,Bootstrap){"use strict";Bootstrap.extendPlugin('tooltip',function(settings){return{DEFAULTS:{animation:!!settings.tooltip_animation,enabled:settings.tooltip_enabled,html:!!settings.tooltip_html,placement:settings.tooltip_placement,selector:settings.tooltip_selector,trigger:settings.tooltip_trigger,delay:parseInt(settings.tooltip_delay,10),container:settings.tooltip_container}}});Drupal.behaviors.bootstrapTooltips={attach:function(context){if(!$.fn.tooltip||!$.fn.tooltip.Constructor.DEFAULTS.enabled)return;var elements=$(context).find('[data-toggle="tooltip"]').toArray();for(var i=0;i<elements.length;i++){var $element=$(elements[i]),options=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,$element.data());$element.tooltip(options)}},detach:function(context){if(!$.fn.tooltip||!$.fn.tooltip.Constructor.DEFAULTS.enabled)return;$(context).find('[data-toggle="tooltip"]').tooltip('destroy')}}})(window.jQuery,window.Drupal,window.Drupal.bootstrap);
(function($,Drupal,drupalSettings){var ids=[];Drupal.behaviors.copyFieldValue={attach:function attach(context){Object.keys(drupalSettings.copyFieldValue||{}).forEach(function(element){ids.push(element)});if(ids.length){$(once('copy-field-values','body')).on('value:copy',this.valueTargetCopyHandler);$(once('copy-field-values',"#".concat(ids.join(', #')))).on('blur',this.valueSourceBlurHandler)}},detach:function detach(context,settings,trigger){if(trigger==='unload'&&ids.length){$(once.remove('copy-field-values','body')).off('value:copy');$(once.remove('copy-field-values',"#".concat(ids.join(', #')))).off('blur')}},valueTargetCopyHandler:function valueTargetCopyHandler(e,value){var target=e.target;if(target.value==='')target.value=value},valueSourceBlurHandler:function valueSourceBlurHandler(e){var value=e.target.value,targetIds=drupalSettings.copyFieldValue[e.target.id];$("#".concat(targetIds.join(', #'))).trigger('value:copy',value)}}})(jQuery,Drupal,drupalSettings);
(function($){Drupal.behaviors.video_embed_field_lazyLoad={attach:function(context,settings){$('.video-embed-field-lazy',context).once().click(function(e){e.preventDefault();var $el=$(this);$el.html($el.data('video-embed-field-lazy'))})}}})(jQuery);
jQuery(document).ready(function($){$('.paragraph--type--segment-picture-video .video-wrapper').each(function(index,element){var videoWrapper=$(element),isAutoplayAllowed=true;if($('body').hasClass('android')||$('body').hasClass('iphone')||$('body').hasClass('ipad')||$('body').hasClass('windows-phone'))isAutoplayAllowed=false;console.log(isAutoplayAllowed);if(videoWrapper.children('.field--name-field-segment-video-fb-media-pic').length>0&&videoWrapper.children('.field--name-field-segment-video-embed').length>0){if(isAutoplayAllowed){videoWrapper.children('.icon-player').click(function(e){$(this).siblings('.field--name-field-segment-video-fb-media-pic').trigger('click')});videoWrapper.children('.field--name-field-segment-video-fb-media-pic').click(function(e){$(this).hide();$(this).siblings('.icon-player').hide();$(this).siblings('.field--name-field-segment-video-embed').children('.video-embed-field-lazy').trigger('click');$(this).siblings('.field--name-field-segment-video-embed').fadeIn()})}else{videoWrapper.children('.field--name-field-segment-video-embed').show();videoWrapper.children('.field--name-field-segment-video-fb-media-pic').fadeOut();videoWrapper.children('.icon-player').fadeOut();videoWrapper.children('.field--name-field-segment-video-embed').children('.video-embed-field-lazy').trigger('click')}}else if(videoWrapper.children('.field--name-field-segment-video-embed').length>0)if(isAutoplayAllowed){videoWrapper.children('.field--name-field-segment-video-embed').show();videoWrapper.children('.icon-player').click(function(e){$(this).hide();$(this).siblings('.field--name-field-segment-video-embed').children('.video-embed-field-lazy').trigger('click')});videoWrapper.children('.field--name-field-segment-video-embed').click(function(e){$(this).siblings('.icon-player').hide()})}else{videoWrapper.children('.field--name-field-segment-video-embed').show();videoWrapper.children('.icon-player').fadeOut();videoWrapper.children('.field--name-field-segment-video-embed').children('.video-embed-field-lazy').trigger('click')}})});
var CountUp=function(target,startVal,endVal,decimals,duration,options){var self=this;self.version=function(){return'1.9.3'};self.options={useEasing:true,useGrouping:true,separator:',',decimal:'.',easingFn:easeOutExpo,formattingFn:formatNumber,prefix:'',suffix:'',numerals:[]};if(options&&typeof options==='object')for(var key in self.options)if(options.hasOwnProperty(key)&&options[key]!==null)self.options[key]=options[key];if(self.options.separator===''){self.options.useGrouping=false}else self.options.separator=''+self.options.separator;var lastTime=0,vendors=['webkit','moz','ms','o'];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+'RequestAnimationFrame'];window.cancelAnimationFrame=window[vendors[x]+'CancelAnimationFrame']||window[vendors[x]+'CancelRequestAnimationFrame']};if(!window.requestAnimationFrame)window.requestAnimationFrame=function(callback,element){var currTime=new Date().getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(id){clearTimeout(id)}
function formatNumber(num){var neg=(num<0),x,x1,x2,x3,i,len;num=Math.abs(num).toFixed(self.decimals);num+='';x=num.split('.');x1=x[0];x2=x.length>1?self.options.decimal+x[1]:'';if(self.options.useGrouping){x3='';for(i=0,len=x1.length;i<len;++i){if(i!==0&&((i%3)===0))x3=self.options.separator+x3;x3=x1[len-i-1]+x3};x1=x3};if(self.options.numerals.length){x1=x1.replace(/[0-9]/g,function(w){return self.options.numerals[+w]});x2=x2.replace(/[0-9]/g,function(w){return self.options.numerals[+w]})};return(neg?'-':'')+self.options.prefix+x1+x2+self.options.suffix}
function easeOutExpo(t,b,c,d){return c*(-Math.pow(2,-10*t/d)+1)*1024/1023+b}
function ensureNumber(n){return(typeof n==='number'&&!isNaN(n))};self.initialize=function(){if(self.initialized)return true;self.error='';self.d=(typeof target==='string')?document.getElementById(target):target;if(!self.d){self.error='[CountUp] target is null or undefined';return false};self.startVal=Number(startVal);self.endVal=Number(endVal);if(ensureNumber(self.startVal)&&ensureNumber(self.endVal)){self.decimals=Math.max(0,decimals||0);self.dec=Math.pow(10,self.decimals);self.duration=Number(duration)*1e3||2e3;self.countDown=(self.startVal>self.endVal);self.frameVal=self.startVal;self.initialized=true;return true}else{self.error='[CountUp] startVal ('+startVal+') or endVal ('+endVal+') is not a number';return false}};self.printValue=function(value){var result=self.options.formattingFn(value);if(self.d.tagName==='INPUT'){this.d.value=result}else if(self.d.tagName==='text'||self.d.tagName==='tspan'){this.d.textContent=result}else this.d.innerHTML=result};self.count=function(timestamp){if(!self.startTime)self.startTime=timestamp;self.timestamp=timestamp;var progress=timestamp-self.startTime;self.remaining=self.duration-progress;if(self.options.useEasing){if(self.countDown){self.frameVal=self.startVal-self.options.easingFn(progress,0,self.startVal-self.endVal,self.duration)}else self.frameVal=self.options.easingFn(progress,self.startVal,self.endVal-self.startVal,self.duration)}else if(self.countDown){self.frameVal=self.startVal-((self.startVal-self.endVal)*(progress/self.duration))}else self.frameVal=self.startVal+(self.endVal-self.startVal)*(progress/self.duration);if(self.countDown){self.frameVal=(self.frameVal<self.endVal)?self.endVal:self.frameVal}else self.frameVal=(self.frameVal>self.endVal)?self.endVal:self.frameVal;self.frameVal=Math.round(self.frameVal*self.dec)/self.dec;self.printValue(self.frameVal);if(progress<self.duration){self.rAF=requestAnimationFrame(self.count)}else if(self.callback)self.callback()};self.start=function(callback){if(!self.initialize())return;self.callback=callback;self.rAF=requestAnimationFrame(self.count)};self.pauseResume=function(){if(!self.paused){self.paused=true;cancelAnimationFrame(self.rAF)}else{self.paused=false;delete self.startTime;self.duration=self.remaining;self.startVal=self.frameVal;requestAnimationFrame(self.count)}};self.reset=function(){self.paused=false;delete self.startTime;self.initialized=false;if(self.initialize()){cancelAnimationFrame(self.rAF);self.printValue(self.startVal)}};self.update=function(newEndVal){if(!self.initialize())return;newEndVal=Number(newEndVal);if(!ensureNumber(newEndVal)){self.error='[CountUp] update() - new endVal is not a number: '+newEndVal;return};self.error='';if(newEndVal===self.frameVal)return;cancelAnimationFrame(self.rAF);self.paused=false;delete self.startTime;self.startVal=self.frameVal;self.endVal=newEndVal;self.countDown=(self.startVal>self.endVal);self.rAF=requestAnimationFrame(self.count)};if(self.initialize())self.printValue(self.startVal)};
(function($){$(window).on("load",function(){$(document).rollerInit()});['load','scroll','resize'].forEach(function(e){window.addEventListener(e,function(){$('.numscroller').each(function(){var id=$(this).attr('data-slno'),elm=document.getElementById('slno-'+id);if(checkVisible(elm)){numberRoller($(this).attr('data-slno'));$(this).removeClass('numscroller')}})})});$.fn.rollerInit=function(){var i=0;$('.numscroller').each(function(){i++;$(this).attr('data-slno',i);$(this).attr('id','slno-'+i);$(this).addClass("roller-title-number-"+i)})}
function countDecimals(value){if(Math.floor(value)==value)return 0;return value.toString().split(".")[1].length||0}
function numberRoller(slno){var min=$('.roller-title-number-'+slno).attr('data-min'),max=$('.roller-title-number-'+slno).attr('data-max'),decimals=countDecimals(max),format=$('.roller-title-number-'+slno).attr('data-format');if('fr'==format){var separator=' ',decimal=','}else if('year'==format){var separator='',decimal=''}else{var separator=',',decimal='.'};var prefix=$('.roller-title-number-'+slno).attr('data-prefix'),suffix=$('.roller-title-number-'+slno).attr('data-suffix'),options={useEasing:true,useGrouping:true,separator:separator,decimal:decimal,prefix:prefix,suffix:suffix},counter=new CountUp('slno-'+slno,min,max,decimals,1,options);if(!counter.error){counter.start()}else console.error(counter.error)}
function checkVisible(elm){var rect=elm.getBoundingClientRect(),viewHeight=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(rect.bottom<0||rect.top-viewHeight>=0)}})(jQuery);
// RG-TRV-HD-00
var MOBILE_MAX_SIZE = 1199;

/**
 * Function for show countries block
 * @param $
 */
var showContries = function ($) {
  $('#block-countryblock').fadeIn();
};


var viewportWidth = function () {
  return Math.max(document.documentElement.clientWidth, window.innerWidth);
}

var toucheEvent = 'click';
if ("ontouchstart" in document.documentElement) {
  toucheEvent = 'touchend';
}

/**
 * Function for hide countries block
 * @param $
 */
var hideContries = function ($) {
  $('#block-countryblock').hide();
};

var addMobileCaret = function ($) {
  if (viewportWidth() <= MOBILE_MAX_SIZE) {
    if ($('.menu--main').find('.mobile-caret').length == 0) {
      $('a.first-level').after('<span class="mobile-caret initial icon-arrow-right"></span>');
      $('a.second-level-mobile').after('<span class="mobilecaretsecond icon-arrow-right"></span>');
    }

  }
  else {
    $('.mobile-caret').remove();
    $('.mobilecaretsecond').remove();
  }
};

var skipMenuAnimation = function ($) {
  $('.resize-align').addClass('skip-animation');
}

var findParent = function ($that) {
  parent = $that.parent('li');
  return parent;
};

var initMobileBehavior = function ($, $d) {
  //Don't play animation if the page is loaded on mobile
  if (viewportWidth() <= MOBILE_MAX_SIZE) {
    skipMenuAnimation($);
  }
  var currentLevel = 1;
  var openMobile = false;
  $('.navbar-toggle').click(function () {
    if (viewportWidth() <= MOBILE_MAX_SIZE) {
      if (!openMobile) {
        $('header').addClass('full-height');
        $('body').addClass('overflow-hidden');
        openMobile = true;
      }
      else {
        $('header').removeClass('full-height');
        $('body').removeClass('overflow-hidden');
        openMobile = false;
      }
    }
  });


  $d.on('.mobile-caret-return a', toucheEvent, function (e) {
    if (viewportWidth() <= MOBILE_MAX_SIZE) {
      e.preventDefault();
    }
  });

  if (viewportWidth() <= MOBILE_MAX_SIZE) {
    if ($('.dropdown-menu.language-dropdown li').length <= 0) {
      $('.right-nav-part .icon-arrow-down1').hide();
    }
  }

  $d.on(toucheEvent, '.mobile-caret', function (event) {
    if (viewportWidth() <= MOBILE_MAX_SIZE) {
      currentLevel = 2;
      $('.mobile-submenu-container').fadeIn();
      $('.navbar-collapse .region-navigation-collapsible').hide();
      var parent = findParent($(this)).clone().addClass('mobile-caret-return icon-arrow-validate');
      $('.mobile-submenu-container .for-level-2 ul').html($(this).parent().children('ul').html());
      $('.mobile-submenu-container .for-level-2 ul li:eq(0)').before(parent);
      $('.mobile-submenu-container .for-level-2').fadeIn();
      event.stopPropagation()
    }
  });

  $d.on(toucheEvent, '.for-level-2>ul>li:not(.mobile-caret-return):not(.country-item)', function (e) {
    if (viewportWidth() > MOBILE_MAX_SIZE) {
      return;
    }

    let linkElement = null,
      showSubMenu = function (li) {
        currentLevel = 3;
        $('.mobile-submenu-container .for-level-2').hide();
        let parent = $(li).clone().addClass('mobile-caret-return icon-arrow-validate');
        $('.mobile-submenu-container .for-level-3 ul').html($(li).children('ul').html());
        $('.mobile-submenu-container .for-level-3 ul li:eq(0)').before(parent);
        $('.mobile-submenu-container .for-level-3').fadeIn();
      };

    if (e.target.tagName != 'A') {
      if (e.target.parentNode.tagName == 'A') {
        linkElement = e.target.parentNode;
      }
    }
    else {
      linkElement = e.target;
    }

    // Link clicked.
    if (linkElement && !linkElement.classList.contains('toggle-only')) {
      // Handle normal link click behavior.
      return;
    }

    // Caret clicked
    if (e.target.tagName == 'SPAN') {
      showSubMenu(this);
      return;
    }

    // Empty space clicked.
    let href = ($(this).children('a').length) ? $(this).children('a').first().attr('href') : null,
      hasChildren = (0 !== $(this).children('ul').length);

    if (href != '#' && !hasChildren) {
      window.document.location.href = href;
      return;
    }

    showSubMenu(this);
  });

  $d.on("touchend", '.mobile-caret-return', function () {
    if (viewportWidth() <= MOBILE_MAX_SIZE) {
      if (currentLevel == 3) {
        $('.mobile-submenu-container .for-level-3').hide();
        $('.mobile-submenu-container .for-level-2').fadeIn();
        currentLevel = 2;
        return;
      }
      if (currentLevel == 2) {
        $('.mobile-submenu-container .for-level-2').hide();
        $('.navbar-collapse .region-navigation-collapsible').fadeIn();
        currentLevel = 0;
        return;
      }
    }
  });

  $d.on('click', '.mobile-caret-return a', function (e) {
    e.preventDefault();
  });

  $d.on(toucheEvent, '.icon-international', function () {
    if (viewportWidth() <= MOBILE_MAX_SIZE) {
      currentLevel = 2;
      $('.mobile-submenu-container').fadeIn();
      $('.navbar-collapse .region-navigation-collapsible').hide();
      var htmlCountries = '';
      for (var i = 0; i < $('#block-countryblock > ul').length; i++) {
        htmlCountries += $('#block-countryblock > ul').eq(i).html();
      }
      $('.mobile-submenu-container .for-level-2 ul').html(htmlCountries);
      $('.mobile-submenu-container .for-level-2 ul li:eq(0)').before('<li class="expanded dropdown mobile-caret-return icon-arrow-validate"><a>' + $('.country-menu-title').text() + '</a></li>');
      $('.mobile-submenu-container .for-level-2').fadeIn();
    }
  });

}

var initCarretBehavior = function ($) {

}

function isNavigatorIe() {
  var ua = window.navigator.userAgent;
  var msie = ua.indexOf("MSIE ");

  if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./))  // If
  // Internet
  // Explorer,
  // return
  // version
  // number
  {
    return true;
  }
  else  // If another browser, return 0
  {
    return false;
  }

  return false;
}

var animateDefault = function ($) {
  var myTimeline = anime.timeline({
    direction: 'alternate',
    loop: 0,
    autoplay: true
  });

  var offset = '-=900';

  var i = 0;
  while ($(".anim-" + i).length > 0) {
    var delay = 0;
    if (i == 0) {
      delay = 500;
    }
    myTimeline
      .add({
        targets: ".anim-" + i,
        marginTop: 0,
        delay: delay,
        duration: 1000,
        offset: offset,
        easing: 'easeInOutQuart'
      });
    i++;
  }
}

var animateIE = function ($) {
  $('.navbar-default').find('[class*=" anim-"]')
    .css('opacity', 0)
    .css('margin-top', '0px')
    .animate({'opacity': 1}, 300, 'linear');
}

var initMenuBehavior = function ($) {
  $('.navbar-default, #block-languageblock').delay(1000).animate({'height': '100px'}, 300, 'linear', function () {
    if (!$('.menu-content').hasClass("homepage-menu-open")) {
      $('.menu-content').addClass('homepage-menu-open');
    }
    var isIe = isNavigatorIe();
    if (isIe) {
      animateIE($);
    }
    else {
      animateDefault($);
    }
  });
}

var computeItemMaxWidth = function () {
  let $ = jQuery;
  if (viewportWidth() > MOBILE_MAX_SIZE && viewportWidth() < 1420) {
    let firstLevelLinksNumber = $('.menu--main>li').length;
    let availableSpace = $('.menu-content').width() - $('.navbar-header').width() - $('#block-languageblock').width();
    let itemsMaxWidth = parseInt(availableSpace / firstLevelLinksNumber);
    let availableExtraSpace = 0,
      smallerLevelLinkNumber = 0;

    //itemsMaxWidth -= 20; // (margin)
    $('.menu--main').css('max-width', availableSpace - 1);
    $('.menu--main>li').each(function () {
      $(this).css("max-width", (itemsMaxWidth) + 'px');
      $(this).css("overflow-x", 'auto');
      $(this).css("overflow-y", 'hidden');
      if (parseInt($(this).width()) < itemsMaxWidth) {
        availableExtraSpace = availableExtraSpace + itemsMaxWidth - this.scrollWidth;
        smallerLevelLinkNumber++;
      }
      $(this).css("overflow-x", 'visible');
      $(this).css("overflow-y", 'visible');
    });

    // Ensure to fit the entire tool bar space.
    if (availableExtraSpace) {
      itemsMaxWidth = itemsMaxWidth + (availableExtraSpace / (firstLevelLinksNumber - smallerLevelLinkNumber));
      $('.menu--main>li').each(function () {
        if (parseInt($(this).width()) < itemsMaxWidth) {
          $(this).css("max-width", (itemsMaxWidth - 20) + 'px');
        }
      });
    }


  }
  else {
    $('.menu--main>li').each(function () {
      $(this).css("max-width", '');
      $('.menu--main').css('max-width', '');
    });
  }
};


/**
 * Global main function.
 */
jQuery(document).ready(function ($) {
  if ($('.path-frontpage').length > 0) {
    // Init var for animations
    var delay = 0;
    var arr = [];
    var k = 0;
    // addClass for order animation
    $('.logo').addClass('resize-align anim-' + k++);
    $.each($('.navbar-nav > li'), function () {
      $(this).addClass('resize-align anim-' + k++);
    });
    $('.icon-international').addClass('resize-align anim-' + k++);
    $('.right-nav-part .dropdown').addClass('resize-align anim-' + k++);
    $('.icon-search').addClass('resize-align anim-' + k++);
    // start animation

    var videoIframe = $('.field--name-field-homepage-video').find('iframe');
    if (videoIframe.length > 0) {
      videoIframe.on('load', initMenuBehavior($));
    }
    else {
      initMenuBehavior($);
    }


  }

  /**
   * First level item width computing.
   */
  computeItemMaxWidth();
  $(window).resize(computeItemMaxWidth);

  /**
   * Init menu comportement.
   * @type {*|jQuery|HTMLElement}
   */
  $d = $(document);
  addMobileCaret($);
  initMobileBehavior($, $d);

  /**
   * Refresh the mobile caret display when the navbar is toggled (avoid
   * refreshing on each resize)
   */
  $('.navbar-toggle').click(function () {
    addMobileCaret($);
  });

  /**
   * Countries state desktop and mobiles.
   */
  $d.on('mouseenter', '.icon-international', function () {
    if (viewportWidth() > MOBILE_MAX_SIZE) {
      showContries($);
    }
  });
  $d.on('click', '.icon-international', function () {
    if (viewportWidth() > MOBILE_MAX_SIZE) {
      showContries($);
    }
  });
  $('#block-countryblock').on('mouseleave', function () {
    if (viewportWidth() > MOBILE_MAX_SIZE) {
      hideContries($);
    }
  });
  $('#block-countryblock').on('click', function () {
    hideContries($);
  });

  /**
   * Advanced submenu for desktop
   */
  $d.on('mouseenter', '.first-level', function () {
    $('.submenu-container').fadeIn();
    $('.submenu-container .for-level-3 ul').removeClass('complete').empty();
    $('.submenu-container .for-level-2 ul').html($(this).parent().children('ul').html());
    $('#block-countryblock').hide();
  });


  $d.on('mouseenter', '.level-1', function () {
    $('.submenu-container .for-level-3 ul').addClass('complete').html($(this).parent().children('ul').html());
    if ($(this).parent().hasClass("expanded") == false) {
      $('.submenu-container .for-level-3 ul').removeClass('complete').empty();
    }
  });

  $d.on('mouseenter', '.level-0', function () {
    $('.submenu-container').hide();
    $('#block-countryblock').hide();
  });

  $d.on('mouseenter', '#block-languageblock', function () {
    $('.submenu-container').hide();
  });

  $('.submenu-container').on('mouseleave', function () {
    $('.submenu-container').hide();
  });

  /**
   * Search form comportement.
   */
  $('.icon-search').on('click', function () {
    $('.menu--main').hide();
    $('.form-search').fadeIn();
    $('.form-search').addClass('open');
  });

  $('.form-search .icon-close-nav').on('click', function () {
    $('.form-search').removeClass('open').hide();
    $('.menu--main').fadeIn(200);
  });

});;
(function($,Drupal,drupalSettings){'use strict';Drupal.behaviors.userAgentClassBehavior={attach:function(){var userAgentText=navigator.userAgent,listDevicesAndBrowsers=drupalSettings.user_agent_class.ListDevicesAndBrowsers,listDevices=Object.keys(listDevicesAndBrowsers[0].device_entity).map(function(e){return listDevicesAndBrowsers[0].device_entity[e]}),listBrowsers=Object.keys(listDevicesAndBrowsers[1].user_agent_entity).map(function(e){return listDevicesAndBrowsers[1].user_agent_entity[e]}),methodProvideBoolean=drupalSettings.user_agent_class.methodProvide;if(methodProvideBoolean==='0'||methodProvideBoolean===0){var classes=[],item='';for(item in listBrowsers)if(listBrowsers[item].exclude.length>0&&userAgentText.search(listBrowsers[item].exclude)>=0&&userAgentText.search(listBrowsers[item].trigger)>=0){continue}else if(userAgentText.search(listBrowsers[item].trigger)>=0){classes.push(listBrowsers[item].className);break};for(item in listDevices)if(listDevices[item].exclude.length>0&&userAgentText.search(listDevices[item].exclude)>=0&&userAgentText.search(listDevices[item].trigger)>=0){continue}else if(userAgentText.search(listDevices[item].trigger)>=0){classes.push(listDevices[item].className);break};var classesInBody=classes.join(' ');$('body').addClass(classesInBody)}}}})(jQuery,Drupal,drupalSettings);
